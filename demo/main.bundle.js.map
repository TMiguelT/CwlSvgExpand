{"version":3,"sources":["webpack:///webpack/bootstrap 50e270b39181219b85f1","webpack:///../node_modules/cwlts/models/helpers/utils.js","webpack:///../node_modules/cwlts/models/helpers/validation/ErrorCode.js","webpack:///../node_modules/cwlts/models/helpers/validation/ValidationBase.js","webpack:///../node_modules/cwlts/models/helpers/UnimplementedMethodException.js","webpack:///../node_modules/cwlts/models/generic/ParameterTypeModel.js","webpack:///../node_modules/cwlts/models/v1.0/V1ExpressionModel.js","webpack:///../node_modules/cwlts/models/helpers/constants.js","webpack:///../node_modules/cwlts/models/d2sb/SBDraft2ExpressionModel.js","webpack:///../node_modules/cwl-svg/compiled/src/plugins/plugin-base.js","webpack:///../node_modules/cwlts/models/generic/ExpressionModel.js","webpack:///../node_modules/cwlts/models/generic/CommandInputParameterModel.js","webpack:///../node_modules/cwlts/models/generic/WorkflowModel.js","webpack:///../node_modules/cwlts/models/generic/ProcessRequirementModel.js","webpack:///../node_modules/cwlts/models/generic/CommandOutputParameterModel.js","webpack:///../node_modules/cwlts/models/generic/RequirementBaseModel.js","webpack:///../node_modules/cwlts/models/generic/WorkflowInputParameterModel.js","webpack:///../node_modules/cwlts/models/generic/WorkflowOutputParameterModel.js","webpack:///../node_modules/cwlts/models/helpers/ExpressionEvaluator.js","webpack:///../node_modules/cwlts/models/generic/StepModel.js","webpack:///../node_modules/cwlts/models/generic/WorkflowStepInputModel.js","webpack:///../node_modules/cwlts/models/generic/WorkflowStepOutputModel.js","webpack:///../node_modules/cwlts/models/generic/CommandLineToolModel.js","webpack:///../node_modules/cwlts/models/generic/CommandArgumentModel.js","webpack:///../node_modules/cwlts/models/helpers/JobHelper.js","webpack:///../node_modules/cwl-svg/compiled/src/graph/graph-node.js","webpack:///../node_modules/cwlts/models/index.js","webpack:///../node_modules/cwlts/models/generic/WorkflowFactory.js","webpack:///../node_modules/cwlts/models/helpers/TypeResolver.js","webpack:///../node_modules/cwlts/models/generic/CommandLineToolFactory.js","webpack:///../node_modules/cwlts/models/helpers/CommandLinePart.js","webpack:///../node_modules/cwlts/models/generic/CommandLineBindingModel.js","webpack:///../node_modules/cwlts/models/v1.0/V1CommandInputParameterModel.js","webpack:///../node_modules/cwlts/models/generic/DockerRequirementModel.js","webpack:///../node_modules/cwlts/models/generic/CommandOutputBindingModel.js","webpack:///../node_modules/cwlts/models/generic/CreateFileRequirementModel.js","webpack:///../node_modules/cwlts/models/generic/DirentModel.js","webpack:///../node_modules/cwlts/models/generic/ResourceRequirementModel.js","webpack:///../node_modules/cwl-svg/compiled/src/graph/workflow.js","webpack:///../node_modules/cwl-svg/compiled/src/graph/edge.js","webpack:///../node_modules/cwl-svg/compiled/src/plugins/selection/selection.js","webpack:///../node_modules/cwlts/models/helpers/EventHub.js","webpack:///../node_modules/cwlts/models/helpers/Graph.js","webpack:///../node_modules/cwlts/models/v1.0/V1WorkflowOutputParameterModel.js","webpack:///../node_modules/cwlts/models/helpers/CommandLinePrepare.js","webpack:///../node_modules/cwlts/models/v1.0/V1CommandArgumentModel.js","webpack:///../node_modules/cwlts/models/v1.0/V1CommandLineBindingModel.js","webpack:///../node_modules/cwlts/models/v1.0/V1WorkflowInputParameterModel.js","webpack:///../node_modules/cwlts/models/v1.0/V1CommandOutputParameterModel.js","webpack:///../node_modules/cwlts/models/v1.0/V1CommandOutputBindingModel.js","webpack:///../node_modules/cwlts/models/d2sb/SBDraft2CommandLineBindingModel.js","webpack:///../node_modules/cwlts/models/generic/ExpressionToolModel.js","webpack:///../node_modules/cwl-svg/compiled/index.js","webpack:///../node_modules/cwl-svg/compiled/src/utils/geometry.js","webpack:///../node_modules/cwl-svg/compiled/src/graph/io-port.js","webpack:///../node_modules/cwl-svg/compiled/src/utils/svg-utils.js","webpack:///../node_modules/cwl-svg/compiled/src/graph/step-node.js","webpack:///../node_modules/cwl-svg/compiled/src/graph/template-parser.js","webpack:///../node_modules/cwl-svg/compiled/src/plugins/port-drag/port-drag.js","webpack:///../node_modules/cwl-svg/compiled/src/index.js","webpack:///../node_modules/cwl-svg/compiled/src/plugins/zoom/zoom.js","webpack:///../node_modules/cwl-svg/compiled/src/plugins/arrange/arrange.js","webpack:///../node_modules/cwl-svg/compiled/src/plugins/validate/validate.js","webpack:///../node_modules/cwl-svg/compiled/src/plugins/node-move/node-move.js","webpack:///../node_modules/cwl-svg/compiled/src/behaviors/edge-panning.js","webpack:///../node_modules/cwl-svg/compiled/src/plugins/edge-hover/edge-hover.js","webpack:///../node_modules/cwl-svg/compiled/src/plugins/deletion/deletion.js","webpack:///./index.ts","webpack:///../node_modules/cwlts/models/generic/index.js","webpack:///../node_modules/cwlts/models/v1.0/V1WorkflowModel.js","webpack:///../node_modules/cwlts/models/v1.0/V1StepModel.js","webpack:///../node_modules/cwlts/models/helpers/CommandLineUtils.js","webpack:///../node_modules/cwlts/models/helpers/CommandLineParsers.js","webpack:///../node_modules/cwlts/models/v1.0/V1CommandLineToolModel.js","webpack:///../node_modules/cwlts/models/v1.0/V1InitialWorkDirRequirementModel.js","webpack:///../node_modules/cwlts/models/v1.0/V1DirentModel.js","webpack:///../node_modules/cwlts/models/v1.0/V1InlineJavascriptRequirementModel.js","webpack:///../node_modules/cwlts/models/v1.0/V1ResourceRequirementModel.js","webpack:///../node_modules/cwlts/models/helpers/sbg-expression-lib.js","webpack:///../node_modules/cwlts/models/d2sb/SBDraft2CommandLineToolModel.js","webpack:///../node_modules/cwlts/models/d2sb/SBDraft2CommandArgumentModel.js","webpack:///../node_modules/cwlts/models/d2sb/SBDraft2CommandInputParameterModel.js","webpack:///../node_modules/cwlts/models/d2sb/SBDraft2CommandOutputParameterModel.js","webpack:///../node_modules/cwlts/models/d2sb/SBDraft2CommandOutputBindingModel.js","webpack:///../node_modules/cwlts/models/d2sb/SBDraft2CreateFileRequirementModel.js","webpack:///../node_modules/cwlts/models/d2sb/SBDraft2FileDefModel.js","webpack:///../node_modules/cwlts/models/d2sb/SBDraft2ResourceRequirementModel.js","webpack:///../node_modules/cwlts/models/v1.0/V1WorkflowStepInputModel.js","webpack:///../node_modules/cwlts/models/v1.0/V1WorkflowStepOutputModel.js","webpack:///../node_modules/cwlts/models/d2sb/SBDraft2WorkflowModel.js","webpack:///../node_modules/cwlts/models/d2sb/SBDraft2StepModel.js","webpack:///../node_modules/cwlts/models/d2sb/SBDraft2WorkflowStepInputModel.js","webpack:///../node_modules/cwlts/models/d2sb/SBDraft2WorkflowStepOutputModel.js","webpack:///../node_modules/cwlts/models/d2sb/SBDraft2WorkflowInputParameterModel.js","webpack:///../node_modules/cwlts/models/d2sb/SBDraft2WorkflowOutputParameterModel.js","webpack:///../node_modules/cwlts/models/helpers/index.js","webpack:///../node_modules/cwlts/models/helpers/JSExecutor.js","webpack:///../node_modules/vm-browserify/index.js","webpack:///../node_modules/indexof/index.js","webpack:///../node_modules/cwl-svg/compiled/src/utils/dom-events.js","webpack:///../node_modules/cwl-svg/compiled/src/utils/event-hub.js","webpack:///../node_modules/cwl-svg/compiled/src/utils/html-utils.js","webpack:///../expand.ts"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;AC7DA;AACA;AACA,4CAA4C,OAAO;AACnD;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gFAAgF;AAChF;AACA,+BAA+B;AAC/B;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,WAAW;;AAEjC,4BAA4B,uBAAuB;AACnD;AACA;AACA,oCAAoC,yCAAyC;AAC7E;AACA;AACA;AACA,sBAAsB,MAAM,YAAY;;AAExC,4BAA4B,sBAAsB;AAClD;AACA,0BAA0B,qBAAqB;AAC/C;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,0BAA0B,WAAW;AACrC,0BAA0B,WAAW;AACrC;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,iBAAiB,EAAE;AACnE;AACA;AACA,yBAAyB,UAAU;AACnC,oFAAoF,kCAAkC,EAAE;AACxH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,mBAAmB,EAAE;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,mBAAmB,iBAAiB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,mBAAmB,iBAAiB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,YAAY;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,sDAAsD,EAAE;AAC7F;AACA;AACA,yBAAyB,YAAY;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6EAA6E,2BAA2B,EAAE,yCAAyC,2BAA2B,EAAE;AAChL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,gBAAgB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,6BAA6B;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO,WAAW,EAAE;AAC/B,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,SAAS;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,oBAAoB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,oBAAoB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,gBAAgB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,kBAAkB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;;;;;;;ACrZA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,0DAA0D;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;AClDA;AACA;AACA,4CAA4C,OAAO;AACnD;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,YAAY,EAAE;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,yBAAyB;AAClE,6BAA6B,iEAAiE;AAC9F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,eAAe,6BAA6B;AAC5C,iBAAiB;AACjB;AACA;AACA,8BAA8B,gBAAgB;AAC9C;AACA;AACA;AACA,qEAAqE,wBAAwB,EAAE;AAC/F,mDAAmD,oBAAoB,MAAM,WAAW,GAAG,EAAE;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,CAAC;AACD;;;;;;;;AC7JA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA,6BAA6B,aAAa,EAAE,kBAAkB;AAC9D,6DAA6D,OAAO,EAAE,OAAO;AAC7E;AACA;AACA,CAAC;AACD;;;;;;;;ACVA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA,4CAA4C,OAAO;AACnD;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA,iCAAiC,cAAc;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,kCAAkC,EAAE;AAC5F;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,sDAAsD,EAAE;AACzG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,SAAS;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,YAAY;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,4DAA4D,kCAAkC,EAAE;AAChG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,kCAAkC,EAAE;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,yBAAyB,EAAE;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,wBAAwB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;AC7ZA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA,4CAA4C,OAAO;AACnD;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,8BAA8B;AAC/D;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA,CAAC;AACD;;;;;;;;ACzFA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA,iCAAiC;;;;;;;;ACJjC;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA,4CAA4C,OAAO;AACnD;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iCAAiC,8BAA8B;AAC/D;AACA;AACA;AACA,2CAA2C,gBAAgB,EAAE;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,UAAU;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA,CAAC;AACD;;;;;;;;ACjIA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,uC;;;;;;;ACpBA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA,uCAAuC,gBAAgB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,8BAA8B;AACrE;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,CAAC;AACD;;;;;;;;ACjGA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,sDAAsD,qDAAqD,EAAE;AAC7G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,kCAAkC,EAAE;AACpF;AACA;AACA;AACA;AACA,kDAAkD,qDAAqD,EAAE;AACzG;AACA,oCAAoC,kCAAkC,EAAE;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAqE,+BAA+B,EAAE;AACtG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,CAAC;AACD;;;;;;;;AC1HA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA,+BAA+B,oBAAoB;AACnD;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uEAAuE,qCAAqC;AAC5G;AACA,iBAAiB;AACjB;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,sBAAsB;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,cAAc;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,kCAAkC,EAAE;AAC3F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,uBAAuB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,kBAAkB;AACzC,2BAA2B,qBAAqB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,uBAAuB,EAAE;AACxE,iDAAiD,uBAAuB,EAAE;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,yCAAyC,wCAAwC,EAAE;AACnF,2CAA2C,yCAAyC,EAAE;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,wBAAwB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,yBAAyB;AAChD;AACA;AACA;AACA;AACA,uBAAuB,kBAAkB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,yBAAyB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,wBAAwB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE,4BAA4B,EAAE;AAC/F;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,wBAAwB;AACnD;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,4BAA4B;AAC/D;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,kBAAkB;AACrD,iCAAiC,gBAAgB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,aAAa;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,cAAc;AAC5C,+BAA+B,oBAAoB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,+BAA+B,oBAAoB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,aAAa;AAC3C,gCAAgC,gBAAgB;AAChD,8BAA8B,WAAW;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,oDAAoD,kCAAkC,EAAE;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,aAAa;AAC3C,gCAAgC,gBAAgB;AAChD,8BAA8B,WAAW;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,qDAAqD,kCAAkC,EAAE;AACzF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,oBAAoB;AACnD;AACA;AACA;AACA,+BAA+B,oBAAoB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,oBAAoB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,4CAA4C,EAAE;AAC5F;AACA,gDAAgD,8CAA8C,EAAE;AAChG;AACA,4CAA4C,0CAA0C,EAAE;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,+BAA+B,oBAAoB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACtmCA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;AC9BA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,kCAAkC,EAAE;AACpF;AACA;AACA;AACA;AACA,kDAAkD,qDAAqD,EAAE;AACzG;AACA,oCAAoC,kCAAkC,EAAE;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,4BAA4B,EAAE;AAC5F,uDAAuD,qBAAqB,EAAE;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACjFA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,kCAAkC,EAAE;AACjG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE,kCAAkC,EAAE;AACrG;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACzEA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,qBAAqB,EAAE;AACjF;AACA;AACA,CAAC;AACD;;;;;;;;AC/EA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,qBAAqB,EAAE;AACjF;AACA;AACA,CAAC;AACD;;;;;;;;AC1EA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA,iCAAiC,cAAc;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,wFAAwF;AACxF,kDAAkD;AAClD;AACA;AACA;AACA,+DAA+D,yBAAyB,EAAE;AAC1F;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,qEAAqE,qBAAqB,EAAE;AAC5F;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,mDAAmD,kBAAkB,EAAE;AACvE;AACA;AACA,gEAAgE;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,kBAAkB,EAAE;AACnE;AACA;AACA,4DAA4D;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,kCAAkC;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA,yEAAyE;AACzE;AACA;AACA,yCAAyC,kCAAkC;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,4BAA4B;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA,+BAA+B;AAC/B;AACA,6CAA6C,4BAA4B;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,kCAAkC;AAC3D;AACA;AACA;AACA,uBAAuB,kCAAkC;AACzD;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,sBAAsB;;;;;;;;AC1KvB;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA,4CAA4C,OAAO;AACnD;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,kCAAkC,eAAe;AACjD;AACA,aAAa,IAAI;AACjB,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA,kCAAkC,kBAAkB;AACpD;AACA;AACA,kCAAkC,kBAAkB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,cAAc;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,kCAAkC,EAAE;AAC3F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B,2BAA2B;AAC3B,wCAAwC;AACxC;AACA,0DAA0D,uCAAuC,EAAE;AACnG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,0BAA0B;AACjD;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACpHA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACvEA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA,CAAC;AACD;;;;;;;;ACpDA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,iBAAiB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,iDAAiD,4BAA4B,EAAE;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,mCAAmC,iBAAiB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,2DAA2D;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yEAAyE,yCAAyC,EAAE;AACpH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,2CAA2C;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,WAAW,YAAY;AACvD;AACA;AACA;AACA,gDAAgD,kCAAkC,EAAE;AACpF;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,yBAAyB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,UAAU,YAAY;AACrD;AACA;AACA;AACA,gDAAgD,kCAAkC,EAAE;AACpF;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,wBAAwB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,2BAA2B;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,kBAAkB,EAAE,oBAAoB,gBAAgB,EAAE;AAC3G;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,CAAC;AACD;;;;;;;;AC3aA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,mBAAmB,EAAE;AAChE;AACA;AACA,CAAC;AACD;;;;;;;;ACjGA;AACA;AACA,4CAA4C,OAAO;AACnD;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,OAAO;AAC1B,mBAAmB,OAAO;AAC1B,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,OAAO;AAC1B,mBAAmB,OAAO;AAC1B,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,iEAAiE;AACzF;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,6BAA6B,QAAQ,2DAA2D;AAChG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,CAAC;AACD;;;;;;;;AChIA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,gBAAgB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,oBAAoB,EAAE;AACxF,oEAAoE,oBAAoB,EAAE;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,kCAAkC,EAAE;AACvE,uCAAuC,uJAAuJ,EAAE;AAChM,yCAAyC,kBAAkB,EAAE;AAC7D;AACA,mCAAmC,kCAAkC,EAAE;AACvE,uCAAuC,yJAAyJ,EAAE;AAClM,yCAAyC,kBAAkB,EAAE;AAC7D;AACA;AACA;AACA,mCAAmC,wCAAwC;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,kEAAkE;AACxF;AACA;AACA,wCAAwC,aAAa;AACrD;AACA;AACA;AACA,wCAAwC,YAAY;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,sC;;;;;;;AC/HA;AACA;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA;;;;;;;;ACNA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;AC1BA;AACA;AACA,4CAA4C,OAAO;AACnD;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACxSA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;AC1BA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA,iDAAiD;AACjD,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACZA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA,4CAA4C,OAAO;AACnD;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,0BAA0B,EAAE;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACpDA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA,4CAA4C,OAAO;AACnD;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE,kCAAkC,EAAE;AACxG;AACA;AACA;AACA;AACA,wFAAwF;AACxF,gEAAgE,kCAAkC,EAAE;AACpG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wEAAwE,sBAAsB,EAAE,uBAAuB,YAAY,EAAE;AACrI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,kCAAkC,EAAE;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE,kCAAkC,EAAE;AACxG;AACA;AACA;AACA,yFAAyF,kCAAkC,EAAE;AAC7H;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACtHA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACzDA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,kCAAkC,EAAE;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D,kCAAkC,EAAE;AACnG;AACA;AACA,CAAC;AACD;;;;;;;;ACzDA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,8BAA8B,EAAE;AAC5F,+BAA+B,qBAAqB,EAAE,eAAe,qBAAqB,EAAE;AAC5F;AACA;AACA,CAAC;AACD;;;;;;;;ACtCA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACpCA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,MAAM,gBAAgB;AACzC;AACA;AACA;AACA;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA;AACA,4BAA4B,sBAAsB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,2CAA2C,EAAE;AAClG;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,wCAAwC,0BAA0B;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,oBAAoB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,2GAA2G,oBAAoB,EAAE;AACjI;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2EAA2E,iBAAiB;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,QAAQ,gBAAgB;AAC/C;AACA;AACA;AACA;AACA,qBAAqB,0BAA0B;AAC/C;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,sBAAsB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,0BAA0B;AAC1C,iBAAiB;AACjB;AACA;AACA,+CAA+C,4BAA4B,EAAE;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,2BAA2B;AACtE;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,yCAAyC,kBAAkB,EAAE;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,WAAW;AAC1C,2BAA2B,OAAO;AAClC,2BAA2B,OAAO;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+FAA+F,sBAAsB;AACrH;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,uBAAuB,QAAQ,gBAAgB;AAC/C;AACA;AACA;AACA;AACA,qBAAqB,0BAA0B;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mEAAmE,UAAU;AAC7E;AACA;AACA;AACA;AACA,uBAAuB,QAAQ,gBAAgB;AAC/C;AACA;AACA;AACA;AACA,qBAAqB,0BAA0B;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,YAAY;AAC5C;AACA;AACA,uBAAuB,YAAY;AACnC;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,oC;;;;;;;AC/gBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,MAAM,gBAAgB;AACzC;AACA;AACA;AACA;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,cAAc;AAC/C,uCAAuC,oBAAoB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mGAAmG,UAAU;AAC7G;AACA;AACA;AACA;AACA,2BAA2B,QAAQ,gBAAgB;AACnD;AACA;AACA;AACA;AACA,yBAAyB,0BAA0B;AACnD;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA,CAAC;AACD;AACA,gC;;;;;;;ACtIA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,MAAM,gBAAgB;AACzC;AACA;AACA;AACA;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,8DAA8D,EAAE;AACxG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,UAAU;AAC5E;AACA;AACA;AACA;AACA,uBAAuB,QAAQ,gBAAgB;AAC/C;AACA;AACA;AACA;AACA,qBAAqB,0BAA0B;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2FAA2F,qBAAqB;AAChH;AACA;AACA;AACA;AACA,uBAAuB,QAAQ,gBAAgB;AAC/C;AACA;AACA;AACA;AACA,qBAAqB,0BAA0B;AAC/C;AACA;AACA,+FAA+F,sBAAsB;AACrH;AACA;AACA;AACA;AACA,uBAAuB,QAAQ,gBAAgB;AAC/C;AACA;AACA;AACA;AACA,qBAAqB,0BAA0B;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,iCAAiC;AACpE;AACA;AACA;AACA;AACA,sCAAsC,0BAA0B,EAAE;AAClE;AACA;AACA;AACA,+EAA+E,kBAAkB;AACjG;AACA;AACA;AACA;AACA,uBAAuB,QAAQ,gBAAgB;AAC/C;AACA;AACA;AACA;AACA,qBAAqB,0BAA0B;AAC/C;AACA,4BAA4B,uCAAuC,aAAa,EAAE,EAAE;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2GAA2G,yBAAyB;AACpI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uHAAuH,0BAA0B;AACjJ;AACA;AACA;AACA;AACA,+BAA+B,QAAQ,gBAAgB;AACvD;AACA;AACA;AACA;AACA,6BAA6B,0BAA0B;AACvD;AACA;AACA;AACA,uBAAuB,QAAQ,gBAAgB;AAC/C;AACA;AACA;AACA;AACA,qBAAqB,0BAA0B;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+GAA+G,0BAA0B;AACzI;AACA;AACA;AACA;AACA,uBAAuB,QAAQ,gBAAgB;AAC/C;AACA;AACA;AACA;AACA,qBAAqB,0BAA0B;AAC/C;AACA;AACA;AACA;AACA;AACA,kFAAkF,UAAU;AAC5F;AACA;AACA;AACA;AACA,uBAAuB,QAAQ,gBAAgB;AAC/C;AACA;AACA;AACA;AACA,qBAAqB,0BAA0B;AAC/C;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,qC;;;;;;;AC7SA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA,8CAA8C;AAC9C;AACA,SAAS,IAAI;AACb;AACA;AACA;AACA;AACA;AACA,4BAA4B,kCAAkC;AAC9D;AACA;AACA;AACA,wFAAwF,sBAAsB,EAAE;AAChH;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA,uBAAuB,iCAAiC;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;AC1CA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,sEAAsE;AACvE;AACA;AACA,iCAAiC,+BAA+B;AAChE;AACA;AACA;AACA,oDAAoD,gBAAgB;AACpE;AACA,8BAA8B,cAAc,GAAG,cAAc;AAC7D;AACA;AACA;AACA;AACA,8BAA8B,aAAa;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,aAAa;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,kBAAkB;AACrD,iCAAiC,gBAAgB;AACjD,iCAAiC,+BAA+B;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,yBAAyB,cAAc;AACvC,8BAA8B;AAC9B;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,oBAAoB;AACnD,gDAAgD,gBAAgB;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,oBAAoB;AACnD,gDAAgD,gBAAgB;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,wBAAwB;AACvE;AACA,kEAAkE,gBAAgB;AAClF;AACA;AACA;AACA;AACA,kDAAkD,gBAAgB;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,gBAAgB;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;AC5OA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,kCAAkC,EAAE;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACxEA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,yBAAyB,0CAA0C;AACnE,yBAAyB;AACzB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,qDAAqD;AACrD;AACA,qDAAqD,qEAAqE;AAC1H;AACA,iDAAiD;AACjD;AACA,SAAS,IAAI;AACb;AACA;AACA,CAAC;AACD;;;;;;;;ACrFA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,uFAAuF;AACvF,8DAA8D,iCAAiC,EAAE;AACjG;AACA;AACA;AACA;AACA;AACA,gEAAgE,iCAAiC,EAAE;AACnG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAqE,kCAAkC,EAAE;AACzG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE,kCAAkC,EAAE;AACrG;AACA;AACA;AACA;AACA,+DAA+D,kCAAkC,EAAE;AACnG;AACA;AACA;AACA;AACA,+DAA+D,kCAAkC,EAAE;AACnG;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACzGA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,kCAAkC,EAAE;AACjG;AACA;AACA;AACA;AACA;AACA,mDAAmD;AACnD;AACA,uDAAuD;AACvD;AACA;AACA,6DAA6D,kCAAkC,EAAE;AACjG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,qBAAqB,EAAE;AAC9E;AACA;AACA,CAAC;AACD;;;;;;;;ACtFA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,kCAAkC,EAAE;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;AC1DA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,WAAW;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wEAAwE,sBAAsB,EAAE,uBAAuB,YAAY,EAAE;AACrI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA,wDAAwD,kCAAkC,EAAE;AAC5F;AACA;AACA;AACA;AACA;AACA,iEAAiE,kCAAkC,EAAE;AACrG;AACA;AACA;AACA,yFAAyF,kCAAkC,EAAE;AAC7H;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACpFA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,cAAc;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD;AACtD;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,kCAAkC,EAAE;AAC7F;AACA;AACA,+DAA+D,kCAAkC,EAAE;AACnG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACtHA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA,6DAA6D,kCAAkC,EAAE;AACjG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,qBAAqB,EAAE;AAC9E;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE,kCAAkC,EAAE;AACrG;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;AChFA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA,uFAAuF,2EAA2E,EAAE;AACpK,yFAAyF,6EAA6E,EAAE;AACxK;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACvCA;AACA;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iC;;;;;;;ACjBA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,UAAU;AAC5C,kCAAkC,UAAU;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,oC;;;;;;;ACnCA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,0BAA0B;AACzC,iBAAiB;AACjB;AACA;AACA,wCAAwC,0BAA0B;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,mC;;;;;;;ACjCA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,qC;;;;;;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,MAAM,gBAAgB;AACzC;AACA;AACA;AACA;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA;AACA,4BAA4B,sBAAsB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2FAA2F,UAAU;AACrG;AACA;AACA;AACA;AACA,uBAAuB,QAAQ,gBAAgB;AAC/C;AACA;AACA;AACA;AACA,qBAAqB,0BAA0B;AAC/C;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,qC;;;;;;;ACnEA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,2C;;;;;;;ACdA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,6BAA6B;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA,eAAe,WAAW;AAC1B,eAAe,YAAY;AAC3B;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE,2BAA2B;AAC5F;AACA;AACA,kEAAkE,2BAA2B;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,UAAU;AACvE;AACA;AACA;AACA;AACA;AACA,uBAAuB,QAAQ,gBAAgB;AAC/C;AACA;AACA;AACA;AACA,qBAAqB,0BAA0B;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+FAA+F,sBAAsB;AACrH;AACA;AACA;AACA;AACA,uBAAuB,QAAQ,gBAAgB;AAC/C;AACA;AACA;AACA;AACA,qBAAqB,0BAA0B;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA,uBAAuB,uBAAuB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+EAA+E,iBAAiB;AAChG;AACA;AACA;AACA;AACA,2BAA2B,QAAQ,gBAAgB;AACnD;AACA;AACA;AACA;AACA,yBAAyB,0BAA0B;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,qC;;;;;;;ACzWA;AACA;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iC;;;;;;;ACdA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,mEAAmE;AAC/F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,gC;;;;;;;AClDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,MAAM,gBAAgB;AACzC;AACA;AACA;AACA;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA;AACA,4BAA4B,sBAAsB;AAClD;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,YAAY,kBAAkB,EAAE;AAC3E;AACA;AACA,0CAA0C,YAAY,kBAAkB,EAAE;AAC1E;AACA;AACA,+CAA+C,YAAY,kBAAkB,EAAE;AAC/E;AACA;AACA;AACA,8EAA8E,UAAU;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,QAAQ,gBAAgB;AAC/C;AACA;AACA;AACA;AACA,qBAAqB,0BAA0B;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD;AACjD;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,eAAe,WAAW;AAC1B;AACA;AACA,gCAAgC;AAChC;AACA,uBAAuB,oBAAoB;AAC3C;AACA;AACA,2BAA2B,uBAAuB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAqE,2BAA2B,EAAE;AAClG;AACA,uBAAuB,0BAA0B;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,2BAA2B;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,kBAAkB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,qBAAqB;AACtD;AACA;AACA;AACA;AACA;AACA,uBAAuB,wBAAwB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,kBAAkB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,mC;;;;;;;AC7XA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wEAAwE,UAAU;AAClF;AACA;AACA;AACA;AACA,uBAAuB,QAAQ,gBAAgB;AAC/C;AACA;AACA;AACA;AACA,qBAAqB,0BAA0B;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2EAA2E,iBAAiB;AAC5F;AACA;AACA;AACA;AACA,uBAAuB,QAAQ,gBAAgB;AAC/C;AACA;AACA;AACA;AACA,qBAAqB,0BAA0B;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uGAAuG,sBAAsB;AAC7H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,QAAQ,gBAAgB;AACvD;AACA;AACA;AACA;AACA,6BAA6B,0BAA0B;AACvD;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,CAAC;AACD;AACA,oC;;;;;;;ACrIA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,iBAAiB;AACrD;AACA;AACA;AACA;AACA;AACA,4CAA4C,6BAA6B;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,iBAAiB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2EAA2E,iBAAiB;AAC5F;AACA;AACA,iGAAiG,kBAAkB,EAAE;AACrH;AACA;AACA;AACA,uBAAuB,QAAQ,gBAAgB;AAC/C;AACA;AACA;AACA;AACA,qBAAqB,0BAA0B;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,uBAAuB,iBAAiB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,4BAA4B,oBAAoB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,qC;;;;;;;AC5NA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA,gCAAgC;AAChC;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B,oDAAoD,eAAe;AACnE;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,gCAAgC;AACxE;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,gCAAgC;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,wC;;;;;;;ACrGA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,MAAM,gBAAgB;AACzC;AACA;AACA;AACA;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,eAAe;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,sC;;;;;;;ACtGA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,MAAM,gBAAgB;AACzC;AACA;AACA;AACA;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,oC;;;;;;;;;AClGA,yLAAiD;AACjD,qLAA6C;AAC7C,qLAA6C;AAE7C,uCAA6C;AAC7C,wCAAiC;AACjC,IAAM,MAAM,GAAG,4CAA4C,CAAC;AAE5D,wCAAqC;AAErC,IAAM,EAAE,GAAG,wBAAe,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AACxC,IAAM,OAAO,GAAG,QAAQ,CAAC,cAAc,CAAC,KAAK,CAAQ,CAAC;AACtD,IAAM,QAAQ,GAAG,IAAI,kBAAQ,CAAC;IAC1B,KAAK,EAAE,EAAE;IACT,OAAO,EAAE,OAAO;IAChB,OAAO,EAAE,CAAC,IAAI,gBAAe,EAAE,CAAC;CACnC,CAAC,CAAC;;;;;;;;AChBH;AACA;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AC7BA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,mDAAmD,kCAAkC,EAAE;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,kCAAkC,EAAE;AACxF;AACA;AACA;AACA,8BAA8B,WAAW;AACzC;AACA;AACA;AACA,8BAA8B,WAAW;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,sBAAsB;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,sBAAsB;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,0BAA0B,EAAE;AACpF,2DAA2D,2BAA2B,EAAE;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,yDAAyD,yBAAyB,EAAE;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,uBAAuB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,oBAAoB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE,wBAAwB,EAAE;AAC3F;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;AC5NA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA,4CAA4C,OAAO;AACnD;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,sBAAsB;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,sBAAsB;AAC5D;AACA;AACA,4CAA4C,sBAAsB,EAAE;AACpE;AACA;AACA,SAAS;AACT,8CAA8C,sBAAsB,EAAE;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,yBAAyB,EAAE;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,4GAA4G,EAAE;AACpJ;AACA,sCAAsC,+GAA+G,EAAE;AACvJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,kBAAkB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,qDAAqD,EAAE;AACjG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,6BAA6B,EAAE;AACvF;AACA,0DAA0D;AAC1D;AACA,0FAA0F,4QAA4Q;AACtW;AACA,wDAAwD,kCAAkC,EAAE;AAC5F;AACA;AACA,4CAA4C,0BAA0B,EAAE;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,SAAS,0BAA0B,2BAA2B,EAAE;AAChE;AACA;AACA;AACA;AACA,kCAAkC,kBAAkB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,sDAAsD,EAAE;AAClG;AACA;AACA,wDAAwD,8BAA8B,EAAE;AACxF,iDAAiD;AACjD,4FAA4F,kGAAkG;AAC9L,4CAA4C,0BAA0B,EAAE;AACxE;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,0BAA0B,2BAA2B,EAAE;AAChE;AACA;AACA;AACA,CAAC;AACD;;;;;;;;AC7PA;AACA;AACA,4CAA4C,OAAO;AACnD;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,mDAAmD,GAAG,mBAAmB;AACxF,0BAA0B;AAC1B,gGAAgG;AAChG;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA,KAAK,uBAAuB,6BAA6B,EAAE;AAC3D,6CAA6C,aAAa,EAAE;AAC5D;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA,6CAA6C,sBAAsB,EAAE;AACrE,KAAK;AACL;;;;;;;;AC1CA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,0CAA0C,2DAA2D,EAAE;AACvG;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA,aAAa,GAAG,mBAAmB;AACnC,SAAS;AACT;AACA,SAAS;AACT,uGAAuG,mBAAmB,EAAE;AAC5H,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8EAA8E,SAAS,IAAI;AAC3F,wBAAwB,iBAAiB,oBAAoB,aAAa;AAC1E;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACtKA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA,4CAA4C,OAAO;AACnD;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,iCAAiC,cAAc;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,kCAAkC,EAAE;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,kCAAkC,EAAE;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,cAAc;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,kCAAkC,EAAE;AACtG;AACA;AACA;AACA;AACA,2EAA2E,kCAAkC,EAAE;AAC/G;AACA;AACA;AACA;AACA;AACA,qEAAqE,kCAAkC,EAAE;AACzG;AACA;AACA;AACA;AACA;AACA,uFAAuF,kCAAkC,EAAE;AAC3H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,kCAAkC,EAAE;AAC/F;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,kCAAkC,EAAE;AACzF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2EAA2E,4BAA4B,EAAE;AACzG,4EAA4E,6BAA6B,EAAE;AAC3G,iFAAiF,+BAA+B,EAAE;AAClH,+EAA+E,uCAAuC,EAAE;AACxH,sFAAsF,2BAA2B,EAAE;AACnH;AACA;AACA;AACA,gFAAgF;AAChF;AACA,0DAA0D,kCAAkC,EAAE;AAC9F;AACA;AACA,6GAA6G;AAC7G;AACA,mEAAmE,kCAAkC,EAAE;AACvG;AACA;AACA,2FAA2F;AAC3F;AACA,6DAA6D,kCAAkC,EAAE;AACjG;AACA;AACA,6HAA6H;AAC7H;AACA;AACA,yDAAyD,kCAAkC,EAAE;AAC7F;AACA,0DAA0D,kCAAkC,EAAE;AAC9F;AACA,0DAA0D,kCAAkC,EAAE;AAC9F,wBAAwB;AACxB;AACA,wCAAwC;AACxC,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,iEAAiE,YAAY,EAAE;AAC/E,oDAAoD,sBAAsB,EAAE;AAC5E,sDAAsD,sBAAsB,EAAE;AAC9E;AACA;AACA;AACA;AACA;AACA,8DAA8D,sBAAsB,EAAE,uBAAuB,YAAY,EAAE;AAC3H;AACA;AACA;AACA,yEAAyE,gDAAgD,EAAE;AAC3H;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,YAAY,EAAE,wBAAwB,8CAA8C,EAAE;AACzI;AACA;AACA,6CAA6C,uCAAuC,EAAE;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,yBAAyB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACtWA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA,4CAA4C,OAAO;AACnD;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,kCAAkC,EAAE;AACzF;AACA;AACA;AACA;AACA;AACA,2BAA2B,QAAQ;AACnC;AACA,yDAAyD,kCAAkC,EAAE;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;AC/GA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,kCAAkC,EAAE;AACjG;AACA,yDAAyD,kCAAkC,EAAE;AAC7F;AACA;AACA;AACA,CAAC;AACD;;;;;;;;AC3CA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACjDA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,kCAAkC,EAAE;AAC5F;AACA,0DAA0D,kCAAkC,EAAE;AAC9F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,kCAAkC,EAAE;AAC/F;AACA;AACA;AACA,6DAA6D,kCAAkC,EAAE;AACjG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;AClEA;AACA,8CAA8C,cAAc;AAC5D,0EAA0E,sEAAsE,YAAY,qCAAqC,oDAAoD,WAAW,OAAO,qBAAqB,4CAA4C,8BAA8B,+BAA+B,0BAA0B,qBAAqB,eAAe,OAAO,0CAA0C,oCAAoC,8EAA8E,oBAAoB,+DAA+D,mEAAmE,eAAe,WAAW,OAAO,+BAA+B,qDAAqD,OAAO,yBAAyB,eAAe,OAAO,mEAAmE,OAAO,gBAAgB,IAAI;;;;;;;;ACFrgC;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA,4CAA4C,OAAO;AACnD;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,cAAc;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,QAAQ,aAAa,2BAA2B;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uEAAuE,QAAQ,+BAA+B,EAAE;AAChH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,kCAAkC,EAAE;AACpF;AACA;AACA;AACA;AACA;AACA,6BAA6B,UAAU;AACvC;AACA;AACA;AACA,gDAAgD,kCAAkC,EAAE;AACpF;AACA;AACA;AACA;AACA,+CAA+C,qDAAqD,EAAE;AACtG;AACA,kCAAkC,4CAA4C,EAAE;AAChF;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,kCAAkC,EAAE;AAC3F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,kCAAkC,EAAE;AACzF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,kCAAkC,EAAE;AACtG;AACA;AACA;AACA;AACA,+DAA+D,kCAAkC,EAAE;AACnG;AACA;AACA;AACA,2EAA2E,kCAAkC,EAAE;AAC/G;AACA;AACA;AACA,yEAAyE,kCAAkC,EAAE;AAC7G;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,kCAAkC,EAAE;AAC/F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D,0BAA0B,EAAE;AAC3F,gEAAgE,2BAA2B,EAAE;AAC7F;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,4DAA4D,iCAAiC,EAAE;AAC/F;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,2FAA2F;AAC3F;AACA,0DAA0D,kCAAkC,EAAE;AAC9F,qIAAqI;AACrI,mEAAmE,kCAAkC,EAAE;AACvG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT,wBAAwB;AACxB;AACA,wCAAwC;AACxC,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,iCAAiC,wBAAwB,EAAE;AAC3D,oCAAoC,cAAc,EAAE;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,mCAAmC,0BAA0B,EAAE;AAC/D;AACA;AACA,oCAAoC,2BAA2B,EAAE;AACjE;AACA;AACA;AACA,sEAAsE,wBAAwB,EAAE;AAChG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,yBAAyB,EAAE;AACpF;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE,wBAAwB,EAAE,yBAAyB,cAAc,EAAE;AACnI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wEAAwE,oDAAoD,EAAE;AAC9H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA,CAAC;AACD;;;;;;;;AChXA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mGAAmG;AACnG,8DAA8D,iCAAiC,EAAE;AACjG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D,kCAAkC,EAAE;AACnG;AACA;AACA;AACA;AACA,+DAA+D,kCAAkC,EAAE;AACnG;AACA;AACA;AACA,CAAC;AACD;;;;;;;;AChGA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA,4CAA4C,OAAO;AACnD;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA,yFAAyF,sBAAsB,EAAE,uBAAuB,YAAY,EAAE;AACtJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE,kCAAkC,EAAE;AACxG;AACA,+GAA+G,kCAAkC,EAAE;AACnJ;AACA;AACA;AACA,wDAAwD,kCAAkC,EAAE;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE,kCAAkC,EAAE;AACxG;AACA;AACA;AACA;AACA;AACA,oGAAoG;AACpG,gEAAgE,kCAAkC,EAAE;AACpG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;AC3IA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC,iEAAiE,kCAAkC,EAAE;AACrG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0FAA0F,sBAAsB,EAAE,uBAAuB,YAAY,EAAE;AACvJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA,iEAAiE,kCAAkC,EAAE;AACrG;AACA,sFAAsF,kCAAkC,EAAE;AAC1H;AACA;AACA,wDAAwD,kCAAkC,EAAE;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACtHA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,YAAY,EAAE;AAC5E;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE,kCAAkC,EAAE;AACrG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,mEAAmE,kCAAkC,EAAE;AACvG;AACA;AACA,4EAA4E,YAAY,EAAE;AAC1F;AACA;AACA;AACA,kFAAkF,kCAAkC,EAAE;AACtH;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,CAAC;AACD;;;;;;;;AClJA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,kCAAkC,EAAE;AAC9F,aAAa;AACb,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,sDAAsD,kCAAkC,EAAE;AAC1F;AACA;AACA;AACA;AACA;AACA,oDAAoD,kCAAkC,EAAE;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,kCAAkC,EAAE;AAC5F;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,yDAAyD,wBAAwB,EAAE;AACnF;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA,CAAC;AACD;;;;;;;;ACpFA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,kCAAkC,EAAE;AAClG,0DAA0D,kCAAkC,EAAE;AAC9F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA,iEAAiE,kCAAkC,EAAE;AACrG;AACA,6DAA6D,kCAAkC,EAAE;AACjG;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACjDA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,iCAAiC,EAAE;AAC1F;AACA,yDAAyD,iCAAiC,EAAE;AAC5F;AACA;AACA;AACA,CAAC;AACD;;;;;;;;AC5BA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACxEA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACjDA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,kBAAkB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,8BAA8B,WAAW;AACzC;AACA;AACA;AACA;AACA;AACA,8BAA8B,WAAW;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,mDAAmD,kCAAkC,EAAE;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,sBAAsB;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,sBAAsB;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,sBAAsB,EAAE;AAC5E,sDAAsD,sBAAsB,EAAE;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,yDAAyD,yBAAyB,EAAE;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,kCAAkC,EAAE;AAChG;AACA,SAAS;AACT;AACA;AACA,sEAAsE,kCAAkC,EAAE;AAC1G;AACA,SAAS;AACT;AACA;AACA,uEAAuE,kCAAkC,EAAE;AAC3G;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACxNA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA,4CAA4C,OAAO;AACnD;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,kBAAkB;AACpD;AACA;AACA;AACA;AACA;AACA,0CAA0C,qDAAqD,EAAE;AACjG;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,6BAA6B,EAAE;AACvF,0DAA0D;AAC1D;AACA,wGAAwG,yGAAyG,eAAe,4KAA4K;AAC5Y,0DAA0D,kCAAkC,EAAE;AAC9F;AACA;AACA,4CAA4C,4BAA4B,EAAE;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,SAAS,0BAA0B,2BAA2B,EAAE;AAChE;AACA;AACA;AACA;AACA,kCAAkC,kBAAkB;AACpD;AACA;AACA;AACA;AACA,0CAA0C,sDAAsD,EAAE;AAClG;AACA;AACA,wDAAwD,8BAA8B,EAAE;AACxF,iDAAiD;AACjD,wGAAwG,uGAAuG;AAC/M,4CAA4C,0BAA0B,EAAE;AACxE;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,0BAA0B,2BAA2B,EAAE;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,iCAAiC,EAAE;AACjG;AACA;AACA;AACA,8DAA8D,iCAAiC,EAAE;AACjG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,sBAAsB;AAC5D;AACA;AACA;AACA;AACA,sCAAsC,sBAAsB;AAC5D;AACA;AACA,gDAAgD,sBAAsB,EAAE;AACxE;AACA;AACA,SAAS;AACT,kDAAkD,sBAAsB,EAAE;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,yBAAyB,EAAE;AACpF;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,+BAA+B,EAAE;AACzF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,CAAC;AACD;;;;;;;;AC3OA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;AC7FA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACxEA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;AC/EA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;AC7DA;AACA;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACXA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mEAAmE,GAAG,gBAAgB;AACtF;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,CAAC;AACD;;;;;;;ACnBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,wBAAwB,eAAe;AACvC;AACA;AACA;;AAEA;AACA;AACA,gCAAgC,SAAS;AACzC;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;;AAEA;AACA,2BAA2B;AAC3B;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;;;;;;;ACxIA;;AAEA;AACA;AACA,iBAAiB,gBAAgB;AACjC;AACA;AACA;AACA,E;;;;;;;ACTA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,sBAAsB,EAAE;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B,UAAU;AACV,+BAA+B;AAC/B,UAAU;AACV,+BAA+B;AAC/B,UAAU;AACV;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE,6DAA6D,EAAE;AAC/H;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,CAAC;AACD;AACA,sC;;;;;;;ACzPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,MAAM,gBAAgB;AACzC;AACA;AACA;AACA;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA;AACA,4BAA4B,sBAAsB;AAClD;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA,8CAA8C;AAC9C;AACA,SAAS,IAAI;AACb;AACA;AACA;AACA;AACA;AACA,4BAA4B,kCAAkC;AAC9D;AACA;AACA;AACA,wFAAwF,sBAAsB,EAAE;AAChH;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA,uBAAuB,iCAAiC;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,qC;;;;;;;AC/DA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA,kEAAkE,+BAA+B,EAAE;AACnG;AACA;AACA,mBAAmB;AACnB,kBAAkB;AAClB,kBAAkB;AAClB,uBAAuB;AACvB,mBAAmB;AACnB,oBAAoB;AACpB;AACA;AACA,CAAC;AACD;AACA,sC;;;;;;;;;;;;;;;;;;;ACnBA,wCAAoD;AAGpD;IAAqD,2CAAU;IAA/D;;IAYA,CAAC;IAXG,6CAAW,GAAX;QAAA,iBAUC;QATG,MAAM,CAAC,gBAAgB,CAAC,UAAU,EAAE,eAAK;YACrC,IAAM,OAAO,GAAG,KAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,KAAK,CAAC,MAAoB,EAAE,MAAM,CAAC,CAAC;YAE7E,EAAE,CAAC,CAAC,OAAO,CAAC,EAAC;gBACT,IAAM,EAAE,GAAG,OAAO,CAAC,YAAY,CAAC,oBAAoB,CAAC,CAAC;gBACtD,IAAM,KAAK,GAAG,KAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;gBAC/C,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC;YACvC,CAAC;QACL,CAAC,EAAE,IAAI,CAAC,CAAC;IACb,CAAC;IACL,8BAAC;AAAD,CAAC,CAZoD,oBAAU,GAY9D","file":"main.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 66);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 50e270b39181219b85f1","\"use strict\";\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar constants_1 = require(\"./constants\");\nvar ErrorCode_1 = require(\"./validation/ErrorCode\");\nexports.ensureArray = function (map, key, valueKey) {\n    // object is not defined or is null, return an empty array\n    if (map === undefined || map === null)\n        return [];\n    if (Array.isArray(map)) {\n        // if the object is already an array of objects, we don't want to transform it\n        if (typeof map[0] === \"object\" || key === undefined) {\n            return map.slice();\n        }\n        else {\n            // if it's an array of something else, transform each element into {key: <any>item}\n            return map.map(function (item) {\n                return (_a = {}, _a[key] = item, _a);\n                var _a;\n            });\n        }\n    }\n    // if the object is a primitive, wrap it in an array\n    if (typeof map === \"string\" || typeof map === \"number\" || typeof map === \"boolean\") {\n        return [map];\n    }\n    // if the object is a hashmap, transform it accordingly\n    return Object.keys(map).map(function (prop) {\n        /*\n         if a valueKey is provided and the property isn't already an object, create an object from the valueKey\n         e.g.: map = {foo: \"bar\"}, key = \"id\", valueKey = \"type\"\n\n         return value is [ {id: \"foo\", type: \"bar\"} ];\n         */\n        if (valueKey && exports.checkMapValueType(map) !== \"object\" && exports.checkValueType(map[prop]) !== \"object\") {\n            return __assign((_a = {}, _a[valueKey] = map[prop], _a), (_b = {}, _b[key] = prop, _b));\n        }\n        /*\n         if they property is already an object, add its hashmap key under the property key provided as a param\n         e.g.: map = {foo: {bar: \"baz\"}}, key = \"id\", valueKey = \"type\"\n\n         return value is [ {id: \"foo\", bar: \"baz\"} ];\n         */\n        return __assign({}, map[prop], (_c = {}, _c[key] = prop, _c));\n        var _a, _b, _c;\n    });\n};\n/**\n * Checks the type of each property in a hashMap. Returns \"mismatch\" if property types are mixed,\n * otherwise returns type that corresponds to all properties.\n */\nexports.checkMapValueType = function (map) {\n    var type = null;\n    Object.keys(map).forEach(function (key) {\n        var valType = exports.checkValueType(map[key]);\n        if (type && valType !== type) {\n            type = \"mismatch\";\n            return type;\n        }\n        else {\n            type = valType;\n        }\n    });\n    return type;\n};\nexports.checkValueType = function (value) {\n    var valType;\n    if (Array.isArray(value)) {\n        valType = \"array\";\n    }\n    else if (value === null) {\n        valType = \"null\";\n    }\n    else if (typeof value === \"object\") {\n        valType = \"object\";\n    }\n    else {\n        valType = typeof value;\n    }\n    return valType;\n};\nexports.incrementString = function (str) {\n    var replaced = str.replace(/^(.*?)(\\d+$)/gi, function (all, $1, $2) {\n        return $1 + ++$2;\n    });\n    if (replaced === str)\n        return str + \"_1\";\n    return replaced;\n};\nexports.spreadAllProps = function (destObj, sourceObj) {\n    return __assign({}, destObj, sourceObj);\n};\nexports.spreadSelectProps = function (sourceObj, destObj, keys) {\n    Object.keys(sourceObj).forEach(function (key) {\n        if (keys.indexOf(key) === -1 && sourceObj[key] !== undefined) {\n            destObj[key] = sourceObj[key];\n        }\n    });\n};\nexports.intersection = function (arrA, arrB) {\n    if (arrA === void 0) { arrA = []; }\n    if (arrB === void 0) { arrB = []; }\n    return arrA.filter(function (item) {\n        return arrB.indexOf(item) !== -1;\n    });\n};\nexports.commaSeparatedToArray = function (str) {\n    if (!str)\n        return [];\n    if (Array.isArray(str))\n        return str;\n    return str.replace(/\\s/g, \"\").split(\",\");\n};\nexports.charSeparatedToArray = function (str, pattern) {\n    if (!str)\n        return [];\n    if (Array.isArray(str))\n        return str;\n    return str.split(pattern).map(function (s) { return s.trim(); });\n};\nexports.snakeCase = function (str) {\n    if (str === void 0) { str = \"\"; }\n    return str.replace(/[\\s.\\[\\/\\]-]+/g, \"_\").replace(/([A-Z])/g, function (match) { return \"_\" + match.toLowerCase(); });\n};\nexports.isEmpty = function (obj) {\n    if (Array.isArray(obj)) {\n        return obj.length === 0;\n    }\n    else if (typeof obj === \"object\" && obj !== null) {\n        return Object.keys(obj).length === 0;\n    }\n};\nexports.fetchByLoc = function (obj, loc) {\n    // change \"foo.bar[3]['baz']\" to \"foo.bar.3.'baz'\"\n    loc = loc.replace(/\\[/g, \".[\").replace(/[\\[\\]]/g, \"\");\n    // to [\"foo\", \"bar\", \"3\", \"'baz'\"]\n    var tokens = loc.split(\".\").filter(function (tok) { return tok.length; });\n    var result = obj;\n    while (tokens.length) {\n        // take first token, remove quotes\n        var token = tokens.shift().replace(/[\"']/g, \"\");\n        // attempt to access property\n        try {\n            // if token is number, cast to int\n            if (!isNaN(token)) {\n                result = result[parseInt(token, 10)];\n            }\n            else {\n                // otherwise access property\n                result = result[token];\n            }\n        }\n        catch (ex) {\n            // if property doesn't exist, return undefined\n            return undefined;\n        }\n    }\n    return result;\n};\nexports.cleanupNull = function (obj) {\n    var keys = Object.keys(obj);\n    var tmp = __assign({}, obj);\n    for (var i = 0; i < keys.length; i++) {\n        var key = keys[i];\n        if (obj[key] === undefined || obj[key] === null) {\n            delete tmp[key];\n        }\n    }\n    return tmp;\n};\nexports.nullifyObjValues = function (obj) {\n    var keys = Object.keys(obj);\n    var tmp = __assign({}, obj);\n    for (var i = 0; i < keys.length; i++) {\n        tmp[keys[i]] = null;\n    }\n    return tmp;\n};\nexports.validateID = function (id) {\n    if (!id) {\n        throw new ErrorCode_1.ValidityError(\"ID must be set\", ErrorCode_1.ErrorCode.ID_MISSING);\n    }\n    if (!constants_1.ID_REGEX.test(id)) {\n        throw new ErrorCode_1.ValidityError(\"ID \\\"\" + id + \"\\\" contains invalid characters\", ErrorCode_1.ErrorCode.ID_INVALID_CHAR);\n    }\n};\nexports.incrementLastLoc = function (items, prefix) {\n    if (items === void 0) { items = []; }\n    if (items.length === 0) {\n        return prefix + \"[0]\";\n    }\n    var lastItem = items[items.length - 1];\n    var match = ((lastItem.loc.match(/\\[(\\d+)]$/g) || [\"\"])[0].match(/\\d+/g) || [\"\"])[0];\n    if (!match)\n        return null;\n    match = parseInt(match);\n    return prefix + \"[\" + ++match + \"]\";\n};\n/**\n * Returns true if port is of type or type[]\n * If type is an array, will check if port is single item or array of any of types\n * @param port\n * @param type\n */\nexports.isType = function (port, type) {\n    if (!port.type || !port.type.type) {\n        return false;\n    }\n    if (typeof type === \"string\")\n        type = [type];\n    return type.filter(function (t) { return port.type.type === t || port.type.items === t; }).length > 0;\n};\nexports.checkIfConnectionIsValid = function (pointA, pointB, ltr) {\n    if (ltr === void 0) { ltr = true; }\n    // if both ports belong to the same step, connection is not possible\n    if (pointA.parentStep && pointB.parentStep && pointA.parentStep.id === pointB.parentStep.id) {\n        throw new ErrorCode_1.ValidityError(\"Invalid connection. Source and destination ports belong to the same step\", ErrorCode_1.ErrorCode.CONNECTION_SAME_STEP);\n    }\n    var getType = function (type) {\n        if (typeof type === \"string\") {\n            return type;\n        }\n        if (Array.isArray(type)) {\n            return \"union\";\n        }\n        if (typeof type === \"object\" && type !== null) {\n            return \"object\";\n        }\n    };\n    // fetch type\n    var pointAType = pointA.type.type;\n    var pointBType = pointB.type.type;\n    var pointAItems = getType(pointA.type.items);\n    var pointBItems = getType(pointB.type.items);\n    // match types, defined types can be matched with undefined types\n    if (pointAType === pointBType // match exact type\n        || ((pointAItems === pointBType || pointAItems === \"union\") && !ltr) //match File[] to File\n        || ((pointBItems === pointAType || pointBItems === \"union\") && ltr) // match File to File[]\n        || pointAType === \"null\"\n        || pointBType === \"null\") {\n        // If union[] -> any[] or vice versa\n        if (pointBItems === \"union\" || pointAItems === \"union\") {\n            return true;\n        }\n        // If record[] -> object[] or vice versa\n        if ((pointBItems === \"record\" && pointAItems === \"object\")\n            || (pointAItems === \"record\" && pointBItems === \"object\")) {\n            return true;\n        }\n        // if both are arrays but not of the same type\n        if (pointAItems && pointBItems && pointAItems !== pointBItems) {\n            throw new ErrorCode_1.ValidityError(\"Invalid connection. Connection type mismatch, attempting to connect \\\"\" + pointAItems + \"[]\\\" to \\\"\" + pointBItems + \"[]\\\"\", ErrorCode_1.ErrorCode.CONNECTION_TYPE);\n        }\n        // if type match is file, and fileTypes are defined on both ports,\n        // match only if fileTypes match\n        if ((pointAType === \"File\" || pointAItems === \"File\") && pointB.fileTypes.length && pointA.fileTypes.length) {\n            if (!!exports.intersection(pointB.fileTypes.map(function (type) { return type.toLowerCase(); }), pointA.fileTypes.map(function (type) { return type.toLowerCase(); })).length) {\n                return true;\n            }\n            else {\n                throw new ErrorCode_1.ValidityError(\"Invalid connection. File type mismatch, connecting formats \\\"\" + pointA.fileTypes + \"\\\" to \\\"\" + pointB.fileTypes + \"\\\"\", ErrorCode_1.ErrorCode.CONNECTION_FILE_TYPE);\n            }\n        }\n        // if not file or fileTypes not defined\n        return true;\n    }\n    // if types are both defined and do not match\n    var pointATypeOutput = pointAItems ? \"\\\"\" + pointAItems + \"[]\\\"\" : \"\\\"\" + pointAType + \"\\\"\";\n    var pointBTypeOutput = pointBItems ? \"\\\"\" + pointBItems + \"[]\\\"\" : \"\\\"\" + pointBType + \"\\\"\";\n    throw new ErrorCode_1.ValidityError(\"Invalid connection. Connection type mismatch, attempting to connect \" + pointATypeOutput + \" to \" + pointBTypeOutput, ErrorCode_1.ErrorCode.CONNECTION_TYPE);\n};\nexports.flatten = function (arr) {\n    var _flatten = function (arr, res) {\n        for (var i = 0; i < arr.length; i++) {\n            var a = arr[i];\n            if (Array.isArray(a)) {\n                _flatten(a, res);\n            }\n            else {\n                res.push(a);\n            }\n        }\n    };\n    var res = [];\n    _flatten(arr, res);\n    return res;\n};\nexports.returnNumIfNum = function (s) {\n    return isNaN(s) ? s : parseInt(s);\n};\nexports.isFileType = function (i, required) {\n    var requiredMatches = required === undefined || i.type.isNullable !== required;\n    return i.type && requiredMatches && (i.type.type === \"File\" || i.type.items === \"File\");\n};\nexports.hasFileType = function (port) {\n    if (exports.isFileType(port))\n        return true;\n    if (Array.isArray(port.type.fields)) {\n        for (var i = 0; i < port.type.fields.length; i++) {\n            var field = port.type.fields[i];\n            if (exports.hasFileType(field))\n                return true;\n        }\n    }\n    return false;\n};\n/**\n * Returns the next available ID based on the provided ID which is unique in the given array.\n * @param {string} id\n * @param {Array<{id: string}>} set\n * @returns {string}\n */\nexports.getNextAvailableId = function (id, set) {\n    var hasId = true;\n    var result = id;\n    var len = set.length;\n    while (hasId) {\n        hasId = false;\n        // loop through all inputs and outputs to verify id uniqueness\n        for (var i = 0; i < len; i++) {\n            if (set[i].id === result) {\n                hasId = true;\n                // if id exists, increment and check the uniqueness of the incremented id\n                result = exports.incrementString(result);\n            }\n        }\n    }\n    return result;\n};\nexports.checkIdValidity = function (id, scope) {\n    exports.validateID(id);\n    var next = exports.getNextAvailableId(id, scope);\n    if (next !== id) {\n        throw new ErrorCode_1.ValidityError(\"ID \\\"\" + id + \"\\\" already exists in this tool, the next available id is \\\"\" + next + \"\\\"\", ErrorCode_1.ErrorCode.ID_DUPLICATE);\n    }\n};\nexports.concatIssues = function (base, add, overwrite) {\n    var addKeys = Object.keys(add);\n    for (var i = 0; i < addKeys.length; i++) {\n        var key = addKeys[i];\n        // base[key] is an array and add[key] is an item or an array, can be concatenated\n        if (base[key] && add[key] !== null) {\n            if (overwrite) {\n                base[key] = (Array.isArray(add[key]) ? add[key] : [add[key]]);\n            }\n            else {\n                var toAdd = (Array.isArray(add[key]) ? add[key] : [add[key]]);\n                for (var i_1 = 0; i_1 < toAdd.length; i_1++) {\n                    if (!exports.issueExistsInArray(base[key], toAdd[i_1])) {\n                        base[key].push(toAdd[i_1]);\n                    }\n                }\n            }\n        }\n        else {\n            if (Array.isArray(add[key]) || add[key] === null) {\n                base[key] = add[key];\n            }\n            else {\n                base[key] = [add[key]];\n            }\n        }\n    }\n    return base;\n};\nexports.issueExistsInArray = function (arr, item) {\n    for (var i = 0; i < arr.length; i++) {\n        if (arr[i].code === item.code && arr[i].message === item.message) {\n            return true;\n        }\n    }\n    return false;\n};\nexports.checkPortIdUniqueness = function (ports) {\n    var map = {};\n    var duplicate = [];\n    for (var i = 0; i < ports.length; i++) {\n        var p = ports[i];\n        if (map[p.id]) {\n            duplicate.push(p);\n        }\n        else {\n            map[p.id] = true;\n        }\n    }\n    if (duplicate.length > 0) {\n        for (var i = 0; i < duplicate.length; i++) {\n            var port = duplicate[i];\n            port.setIssue((_a = {},\n                _a[port.loc + \".id\"] = {\n                    type: \"error\",\n                    code: ErrorCode_1.ErrorCode.ID_DUPLICATE,\n                    message: \"Duplicate id found: \\u201C\" + port.id + \"\\u201D\"\n                },\n                _a));\n        }\n    }\n    var _a;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/helpers/utils.js\n// module id = 0\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ErrorCode;\n(function (ErrorCode) {\n    ErrorCode[ErrorCode[\"ALL\"] = 0] = \"ALL\";\n    ErrorCode[ErrorCode[\"ID_ALL\"] = 100] = \"ID_ALL\";\n    ErrorCode[ErrorCode[\"ID_INVALID_CHAR\"] = 101] = \"ID_INVALID_CHAR\";\n    ErrorCode[ErrorCode[\"ID_MISSING\"] = 102] = \"ID_MISSING\";\n    ErrorCode[ErrorCode[\"ID_DUPLICATE\"] = 103] = \"ID_DUPLICATE\";\n    ErrorCode[ErrorCode[\"EXPR_ALL\"] = 200] = \"EXPR_ALL\";\n    ErrorCode[ErrorCode[\"EXPR_SYNTAX\"] = 201] = \"EXPR_SYNTAX\";\n    ErrorCode[ErrorCode[\"EXPR_REFERENCE\"] = 202] = \"EXPR_REFERENCE\";\n    ErrorCode[ErrorCode[\"EXPR_TYPE\"] = 203] = \"EXPR_TYPE\";\n    ErrorCode[ErrorCode[\"EXPR_NOT_JSON\"] = 204] = \"EXPR_NOT_JSON\";\n    ErrorCode[ErrorCode[\"CONNECTION_ALL\"] = 300] = \"CONNECTION_ALL\";\n    ErrorCode[ErrorCode[\"CONNECTION_TYPE\"] = 301] = \"CONNECTION_TYPE\";\n    ErrorCode[ErrorCode[\"CONNECTION_FILE_TYPE\"] = 302] = \"CONNECTION_FILE_TYPE\";\n    ErrorCode[ErrorCode[\"CONNECTION_SAME_STEP\"] = 303] = \"CONNECTION_SAME_STEP\";\n    ErrorCode[ErrorCode[\"OUTPUT_ALL\"] = 400] = \"OUTPUT_ALL\";\n    ErrorCode[ErrorCode[\"OUTPUT_GLOB_MISSING\"] = 401] = \"OUTPUT_GLOB_MISSING\";\n    ErrorCode[ErrorCode[\"OUTPUT_EVAL_EXPR\"] = 402] = \"OUTPUT_EVAL_EXPR\";\n    ErrorCode[ErrorCode[\"OUTPUT_EVAL_INHERIT\"] = 403] = \"OUTPUT_EVAL_INHERIT\";\n    ErrorCode[ErrorCode[\"TYPE_ALL\"] = 500] = \"TYPE_ALL\";\n    ErrorCode[ErrorCode[\"TYPE_FIELDS_MISSING\"] = 501] = \"TYPE_FIELDS_MISSING\";\n    ErrorCode[ErrorCode[\"TYPE_ITEMS_MISSING\"] = 502] = \"TYPE_ITEMS_MISSING\";\n    ErrorCode[ErrorCode[\"TYPE_SYMBOLS_MISSING\"] = 503] = \"TYPE_SYMBOLS_MISSING\";\n    ErrorCode[ErrorCode[\"TYPE_NAME_MISSING\"] = 504] = \"TYPE_NAME_MISSING\";\n    ErrorCode[ErrorCode[\"TYPE_EXTRA_PROPS\"] = 505] = \"TYPE_EXTRA_PROPS\";\n    ErrorCode[ErrorCode[\"TYPE_UNSUPPORTED\"] = 506] = \"TYPE_UNSUPPORTED\";\n    ErrorCode[ErrorCode[\"TYPE_FIELD_DUPLICATE_ID\"] = 507] = \"TYPE_FIELD_DUPLICATE_ID\";\n})(ErrorCode = exports.ErrorCode || (exports.ErrorCode = {}));\nvar ValidityError = /** @class */ (function (_super) {\n    __extends(ValidityError, _super);\n    function ValidityError(str, code) {\n        var _this = _super.call(this, str) || this;\n        _this.code = code;\n        return _this;\n    }\n    return ValidityError;\n}(Error));\nexports.ValidityError = ValidityError;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/helpers/validation/ErrorCode.js\n// module id = 1\n// module chunks = 0","\"use strict\";\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar UnimplementedMethodException_1 = require(\"../UnimplementedMethodException\");\nvar utils_1 = require(\"../utils\");\nvar ErrorCode_1 = require(\"./ErrorCode\");\nvar ValidationBase = /** @class */ (function () {\n    function ValidationBase(loc) {\n        this.issues = {};\n        this._errors = [];\n        this._warnings = [];\n        this.hasNewErrors = false;\n        this.hasNewWarnings = false;\n        this.modelListeners = [];\n        this.loc = \"\";\n        this.updateParentValidation = function (event) {\n        };\n        this.loc = loc || \"\";\n        this.issues[this.loc] = [];\n    }\n    ValidationBase.prototype.clearListeners = function () {\n        this.modelListeners.forEach(function (l) { return l(); });\n    };\n    ;\n    Object.defineProperty(ValidationBase.prototype, \"warnings\", {\n        get: function () {\n            if (this.hasNewWarnings) {\n                this._warnings = this.filterIssues(\"warning\");\n                this.hasNewWarnings = false;\n            }\n            return this._warnings;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ValidationBase.prototype, \"errors\", {\n        get: function () {\n            if (this.hasNewErrors) {\n                this._errors = this.filterIssues(\"error\");\n                this.hasNewErrors = false;\n            }\n            return this._errors;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ValidationBase.prototype.updateValidity = function (event) {\n        // sets these issues with the event received\n        this.issues = utils_1.concatIssues(this.issues, event.data, event.overwrite);\n        this.hasNewErrors = true;\n        this.hasNewWarnings = true;\n        // sometimes we want to contain warnings/info to the objects where they occur\n        if (!event.stopPropagation) {\n            this.updateParentValidation(event);\n        }\n    };\n    ValidationBase.prototype.setIssue = function (data, stopPropagation) {\n        if (stopPropagation === void 0) { stopPropagation = false; }\n        this.updateValidity({ data: data, overwrite: false, stopPropagation: stopPropagation });\n    };\n    ValidationBase.prototype.clearIssue = function (code) {\n        var hadIssue = false;\n        var isGroup = code % 100 === 0;\n        var group = code / 100;\n        for (var key in this.issues) {\n            if (this.issues[key].length) {\n                if (code === ErrorCode_1.ErrorCode.ALL) {\n                    hadIssue = true;\n                    this.issues[key] = [];\n                }\n                else {\n                    var initLen = this.issues[key].length;\n                    this.issues[key] = this.issues[key].filter(function (i) {\n                        if (isGroup) {\n                            return Math.floor(i.code / 100) !== group;\n                        }\n                        return i.code !== code;\n                    });\n                    hadIssue = initLen !== this.issues[key].length || hadIssue;\n                }\n            }\n        }\n        if (hadIssue) {\n            this.updateValidity({\n                data: this.issues,\n                overwrite: true\n            });\n        }\n    };\n    /**\n     * @deprecated\n     */\n    ValidationBase.prototype.cleanValidity = function () {\n    };\n    /**\n     * Updates location and propagates validity up the tree\n     * @param newLoc\n     */\n    ValidationBase.prototype.updateLoc = function (newLoc) {\n        var oldLoc = this.loc;\n        this.issues[newLoc] = this.issues[oldLoc];\n        delete this.issues[oldLoc];\n        this.loc = newLoc;\n        // @todo this doesn't change the location of all nested children!\n        this.updateValidity({\n            data: this.issues,\n            overwrite: true\n        });\n    };\n    ValidationBase.prototype.setValidationCallback = function (fn) {\n        this.updateParentValidation = fn;\n    };\n    /**\n     * @param {\"warning\" | \"error\" | \"info\"} type\n     * @returns {Array}\n     */\n    ValidationBase.prototype.filterIssues = function (type) {\n        if (type === void 0) { type = \"error\"; }\n        var res = [];\n        var _loop_1 = function (key) {\n            if (this_1.issues[key].length) {\n                var filter = this_1.issues[key].filter(function (i) { return i.type === type; });\n                var map = filter.map(function (i) { return (__assign({}, i, { loc: key })); });\n                res = res.concat(map);\n            }\n        };\n        var this_1 = this;\n        for (var key in this.issues) {\n            _loop_1(key);\n        }\n        return res;\n    };\n    /**\n     * @deprecated\n     * @param args\n     * @returns {Promise<any>}\n     */\n    ValidationBase.prototype.validate = function () {\n        var _this = this;\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        new UnimplementedMethodException_1.UnimplementedMethodException(\"validate\");\n        return new Promise(function (res) {\n            res(_this.issues);\n        });\n    };\n    return ValidationBase;\n}());\nexports.ValidationBase = ValidationBase;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/helpers/validation/ValidationBase.js\n// module id = 2\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar UnimplementedMethodException = /** @class */ (function () {\n    function UnimplementedMethodException(method, parent) {\n        //Temporarily disabling this log so it doesn't pollute actual debugging\n        // const prefix = `${parent || \"\"}${parent ? \".\" : \"\"}`;\n        // console.warn(`Expected child class to implement ${prefix}${method}.`);\n    }\n    return UnimplementedMethodException;\n}());\nexports.UnimplementedMethodException = UnimplementedMethodException;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/helpers/UnimplementedMethodException.js\n// module id = 3\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar TypeResolver_1 = require(\"../helpers/TypeResolver\");\nvar ValidationBase_1 = require(\"../helpers/validation/ValidationBase\");\nvar utils_1 = require(\"../helpers/utils\");\nvar ErrorCode_1 = require(\"../helpers/validation/ErrorCode\");\nvar ParameterTypeModel = /** @class */ (function (_super) {\n    __extends(ParameterTypeModel, _super);\n    function ParameterTypeModel(type, fieldConstructor, nameBase, loc, eventHub) {\n        var _this = _super.call(this, loc) || this;\n        _this.customProps = {};\n        _this.hasDirectoryType = false;\n        _this._items = null;\n        _this.isNullable = false;\n        _this.isItemOrArray = false;\n        _this.typeBinding = null;\n        _this.fields = null;\n        _this._symbols = null;\n        _this.name = null;\n        _this.unionType = null;\n        _this.nameBase = \"field\";\n        _this.fieldConstructor = fieldConstructor;\n        _this.eventHub = eventHub;\n        _this.nameBase = nameBase;\n        _this.deserialize(type);\n        return _this;\n    }\n    Object.defineProperty(ParameterTypeModel.prototype, \"symbols\", {\n        get: function () {\n            return this._symbols;\n        },\n        set: function (value) {\n            this._symbols = value;\n            if (this.eventHub) {\n                this.eventHub.emit(\"io.change.type\", this.loc);\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ParameterTypeModel.prototype, \"items\", {\n        get: function () {\n            return this._items;\n        },\n        set: function (t) {\n            if (t && this._type !== \"array\") {\n                throw (\"ParameterTypeModel: Items can only be set to inputs type Array\");\n            }\n            else if (t !== undefined && this._items !== t) {\n                switch (t) {\n                    case \"enum\":\n                        this._symbols = [];\n                        this.removeAllFields();\n                        break;\n                    case \"record\":\n                        this.fields = [];\n                        this._symbols = null;\n                        break;\n                    default:\n                        this._symbols = null;\n                        this.removeAllFields();\n                }\n                this._items = t;\n                if (this.eventHub) {\n                    this.eventHub.emit(\"io.change.type\", this.loc);\n                }\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ParameterTypeModel.prototype, \"type\", {\n        get: function () {\n            return this._type;\n        },\n        set: function (t) {\n            if (t !== undefined && this._type === t) {\n                return;\n            }\n            this._type = t;\n            switch (t) {\n                case \"array\":\n                    this._symbols = null;\n                    this.removeAllFields();\n                    break;\n                case \"enum\":\n                    this._items = null;\n                    this.removeAllFields();\n                    this._symbols = this._symbols || [];\n                    break;\n                case \"record\":\n                    this._items = null;\n                    this._symbols = null;\n                    this.fields = this.fields || [];\n                    break;\n                default:\n                    this._items = null;\n                    this._symbols = null;\n                    this.removeAllFields();\n            }\n            if (this.eventHub) {\n                this.eventHub.emit(\"io.change.type\", this.loc);\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ParameterTypeModel.prototype.validate = function (context) {\n        var _this = this;\n        if (context === void 0) { context = {}; }\n        this.clearIssue(ErrorCode_1.ErrorCode.TYPE_ALL);\n        var promises = [];\n        // check type\n        // if array, has items. Does not have symbols or items\n        if (this.type === \"array\") {\n            if (this.items === null) {\n                this.setIssue((_a = {},\n                    _a[this.loc] = {\n                        type: \"error\",\n                        message: \"Type array must have items\",\n                        code: ErrorCode_1.ErrorCode.TYPE_ITEMS_MISSING\n                    },\n                    _a));\n            }\n            if (this._symbols && this.items !== \"enum\") {\n                this.setIssue((_b = {},\n                    _b[this.loc + \".symbols\"] = {\n                        type: \"error\",\n                        message: \"Type array must not have symbols\",\n                        code: ErrorCode_1.ErrorCode.TYPE_SYMBOLS_MISSING\n                    },\n                    _b));\n            }\n            if (this.fields && this.items !== \"record\") {\n                this.setIssue((_c = {},\n                    _c[this.loc + \".fields\"] = {\n                        type: \"error\",\n                        message: \"Type array must not have fields\",\n                        code: ErrorCode_1.ErrorCode.TYPE_FIELDS_MISSING\n                    },\n                    _c));\n            }\n        }\n        // if enum, has symbols. Does not have items or fields. Has name.\n        if (this.type === \"enum\") {\n            if (this.items) {\n                this.setIssue((_d = {},\n                    _d[this.loc + \".items\"] = {\n                        type: \"error\",\n                        message: \"Type enum must not have items\",\n                        code: ErrorCode_1.ErrorCode.TYPE_EXTRA_PROPS\n                    },\n                    _d));\n            }\n            if (!this._symbols) {\n                this.setIssue((_e = {},\n                    _e[this.loc] = {\n                        type: \"error\",\n                        message: \"Type enum must have symbols\",\n                        code: ErrorCode_1.ErrorCode.TYPE_EXTRA_PROPS\n                    },\n                    _e));\n            }\n            if (this.fields) {\n                this.setIssue((_f = {},\n                    _f[this.loc + \".fields\"] = {\n                        type: \"error\",\n                        message: \"Type enum must not have fields\",\n                        code: ErrorCode_1.ErrorCode.TYPE_EXTRA_PROPS\n                    },\n                    _f));\n            }\n            if (!this.name) {\n                this.setIssue((_g = {},\n                    _g[\"\" + this.loc] = {\n                        type: \"error\",\n                        message: \"Type enum must have a name\",\n                        code: ErrorCode_1.ErrorCode.TYPE_EXTRA_PROPS\n                    },\n                    _g));\n            }\n        }\n        // if record, has fields. Does not have items or symbols. Has name.\n        if (this.type === \"record\") {\n            if (this.items) {\n                this.setIssue((_h = {},\n                    _h[this.loc + \".items\"] = {\n                        type: \"error\",\n                        message: \"Type record must not have items\",\n                        code: ErrorCode_1.ErrorCode.TYPE_EXTRA_PROPS\n                    },\n                    _h));\n            }\n            if (this._symbols) {\n                this.setIssue((_j = {},\n                    _j[this.loc + \".symbols\"] = {\n                        type: \"error\",\n                        message: \"Type record must not have symbols\",\n                        code: ErrorCode_1.ErrorCode.TYPE_EXTRA_PROPS\n                    },\n                    _j));\n            }\n            if (!this.fields) {\n                this.setIssue((_k = {},\n                    _k[\"\" + this.loc] = {\n                        type: \"error\",\n                        message: \"Type record must have fields\",\n                        code: ErrorCode_1.ErrorCode.TYPE_EXTRA_PROPS\n                    },\n                    _k));\n            }\n            else {\n                // promises.concat(this.fields.map(field => field.validate(context)));\n            }\n            if (!this.name) {\n                this.setIssue((_l = {},\n                    _l[this.loc + \".type\"] = {\n                        type: \"error\",\n                        message: \"Type record must have a name\",\n                        code: ErrorCode_1.ErrorCode.TYPE_NAME_MISSING\n                    },\n                    _l));\n            }\n        }\n        if (this.unionType) {\n            this.setIssue((_m = {},\n                _m[this.loc] = {\n                    type: \"info\",\n                    message: \"Union type is not supported yet: \" + this.unionType,\n                    code: ErrorCode_1.ErrorCode.TYPE_UNSUPPORTED\n                },\n                _m));\n        }\n        return Promise.all(promises).then(function (res) {\n            return _this.issues;\n        });\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m;\n    };\n    ParameterTypeModel.prototype.serialize = function (version) {\n        var type = TypeResolver_1.TypeResolver.serializeType(this, version);\n        if (typeof type === \"object\" && !Array.isArray(type) && version !== \"v1.0\" && type !== null) {\n            type = __assign({}, type, this.customProps);\n        }\n        return type;\n    };\n    ParameterTypeModel.prototype.deserialize = function (attr) {\n        var _this = this;\n        var serializedKeys = [\"type\", \"name\", \"_symbols\", \"fields\", \"items\", \"inputBinding\", \"outputBinding\"];\n        try {\n            TypeResolver_1.TypeResolver.resolveType(attr, this);\n        }\n        catch (ex) {\n            this.setIssue((_a = {},\n                _a[this.loc] = {\n                    message: ex.message,\n                    type: \"error\",\n                    code: ex.code\n                },\n                _a));\n        }\n        // populates object with all custom attributes not covered in model\n        if (typeof attr === \"object\" && attr !== null && !Array.isArray(attr)) {\n            utils_1.spreadSelectProps(attr, this.customProps, serializedKeys);\n        }\n        if (this.fields) {\n            this.fields = utils_1.ensureArray(this.fields, \"name\", \"type\").map(function (field, index) {\n                var f = new _this.fieldConstructor(field, _this.loc + \".fields[\" + index + \"]\", _this.eventHub);\n                f.isField = true;\n                f.setValidationCallback(function (err) { return _this.updateValidity(err); });\n                return f;\n            });\n        }\n        var _a;\n    };\n    ParameterTypeModel.prototype.updateLoc = function (loc) {\n        var _this = this;\n        _super.prototype.updateLoc.call(this, loc);\n        if (this.fields && this.fields.length) {\n            this.fields.forEach(function (f, i) { return f.updateLoc(_this.loc + \".fields[\" + i + \"]\"); });\n        }\n    };\n    ParameterTypeModel.prototype.setType = function (t) {\n        this._type = t;\n        switch (t) {\n            case \"array\":\n                this._symbols = null;\n                this.removeAllFields();\n                break;\n            case \"enum\":\n                this._items = null;\n                this.removeAllFields();\n                break;\n            case \"record\":\n                this._items = null;\n                this._symbols = null;\n                break;\n        }\n        if (this.eventHub) {\n            this.eventHub.emit(\"io.change.type\", this.loc);\n        }\n    };\n    ParameterTypeModel.prototype.getNextAvailableName = function (id) {\n        var hasId = true;\n        var result = id;\n        var set = this.fields;\n        var len = set.length;\n        while (hasId) {\n            hasId = false;\n            // loop through all inputs and outputs to verify id uniqueness\n            for (var i = 0; i < len; i++) {\n                if (set[i].id === result) {\n                    hasId = true;\n                    // if id exists, increment and check the uniqueness of the incremented id\n                    result = utils_1.incrementString(result);\n                }\n            }\n        }\n        return result;\n    };\n    ParameterTypeModel.prototype.addField = function (field) {\n        var _this = this;\n        if (field === void 0) { field = {}; }\n        if (this.type !== \"record\" && this.items !== \"record\") {\n            throw new Error(\"Fields can only be added to type or items record: type is \" + this.type + \", items is \" + this.items + \".\");\n        }\n        else {\n            if (field.id) {\n                var duplicate = this.fields.filter(function (val) {\n                    return val.id === field.name\n                        || val.id === field.id;\n                });\n                if (duplicate.length > 0) {\n                    this.setIssue((_a = {},\n                        _a[this.loc] = {\n                            message: \"Field with name \\\"\" + duplicate[0].id + \"\\\" already exists\",\n                            type: \"error\",\n                            code: ErrorCode_1.ErrorCode.TYPE_FIELD_DUPLICATE_ID\n                        },\n                        _a));\n                }\n            }\n            if (field instanceof this.fieldConstructor) {\n                field.loc = this.loc + \".fields[\" + this.fields.length + \"]\";\n                field.setValidationCallback(function (err) { return _this.updateValidity(err); });\n                if (this.eventHub) {\n                    this.eventHub.emit(\"field.create\", field);\n                }\n                this.fields.push(field);\n                return field;\n            }\n            else {\n                field.name = field.name || this.getNextAvailableName(this.nameBase);\n                var loc = utils_1.incrementLastLoc(this.fields, this.loc + \".fields\");\n                var f = new this.fieldConstructor(field, loc, this.eventHub);\n                f.setValidationCallback(function (err) { return _this.updateValidity(err); });\n                if (this.eventHub) {\n                    this.eventHub.emit(\"field.create\", f);\n                }\n                this.fields.push(f);\n                return f;\n            }\n        }\n        var _a;\n    };\n    ParameterTypeModel.prototype.removeField = function (field) {\n        var found;\n        if (typeof field === \"string\") {\n            found = this.fields.filter(function (val) { return val.id === field; })[0];\n        }\n        else {\n            found = field;\n        }\n        found.clearIssue(ErrorCode_1.ErrorCode.ALL);\n        var index = this.fields.indexOf(found);\n        if (index < 0) {\n            throw (\"Field \" + field + \" does not exist on input\");\n        }\n        this.fields.splice(index, 1);\n        for (var i = index; i < this.fields.length; i++) {\n            this.fields[i].updateLoc(this.loc + \".fields[\" + i + \"]\");\n        }\n        if (this.eventHub) {\n            this.eventHub.emit(\"field.remove\", found);\n        }\n    };\n    ParameterTypeModel.prototype.removeAllFields = function () {\n        if (this.fields && this.fields.length) {\n            this.fields.forEach(function (f) {\n                f.clearIssue(ErrorCode_1.ErrorCode.ALL);\n            });\n        }\n        this.fields = null;\n    };\n    return ParameterTypeModel;\n}(ValidationBase_1.ValidationBase));\nexports.ParameterTypeModel = ParameterTypeModel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/generic/ParameterTypeModel.js\n// module id = 4\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ExpressionModel_1 = require(\"../generic/ExpressionModel\");\nvar ExpressionEvaluator_1 = require(\"../helpers/ExpressionEvaluator\");\nvar V1ExpressionModel = /** @class */ (function (_super) {\n    __extends(V1ExpressionModel, _super);\n    function V1ExpressionModel(expression, loc, eventHub) {\n        var _this = _super.call(this, loc, eventHub) || this;\n        _this.value = \"\";\n        _this.tokens = [];\n        if (expression instanceof V1ExpressionModel) {\n            expression = expression.serialize();\n        }\n        if (expression)\n            _this.deserialize(expression);\n        if (_this.eventHub) {\n            _this.eventHub.emit(\"expression.create\", _this);\n        }\n        return _this;\n    }\n    V1ExpressionModel.prototype.serialize = function () {\n        if (this.type === \"expression\" && this.eventHub) {\n            this.eventHub.emit(\"expression.serialize\", true);\n        }\n        return this.value !== \"\" ? this.value : undefined;\n    };\n    V1ExpressionModel.prototype.deserialize = function (attr) {\n        if (typeof attr === \"string\") {\n            this.value = attr;\n            this.tokenizeAndSetType(attr);\n        }\n    };\n    V1ExpressionModel.prototype.tokenizeAndSetType = function (str) {\n        // parse expression\n        this.tokens = ExpressionEvaluator_1.ExpressionEvaluator.grabExpressions(str || \"\") || [];\n        // if expression is literal, type is string, otherwise it's complex (expression or function)\n        this.type = this.tokens.length === 1 && this.tokens[0].type === \"literal\" || this.tokens.length === 0 ? \"string\" : \"expression\";\n        return this.tokens;\n    };\n    V1ExpressionModel.prototype.evaluate = function (context) {\n        if (context === void 0) { context = this.cachedContext; }\n        if (this.value !== undefined) {\n            return this._evaluate(this.value, context, \"v1.0\");\n        }\n        return new Promise(function (res) {\n            res(undefined);\n        });\n    };\n    V1ExpressionModel.prototype.setValue = function (val, type) {\n        this.result = undefined;\n        this.tokenizeAndSetType(val);\n        this.value = val;\n        if (this.eventHub) {\n            this.eventHub.emit(\"expression.change\", this);\n        }\n    };\n    V1ExpressionModel.prototype.getScript = function () {\n        return this.value;\n    };\n    V1ExpressionModel.prototype.toString = function () {\n        return this.value || \"\";\n    };\n    V1ExpressionModel.prototype.clone = function () {\n        return new V1ExpressionModel(this.serialize(), this.loc, this.eventHub);\n    };\n    V1ExpressionModel.prototype.cloneStatus = function (clone) {\n        this.setValue(clone.serialize());\n        this.setIssue(__assign({}, clone.issues));\n    };\n    return V1ExpressionModel;\n}(ExpressionModel_1.ExpressionModel));\nexports.V1ExpressionModel = V1ExpressionModel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/v1.0/V1ExpressionModel.js\n// module id = 5\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.STEP_INPUT_CONNECTION_PREFIX = \"in/\";\nexports.STEP_OUTPUT_CONNECTION_PREFIX = \"out/\";\nexports.ID_REGEX = /^[a-zA-Z0-9_;/?\\-:@&=+$,.#!~*'()\\[\\]]*$/;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/helpers/constants.js\n// module id = 6\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ExpressionModel_1 = require(\"../generic/ExpressionModel\");\nvar SBDraft2ExpressionModel = /** @class */ (function (_super) {\n    __extends(SBDraft2ExpressionModel, _super);\n    function SBDraft2ExpressionModel(value, loc, eventHub) {\n        var _this = _super.call(this, loc, eventHub) || this;\n        // guard against passing something that is already wrapped\n        if (value instanceof SBDraft2ExpressionModel) {\n            value = value.serialize();\n        }\n        _this.deserialize(value);\n        if (value) {\n            _this.type = value.script ? \"expression\" : \"string\";\n        }\n        if (_this.eventHub) {\n            _this.eventHub.emit(\"expression.create\", _this);\n        }\n        return _this;\n    }\n    /**\n     * Evaluates expression and sets its result to result property.\n     *\n     * If expression throws a SyntaxError, no result is returned and the syntax error is pushed to\n     * validation.errors. If expression throws any other exception, it is pushed to validation.warnings\n     *\n     * @param context\n     * @returns {any}\n     */\n    SBDraft2ExpressionModel.prototype.evaluate = function (context) {\n        if (context === void 0) { context = this.cachedContext; }\n        if (this.value !== undefined) {\n            return this._evaluate(this.value, context, \"draft-2\");\n        }\n        return new Promise(function (res) { res(undefined); });\n    };\n    /**\n     * Returns CWL representation.\n     */\n    SBDraft2ExpressionModel.prototype.serialize = function () {\n        if (this.type === \"expression\" && this.eventHub) {\n            this.eventHub.emit(\"expression.serialize\", true);\n        }\n        if (this.value && this.value.hasOwnProperty(\"script\") && this.value.script === \"\") {\n            return undefined;\n        }\n        else if (this.value === \"\" || this.value === null) {\n            return undefined;\n        }\n        return this.value;\n    };\n    /**\n     * Sets CWL representation as internal value\n     */\n    SBDraft2ExpressionModel.prototype.deserialize = function (val) {\n        if (val === void 0) { val = \"\"; }\n        this.value = val;\n    };\n    /**\n     * Sets value of expression.script or primitive based on type parameter.\n     */\n    SBDraft2ExpressionModel.prototype.setValue = function (val, type) {\n        this.result = undefined;\n        if (type === \"expression\" && typeof val === \"string\") {\n            this.value = {\n                \"class\": \"Expression\",\n                engine: \"#cwl-js-engine\",\n                script: val.trim() === \"\" ? \"\" : val\n            };\n        }\n        else {\n            this.value = val;\n        }\n        this.type = type;\n        if (this.eventHub) {\n            this.eventHub.emit(\"expression.change\", this);\n        }\n    };\n    /**\n     * Returns string representation of expression.script or primitive value.\n     * @returns {string}\n     */\n    SBDraft2ExpressionModel.prototype.toString = function () {\n        if (this.type === \"expression\") {\n            return this.value.script;\n        }\n        else if (this.value === null || this.value === undefined) {\n            return \"\";\n        }\n        else {\n            return this.value.toString();\n        }\n    };\n    /**\n     * Returns script value of expression.script, or undefined if not set.\n     * @returns {string}\n     */\n    SBDraft2ExpressionModel.prototype.getScript = function () {\n        return this.value !== undefined && this.value !== null ?\n            this.value.script :\n            undefined;\n    };\n    SBDraft2ExpressionModel.prototype.clone = function () {\n        return new SBDraft2ExpressionModel(this.serialize(), this.loc, this.eventHub);\n    };\n    SBDraft2ExpressionModel.prototype.cloneStatus = function (clone) {\n        this.setValue(clone.serialize(), clone.type);\n        this.setIssue(__assign({}, clone.issues));\n    };\n    return SBDraft2ExpressionModel;\n}(ExpressionModel_1.ExpressionModel));\nexports.SBDraft2ExpressionModel = SBDraft2ExpressionModel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/d2sb/SBDraft2ExpressionModel.js\n// module id = 7\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar PluginBase = /** @class */ (function () {\n    function PluginBase() {\n    }\n    PluginBase.prototype.registerWorkflow = function (workflow) {\n        this.workflow = workflow;\n    };\n    PluginBase.prototype.registerOnBeforeChange = function (fn) {\n        this.onBeforeChange = fn;\n    };\n    PluginBase.prototype.registerOnAfterChange = function (fn) {\n        this.onAfterChange = fn;\n    };\n    PluginBase.prototype.registerOnAfterRender = function (fn) {\n        this.onAfterRender = fn;\n    };\n    return PluginBase;\n}());\nexports.PluginBase = PluginBase;\n//# sourceMappingURL=plugin-base.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwl-svg/compiled/src/plugins/plugin-base.js\n// module id = 8\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ValidationBase_1 = require(\"../helpers/validation/ValidationBase\");\nvar ExpressionEvaluator_1 = require(\"../helpers/ExpressionEvaluator\");\nvar ErrorCode_1 = require(\"../helpers/validation/ErrorCode\");\nvar ExpressionModel = /** @class */ (function (_super) {\n    __extends(ExpressionModel, _super);\n    function ExpressionModel(loc, eventHub) {\n        var _this = _super.call(this, loc) || this;\n        _this.eventHub = eventHub;\n        _this.customProps = {};\n        _this.cachedContext = {};\n        /** Internal type */\n        _this._type = \"string\";\n        return _this;\n    }\n    Object.defineProperty(ExpressionModel.prototype, \"type\", {\n        /** Getter for model type. Returns internal representation */\n        get: function () {\n            return this._type;\n        },\n        /** Setter for model type. Model holds either expression or primitive like \"string\" */\n        set: function (type) {\n            if (type !== \"string\" && type !== \"expression\" && type !== \"number\") {\n                throw new TypeError(\"Unknown ExpressionModel type. \\\"\" + type + \"\\\" does not exist or is not supported yet.\");\n            }\n            this._type = type;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ExpressionModel.prototype, \"isExpression\", {\n        /** Flag if model contains expression */\n        get: function () {\n            return this.type === \"expression\";\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ;\n    ExpressionModel.prototype.validate = function (context) {\n        var _this = this;\n        return this.evaluate(context).then(function (suc) {\n            _this.clearIssue(ErrorCode_1.ErrorCode.EXPR_ALL);\n        }, function (err) {\n            _this.clearIssue(ErrorCode_1.ErrorCode.EXPR_ALL);\n            _this.setIssue((_a = {},\n                _a[_this.loc] = {\n                    type: err.type,\n                    message: err.message,\n                    code: err.code\n                },\n                _a));\n            var _a;\n        });\n    };\n    ExpressionModel.prototype._evaluate = function (value, context, version) {\n        var _this = this;\n        return new Promise(function (res, rej) {\n            ExpressionEvaluator_1.ExpressionEvaluator.evaluate(value, context, version).then(function (suc) {\n                _this.result = suc;\n                res(suc);\n            }, function (ex) {\n                var message = ex.message;\n                var code = ErrorCode_1.ErrorCode.EXPR_SYNTAX;\n                if (ex.message.startsWith(\"Uncaught DataCloneError\")) {\n                    message = \"Error: Return value should have transferable data (fully JSON-serializable)\";\n                    code = ErrorCode_1.ErrorCode.EXPR_NOT_JSON;\n                }\n                var err = { loc: _this.loc, message: message, code: code };\n                if (ex.message.startsWith(\"Uncaught SyntaxError\") || ex.name === \"SyntaxError\") {\n                    rej(Object.assign({ type: \"error\" }, err));\n                }\n                else {\n                    if (ex.message.startsWith(\"Uncaught ReferenceError\") || ex.name === \"ReferenceError\") {\n                        code = ErrorCode_1.ErrorCode.EXPR_REFERENCE;\n                    }\n                    else if (ex.message.startsWith(\"Uncaught TypeError\") || ex.name === \"TypeError\") {\n                        code = ErrorCode_1.ErrorCode.EXPR_TYPE;\n                    }\n                    rej(Object.assign({ type: \"warning\", code: code }, err));\n                }\n            });\n        });\n    };\n    return ExpressionModel;\n}(ValidationBase_1.ValidationBase));\nexports.ExpressionModel = ExpressionModel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/generic/ExpressionModel.js\n// module id = 9\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ValidationBase_1 = require(\"../helpers/validation/ValidationBase\");\nvar UnimplementedMethodException_1 = require(\"../helpers/UnimplementedMethodException\");\nvar utils_1 = require(\"../helpers/utils\");\nvar ErrorCode_1 = require(\"../helpers/validation/ErrorCode\");\nvar CommandInputParameterModel = /** @class */ (function (_super) {\n    __extends(CommandInputParameterModel, _super);\n    function CommandInputParameterModel(loc, event) {\n        var _this = _super.call(this, loc) || this;\n        /** Flag if input is field of a parent record. Derived from type field */\n        _this.isField = false;\n        _this.customProps = {};\n        _this.eventHub = event;\n        return _this;\n    }\n    Object.defineProperty(CommandInputParameterModel.prototype, \"isBound\", {\n        get: function () {\n            return this.inputBinding !== undefined && this.inputBinding !== null;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CommandInputParameterModel.prototype.removeInputBinding = function () {\n        if (this.inputBinding) {\n            this.inputBinding.clearIssue(ErrorCode_1.ErrorCode.EXPR_ALL);\n        }\n        if (!this.hasSecondaryFilesInRoot) {\n            this.secondaryFiles.forEach(function (f) { return f.clearIssue(ErrorCode_1.ErrorCode.EXPR_ALL); });\n            this.secondaryFiles = [];\n        }\n        this.inputBinding = null;\n    };\n    CommandInputParameterModel.prototype.updateLoc = function (loc) {\n        // must update location of self first\n        _super.prototype.updateLoc.call(this, loc);\n        // update location of type, so that in case the input is a field,\n        // newly created fields will have correct loc\n        this.type.updateLoc(loc + \".type\");\n    };\n    CommandInputParameterModel.prototype._addSecondaryFile = function (file, exprConstructor, locBase) {\n        var _this = this;\n        var loc = utils_1.incrementLastLoc(this.secondaryFiles, locBase + \".secondaryFiles\");\n        var f = new exprConstructor(file, loc, this.eventHub);\n        this.secondaryFiles.push(f);\n        f.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        return f;\n    };\n    CommandInputParameterModel.prototype._updateSecondaryFiles = function (files) {\n        var _this = this;\n        this.secondaryFiles.forEach(function (f) { return f.clearIssue(ErrorCode_1.ErrorCode.EXPR_ALL); });\n        this.secondaryFiles = [];\n        files.forEach(function (f) { return _this.addSecondaryFile(f); });\n    };\n    CommandInputParameterModel.prototype._removeSecondaryFile = function (index) {\n        var file = this.secondaryFiles[index];\n        if (file) {\n            file.setValue(\"\", \"string\");\n            this.secondaryFiles.splice(index, 1);\n        }\n    };\n    CommandInputParameterModel.prototype.validate = function (context) {\n        var promises = [];\n        // id\n        try {\n            utils_1.validateID(this.id);\n        }\n        catch (ex) {\n            this.setIssue((_a = {},\n                _a[this.loc + \".id\"] = {\n                    type: \"error\",\n                    message: ex.message,\n                    code: ex.code\n                },\n                _a));\n        }\n        // inputBinding\n        if (this.inputBinding) {\n            promises.push(this.inputBinding.validate(context));\n        }\n        // type\n        if (this.type) {\n            promises.push(this.type.validate(context));\n        }\n        // secondaryFiles\n        if (this.secondaryFiles) {\n            promises.concat(this.secondaryFiles.map(function (file) { return file.validate(context); }));\n        }\n        return Promise.all(promises);\n        var _a;\n    };\n    CommandInputParameterModel.prototype.serialize = function () {\n        new UnimplementedMethodException_1.UnimplementedMethodException(\"serialize\", \"CommandInputParameterModel\");\n        return undefined;\n    };\n    CommandInputParameterModel.prototype.deserialize = function (attr) {\n        new UnimplementedMethodException_1.UnimplementedMethodException(\"deserialize\", \"CommandInputParameterModel\");\n    };\n    CommandInputParameterModel.prototype.attachFileTypeListeners = function () {\n        var _this = this;\n        if (this.eventHub) {\n            this.modelListeners.push(this.eventHub.on(\"io.change.type\", function (loc) {\n                if (_this.loc + \".type\" === loc) {\n                    if (!utils_1.isFileType(_this)) {\n                        _this.updateSecondaryFiles([]);\n                    }\n                }\n            }));\n        }\n    };\n    return CommandInputParameterModel;\n}(ValidationBase_1.ValidationBase));\nexports.CommandInputParameterModel = CommandInputParameterModel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/generic/CommandInputParameterModel.js\n// module id = 10\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar constants_1 = require(\"../helpers/constants\");\nvar EventHub_1 = require(\"../helpers/EventHub\");\nvar Graph_1 = require(\"../helpers/Graph\");\nvar UnimplementedMethodException_1 = require(\"../helpers/UnimplementedMethodException\");\nvar utils_1 = require(\"../helpers/utils\");\nvar ValidationBase_1 = require(\"../helpers/validation/ValidationBase\");\nvar V1WorkflowOutputParameterModel_1 = require(\"../v1.0/V1WorkflowOutputParameterModel\");\nvar RequirementBaseModel_1 = require(\"./RequirementBaseModel\");\nvar StepModel_1 = require(\"./StepModel\");\nvar WorkflowInputParameterModel_1 = require(\"./WorkflowInputParameterModel\");\nvar WorkflowOutputParameterModel_1 = require(\"./WorkflowOutputParameterModel\");\nvar WorkflowStepInputModel_1 = require(\"./WorkflowStepInputModel\");\nvar WorkflowStepOutputModel_1 = require(\"./WorkflowStepOutputModel\");\nvar ErrorCode_1 = require(\"../helpers/validation/ErrorCode\");\nvar WorkflowModel = /** @class */ (function (_super) {\n    __extends(WorkflowModel, _super);\n    function WorkflowModel(loc) {\n        var _this = _super.call(this, loc) || this;\n        _this[\"class\"] = \"Workflow\";\n        _this.hasBatch = false;\n        _this.steps = [];\n        _this.inputs = [];\n        _this.outputs = [];\n        _this.hints = [];\n        _this.customProps = {};\n        _this.eventHub = new EventHub_1.EventHub([\n            \"step.create\",\n            \"step.remove\",\n            \"step.change\",\n            \"step.update\",\n            \"step.change.id\",\n            \"step.inPort.show\",\n            \"step.inPort.hide\",\n            \"step.inPort.remove\",\n            \"step.inPort.create\",\n            \"step.outPort.remove\",\n            \"step.outPort.create\",\n            \"step.port.change\",\n            \"connections.updated\",\n            \"input.remove\",\n            \"input.create\",\n            \"output.create\",\n            \"output.remove\",\n            \"io.change\",\n            \"io.change.id\",\n            \"io.change.type\",\n            \"connection.create\",\n            \"connection.remove\"\n        ]);\n        _this.initializeGraphWatchers();\n        return _this;\n    }\n    Object.defineProperty(WorkflowModel.prototype, \"connections\", {\n        get: function () {\n            return Array.from(this.graph.edges);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(WorkflowModel.prototype, \"nodes\", {\n        get: function () {\n            return Array.from(this.graph.vertices);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    WorkflowModel.prototype.addVertex = function (connectionId, node, graph) {\n        if (graph === void 0) { graph = this.graph; }\n        try {\n            graph.addVertex(connectionId, node, function onConflict() {\n                node.id = this.getNextAvailableId(node.connectionId, !(node instanceof StepModel_1.StepModel), graph);\n                graph.addVertex(node.connectionId, node, onConflict);\n            }.bind(this));\n        }\n        catch (ex) {\n            node.setIssue((_a = {},\n                _a[node.loc] = {\n                    message: ex.message,\n                    code: ex.code,\n                    type: \"error\"\n                },\n                _a));\n        }\n        var _a;\n    };\n    WorkflowModel.prototype.initializeGraphWatchers = function () {\n        var _this = this;\n        /**\n         * Adds inPort to graph\n         * called on step update\n         * @name step.inPort.create\n         * @see StepModel.compareInPorts\n         */\n        this.eventHub.on(\"step.inPort.create\", function (port) {\n            _this.addVertex(port.connectionId, port);\n            _this.graph.addEdge({\n                id: port.connectionId,\n                type: \"StepInput\"\n            }, {\n                id: port.parentStep.id,\n                type: \"Step\"\n            }, false);\n        });\n        /**\n         * Adds outPort to graph\n         * called on step update\n         * @name step.outPort.create\n         * @see StepModel.compareOutPorts\n         */\n        this.eventHub.on(\"step.outPort.create\", function (port) {\n            _this.addVertex(port.connectionId, port);\n            _this.graph.addEdge({\n                id: port.parentStep.id,\n                type: \"Step\"\n            }, {\n                id: port.connectionId,\n                type: \"StepOutput\"\n            }, false);\n        });\n        /**\n         * Remove input port\n         * called when step is updated StepModel.setRunProcess\n         * @name step.inPort.remove\n         * @see StepModel.compareInPorts\n         */\n        this.eventHub.on(\"step.inPort.remove\", function (port) {\n            _this.clearPort(port);\n            _this.graph.removeVertex(port.connectionId);\n            // clean up connection between port and step\n            _this.graph.removeEdge([port.connectionId, port.parentStep.connectionId]);\n        });\n        /**\n         * Remove output port\n         * called when step is updated\n         * @name step.outPort.remove\n         * @see StepModel.compareOutPorts\n         */\n        this.eventHub.on(\"step.outPort.remove\", function (port) {\n            _this.clearOutPort(port);\n            _this.graph.removeVertex(port.connectionId);\n            // clean up connection between step and port\n            _this.graph.removeEdge([port.parentStep.connectionId, port.connectionId]);\n        });\n        /**\n         * Changes value of existing node in workflow\n         * called when step is updated\n         * @name step.port.change\n         * @see StepModel.compareOutPorts\n         * @see StepModel.compareInPorts\n         */\n        this.eventHub.on(\"step.port.change\", function (port) {\n            _this.graph.setVertexData(port.connectionId, port);\n            // check if port is connected to a workflow output\n            if (port instanceof WorkflowStepOutputModel_1.WorkflowStepOutputModel && _this.graph.hasOutgoing(port.connectionId)) {\n                var temporaryEdges = Array.from(_this.graph.edges);\n                temporaryEdges.forEach(function (e) {\n                    if (e.source.id === port.connectionId) {\n                        var oldOutput = _this.findById(e.destination.id);\n                        // make sure the destination is a workflow output and is only connected to the port which changed\n                        if (!(oldOutput instanceof WorkflowOutputParameterModel_1.WorkflowOutputParameterModel) || oldOutput.source.length !== 1)\n                            return;\n                        // remove the outdated workflow output first to avoid an infinite loop and duplicate ids\n                        _this.removeOutput(oldOutput);\n                        // create a new workflow output in place of the one which changed\n                        _this.createOutputFromPort(port.connectionId, { customProps: oldOutput.customProps });\n                    }\n                });\n            }\n        });\n    };\n    WorkflowModel.prototype.on = function (event, handler) {\n        return {\n            dispose: this.eventHub.on(event, handler)\n        };\n    };\n    WorkflowModel.prototype.off = function (event, handler) {\n        this.eventHub.off(event, handler);\n    };\n    WorkflowModel.prototype.serializeEmbedded = function (retainSource) {\n        if (retainSource === void 0) { retainSource = false; }\n        new UnimplementedMethodException_1.UnimplementedMethodException(\"serializeEmbedded\", \"WorkflowModel\");\n    };\n    WorkflowModel.prototype.serialize = function () {\n        new UnimplementedMethodException_1.UnimplementedMethodException(\"serialize\", \"WorkflowModel\");\n    };\n    WorkflowModel.prototype.deserialize = function (attr) {\n        new UnimplementedMethodException_1.UnimplementedMethodException(\"deserialize\", \"WorkflowModel\");\n    };\n    WorkflowModel.prototype.addHint = function (hint) {\n        new UnimplementedMethodException_1.UnimplementedMethodException(\"addHint\", \"WorkflowModel\");\n        return null;\n    };\n    WorkflowModel.prototype.createReq = function (req, constructor, loc, hint) {\n        var _this = this;\n        if (hint === void 0) { hint = false; }\n        var reqModel;\n        var property = hint ? \"hints\" : \"requirements\";\n        loc = loc || this.loc + \".\" + property + \"[\" + this[property].length + \"]\";\n        reqModel = new RequirementBaseModel_1.RequirementBaseModel(req, constructor, loc);\n        reqModel.isHint = hint;\n        this[property].push(reqModel);\n        reqModel.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        return reqModel;\n    };\n    WorkflowModel.prototype.setBatch = function (input, type) {\n    };\n    ;\n    WorkflowModel.prototype.findById = function (connectionId) {\n        return this.graph.getVertexData(connectionId);\n    };\n    WorkflowModel.prototype._exposePort = function (inPort, inputConstructor) {\n        // remove extraneous connections to this port and set it as invisible\n        this.clearPort(inPort);\n        return this._createInputFromPort(inPort, inputConstructor, false, true);\n    };\n    /**\n     * Expose creates an input on the workflow level and connects it with the exposed port\n     * Sets inPort.isVisible to false\n     * Sets input.isVisible to false\n     */\n    WorkflowModel.prototype.exposePort = function (inPort) {\n        new UnimplementedMethodException_1.UnimplementedMethodException(\"exposePort\", \"WorkflowModel\");\n    };\n    /**\n     * Adds inPort to graph and makes a connection between it and its step\n     * sets inPort.isVisible to true\n     *\n     * @name step.inPort.show\n     */\n    WorkflowModel.prototype.includePort = function (inPort) {\n        // check if port was exposed before including it\n        if (inPort.status === \"exposed\") {\n            this.clearPort(inPort);\n        }\n        // add port to canvas\n        inPort.isVisible = true;\n        // if the port has not been added to the graph yet\n        if (!this.graph.hasVertex(inPort.connectionId)) {\n            this.addVertex(inPort.connectionId, inPort);\n            this.graph.addEdge({\n                id: inPort.parentStep.id,\n                type: \"StepInput\"\n            }, {\n                id: inPort.connectionId,\n                type: \"Step\"\n            }, true);\n        }\n        this.eventHub.emit(\"step.inPort.show\", inPort);\n    };\n    /**\n     * Removes connections to port to out/inputs, removes dangling inputs, sets port to invisible\n     *\n     * @name step.inPort.hide\n     */\n    WorkflowModel.prototype.clearPort = function (inPort) {\n        // loop through sources, removing their connections and clearing dangling inputs\n        while (inPort.source.length) {\n            // because disconnect will remove the source once disconnected, we'll just reference it here\n            var source = inPort.source[0];\n            var sourceConnectionId = this.getSourceConnectionId(source);\n            // disconnect takes care of edges and dangling inputs\n            this.disconnect(sourceConnectionId, inPort.connectionId);\n        }\n        // remove visibility on the port so it isn't shown on canvas anymore\n        inPort.isVisible = false;\n        // send an event so the canvas knows it should hide it\n        this.eventHub.emit(\"step.inPort.hide\", inPort);\n        inPort.clearIssue(ErrorCode_1.ErrorCode.ALL);\n    };\n    WorkflowModel.prototype.clearOutPort = function (outPort) {\n        var _this = this;\n        this.graph.edges.forEach(function (e) {\n            // if the edge is connected to the output, it needs to be cleared and removed\n            if (e.source.id === outPort.connectionId) {\n                // if a connection is found, disconnect it\n                // this handles dangling outputs\n                _this.disconnect(outPort.connectionId, e.destination.id);\n            }\n        });\n        outPort.isVisible = false;\n    };\n    /**\n     * Checks if a workflow input has been leftover after removing\n     */\n    WorkflowModel.prototype.removeDanglingInput = function (connectionId) {\n        var _this = this;\n        // remove dangling input if it has been left over\n        if (!this.graph.hasOutgoing(connectionId)) {\n            this.graph.removeVertex(connectionId);\n            this.inputs = this.inputs.filter(function (input) {\n                if (input.connectionId === connectionId) {\n                    _this.eventHub.emit(\"input.remove\", input);\n                    return false;\n                }\n                return true;\n            });\n        }\n    };\n    WorkflowModel.prototype.removeDanglingOutput = function (connectionId) {\n        var _this = this;\n        if (!this.graph.hasIncoming(connectionId)) {\n            this.graph.removeVertex(connectionId);\n            this.outputs = this.outputs.filter(function (output) {\n                if (output.connectionId === connectionId) {\n                    output.clearIssue(ErrorCode_1.ErrorCode.ALL);\n                    _this.eventHub.emit(\"output.remove\", output);\n                    return false;\n                }\n                return true;\n            });\n        }\n    };\n    /**\n     * Removes step from workflow and from graph\n     * removes all connections to step and cleans up dangling inputs\n     * @param step\n     */\n    WorkflowModel.prototype.removeStep = function (step) {\n        if (typeof step === \"string\") {\n            step = this.graph.getVertexData(step);\n        }\n        // remove step from wf.steps\n        for (var i = 0; i < this.steps.length; i++) {\n            if (this.steps[i].id === step.id) {\n                this.steps[i].clearIssue(ErrorCode_1.ErrorCode.ALL);\n                this.steps.splice(i, 1);\n                break;\n            }\n        }\n        // remove step from graph and remove all connections\n        this.removeStepFromGraph(step);\n        // removes inputs that were connected solely to step.in\n        var inp = this.inputs.length;\n        while (inp--) {\n            this.removeDanglingInput(this.inputs[inp].connectionId);\n        }\n        // removes outputs that were connected solely to step.out\n        var out = this.outputs.length;\n        while (out--) {\n            this.removeDanglingOutput(this.outputs[out].connectionId);\n        }\n        var dests = this.gatherDestinations();\n        for (var j = 0; j < dests.length; j++) {\n            for (var i = 0; i < step.out.length; i++) {\n                var indexOf = dests[j].source.indexOf(step.out[i].sourceId);\n                if (indexOf > -1) {\n                    dests[j].source.splice(indexOf, 1);\n                    this.validateDestination(dests[j]);\n                }\n            }\n        }\n        step.cleanValidity();\n        this.eventHub.emit(\"step.remove\", step);\n    };\n    WorkflowModel.prototype.removeStepFromGraph = function (step) {\n        var _this = this;\n        // remove step node from graph\n        this.graph.removeVertex(step.connectionId);\n        var stepIn = step.in.map(function (i) { return i.connectionId; });\n        var stepOut = step.out.map(function (o) { return o.connectionId; });\n        // clean up connections between in/out ports and other nodes\n        // and in/out ports and the step itself\n        this.graph.edges.forEach(function (edge) {\n            if (stepIn.indexOf(edge.destination.id) !== -1 ||\n                stepOut.indexOf(edge.source.id) !== -1) {\n                _this.eventHub.emit(\"connection.remove\", _this.graph.getVertexData(edge.source.id), _this.graph.getVertexData(edge.destination.id));\n                _this.graph.removeEdge(edge);\n            }\n            else if (edge.destination.id === step.connectionId ||\n                edge.source.id === step.connectionId) {\n                _this.graph.removeEdge(edge);\n            }\n        });\n        // remove in ports and out ports from graph\n        stepIn.forEach(function (input) { return _this.graph.removeVertex(input); });\n        stepOut.forEach(function (output) { return _this.graph.removeVertex(output); });\n    };\n    /**\n     * Removes input from workflow and from graph\n     * removes all connections\n     * @param input\n     */\n    WorkflowModel.prototype.removeInput = function (input) {\n        if (typeof input === \"string\") {\n            input = this.graph.getVertexData(input);\n        }\n        // remove input from list of inputs on workflow model\n        for (var i = 0; i < this.inputs.length; i++) {\n            if (this.inputs[i].id == input.id) {\n                this.inputs[i].clearIssue(ErrorCode_1.ErrorCode.ALL);\n                this.inputs.splice(i, 1);\n                break;\n            }\n        }\n        // remove input from graph and remove connections\n        this.removeIONodeFromGraph(input);\n        // remove dangling outputs, in case one was attached solely to the input being removed\n        for (var i = 0; i < this.outputs.length; i++) {\n            this.removeDanglingOutput(this.outputs[i].connectionId);\n        }\n        var dests = this.gatherDestinations();\n        // remove source from step.in ports\n        for (var i = 0; i < dests.length; i++) {\n            var indexOf = dests[i].source.indexOf(input.sourceId);\n            if (indexOf !== -1) {\n                dests[i].source.splice(indexOf, 1);\n            }\n        }\n        this.eventHub.emit(\"input.remove\", input);\n    };\n    /**\n     * Removes output from workflow and from graph\n     * removes all connections\n     * @param output\n     */\n    WorkflowModel.prototype.removeOutput = function (output) {\n        if (typeof output === \"string\") {\n            output = this.graph.getVertexData(output);\n        }\n        // remove output from list of outputs on workflow model\n        for (var i = 0; i < this.outputs.length; i++) {\n            if (this.outputs[i].id == output.id) {\n                this.outputs[i].clearIssue(ErrorCode_1.ErrorCode.ALL);\n                this.outputs.splice(i, 1);\n                break;\n            }\n        }\n        // removes dangling inputs in case one was attached solely to the output being removed\n        for (var i = 0; i < this.inputs.length; i++) {\n            this.removeDanglingInput(this.inputs[i].connectionId);\n        }\n        // remove output from the graph and remove connections\n        this.removeIONodeFromGraph(output);\n        this.eventHub.emit(\"output.remove\", output);\n    };\n    /**\n     * Checks if source contains stepId.\n     * If it does, returns id of step.out, else null;\n     * @param source\n     * @param stepId\n     */\n    WorkflowModel.prototype.isSourceFromStep = function (source, stepId) {\n        throw new UnimplementedMethodException_1.UnimplementedMethodException(\"isSourceFromStep\", \"WorkflowModel\");\n    };\n    /**\n     * Checks if ID is valid and if it already exists on the graph\n     * @param id\n     * @param connectionId\n     */\n    WorkflowModel.prototype.checkIdValidity = function (id, connectionId) {\n        utils_1.validateID(id);\n        var next = this.getNextAvailableId(connectionId);\n        if (next !== id) {\n            throw new Error(\"ID already exists on graph, the next available id is \\\"\" + next + \"\\\"\");\n        }\n    };\n    /**\n     * Changes ID of step, updates connections and nodes in graph\n     */\n    WorkflowModel.prototype.changeStepId = function (step, id) {\n        var _this = this;\n        if (id === step.id) {\n            return;\n        }\n        this.checkIdValidity(id, id);\n        var oldId = step.id;\n        // remove references of step from graph\n        this.removeStepFromGraph(step);\n        // change id on step and add it to the graph\n        step.id = id;\n        this.addStepToGraph(step);\n        // go through step inputs and re-add all connections\n        step.in.forEach(function (input) {\n            var destNode = {\n                id: input.connectionId,\n                type: \"StepInput\"\n            };\n            input.source.forEach(function (source) {\n                _this.connectSource(source, input, destNode);\n            });\n        });\n        // go through all destinations and reconnect step outputs\n        this.gatherDestinations().forEach(function (dest) {\n            var _loop_1 = function (i) {\n                var source = dest.source[i];\n                var stepOutput = _this.isSourceFromStep(source, oldId);\n                if (stepOutput) {\n                    dest.source[i] = step.out.find(function (o) { return o.id === stepOutput; }).sourceId;\n                    var destination = {\n                        id: dest.connectionId,\n                        type: _this.getNodeType(dest)\n                    };\n                    _this.connectSource(dest.source[i], dest, destination);\n                }\n            };\n            for (var i = 0; i < dest.source.length; i++) {\n                _loop_1(i);\n            }\n        });\n        this.eventHub.emit(\"step.change.id\", step);\n    };\n    WorkflowModel.prototype.removeIONodeFromGraph = function (node) {\n        var _this = this;\n        this.graph.edges.forEach(function (edge) {\n            if (edge.destination.id === node.connectionId || edge.source.id === node.connectionId) {\n                _this.disconnect(edge.source.id, edge.destination.id);\n            }\n        });\n        this.graph.removeVertex(node.connectionId);\n    };\n    WorkflowModel.prototype.changeIONodeId = function (node, id) {\n        var _this = this;\n        if (node.id === id)\n            return;\n        var pref = node instanceof WorkflowInputParameterModel_1.WorkflowInputParameterModel ? constants_1.STEP_OUTPUT_CONNECTION_PREFIX : constants_1.STEP_INPUT_CONNECTION_PREFIX;\n        this.checkIdValidity(id, \"\" + pref + id + \"/\" + id);\n        var oldConnectionId = node.connectionId;\n        var oldId = node.id;\n        var oldSourceId = node.sourceId;\n        node.id = id;\n        this.graph.removeVertex(oldConnectionId);\n        this.addVertex(node.connectionId, node);\n        // if node is output, just change id, remove from graph, and re-add to graph\n        if (node instanceof WorkflowOutputParameterModel_1.WorkflowOutputParameterModel) {\n            this.graph.edges.forEach(function (edge) {\n                if (edge.destination.id === oldConnectionId) {\n                    edge.destination.id = node.connectionId;\n                }\n            });\n        }\n        // if node is input, change id, remove from graph and re-add to graph, go through all destinations and change their source\n        if (node instanceof WorkflowInputParameterModel_1.WorkflowInputParameterModel) {\n            this.graph.edges.forEach(function (edge) {\n                if (edge.source.id === oldConnectionId) {\n                    edge.source.id = node.connectionId;\n                    var destNode = _this.graph.getVertexData(edge.destination.id);\n                    for (var i = 0; i < destNode.source.length; i++) {\n                        if (destNode.source[i] === oldSourceId) {\n                            destNode.source[i] = node.sourceId;\n                        }\n                    }\n                }\n            });\n        }\n        this.eventHub.emit(\"io.change.id\", node, oldId);\n    };\n    /**\n     * Connects two vertices which have already been added to the graph\n     */\n    WorkflowModel.prototype.addEdge = function (source, destination, isVisible, isValid) {\n        if (isVisible === void 0) { isVisible = true; }\n        if (isValid === void 0) { isValid = true; }\n        this.graph.addEdge(source, destination, isVisible, isValid);\n    };\n    WorkflowModel.prototype.checkSrcAndDest = function (source, destination) {\n        // fetch source if connectionId is provided\n        if (typeof source === \"string\") {\n            source = this.graph.getVertexData(source);\n        }\n        // fetch destination if connectionId is provided\n        if (typeof destination === \"string\") {\n            destination = this.graph.getVertexData(destination);\n        }\n        if (!source || !destination) {\n            throw new Error(\"Source and destination must be defined\");\n        }\n        // type check source\n        if (!(source instanceof WorkflowInputParameterModel_1.WorkflowInputParameterModel) && !(source instanceof WorkflowStepOutputModel_1.WorkflowStepOutputModel)) {\n            throw new Error(\"Expected source to be instanceof WorkflowInputParameterModel or WorkflowStepOutputModel, instead got \" + source.constructor.name);\n        }\n        // type check destination\n        if (!(destination instanceof WorkflowOutputParameterModel_1.WorkflowOutputParameterModel) && !(destination instanceof WorkflowStepInputModel_1.WorkflowStepInputModel)) {\n            throw new Error(\"Expected destination to be instanceof WorkflowOutputParameterModel or WorkflowStepInputModel, instead got \" + destination.constructor.name);\n        }\n        return [source, destination];\n    };\n    WorkflowModel.prototype.disconnect = function (source, destination) {\n        _a = this.checkSrcAndDest(source, destination), source = _a[0], destination = _a[1];\n        if (this.graph.removeEdge({\n            source: {\n                id: source.connectionId\n            },\n            destination: {\n                id: destination.connectionId\n            }\n        })) {\n            var destLen = destination.source.length;\n            while (destLen--) {\n                if (destination.source[destLen] === source.sourceId) {\n                    destination.source.splice(destLen, 1);\n                }\n            }\n            this.validateDestination(destination);\n            if (source instanceof WorkflowInputParameterModel_1.WorkflowInputParameterModel) {\n                this.removeDanglingInput(source.connectionId);\n            }\n            if (destination instanceof WorkflowOutputParameterModel_1.WorkflowOutputParameterModel) {\n                this.removeDanglingOutput(destination.connectionId);\n            }\n            this.eventHub.emit(\"connection.remove\", source, destination);\n        }\n        else {\n            throw new Error(\"Could not remove nonexistent connection between \" + source.connectionId + \" and \" + destination.connectionId);\n        }\n        var _a;\n    };\n    WorkflowModel.prototype.connect = function (source, destination, show) {\n        if (show === void 0) { show = true; }\n        _a = this.checkSrcAndDest(source, destination), source = _a[0], destination = _a[1];\n        if (destination.parentStep &&\n            source.parentStep &&\n            destination.parentStep.id === source.parentStep.id) {\n            throw new Error(\"Cannot connect ports that belong to the same step: \" + destination.parentStep.id);\n        }\n        // add source to destination\n        destination.source.push(source.sourceId);\n        var isValid = this.validateConnection(destination, source);\n        // add edge to the graph\n        this.addEdge({\n            id: source.connectionId,\n            type: this.getNodeType(source)\n        }, {\n            id: destination.connectionId,\n            type: this.getNodeType(destination)\n        }, show, isValid);\n        this.eventHub.emit(\"connection.create\", source, destination);\n        return isValid;\n        var _a;\n    };\n    WorkflowModel.prototype.addStepFromProcess = function (proc) {\n        new UnimplementedMethodException_1.UnimplementedMethodException(\"addStepFromProcess\", \"WorkflowModel\");\n        return undefined;\n    };\n    /**\n     * Checks for naming collisions in vertex ids, in case of collisions,\n     * it will increment the provided id, otherwise it returns the original id\n     */\n    WorkflowModel.prototype.getNextAvailableId = function (connectionId, isIO, graph) {\n        if (isIO === void 0) { isIO = false; }\n        if (graph === void 0) { graph = this.graph; }\n        var hasId = true;\n        var result = connectionId;\n        var arr = [];\n        if (connectionId.indexOf(\"/\") !== -1 && isIO) {\n            arr = result.split(\"/\");\n        }\n        while (hasId) {\n            if (isIO) {\n                if (hasId = (graph.hasVertex([\"in\", arr[1], arr[2]].join(\"/\")) || graph.hasVertex([\"out\", arr[1], arr[2]].join(\"/\")))) {\n                    arr = [arr[0], utils_1.incrementString(arr[1]), utils_1.incrementString(arr[2])];\n                    result = arr.join(\"/\");\n                }\n            }\n            else {\n                if (hasId = graph.hasVertex(result)) {\n                    result = utils_1.incrementString(result);\n                }\n            }\n        }\n        if (result.indexOf(\"/\") !== -1) {\n            return result.split(\"/\")[2];\n        }\n        return result;\n    };\n    WorkflowModel.prototype.isConnected = function () {\n        try {\n            if (!this.graph)\n                this.graph = this.constructGraph();\n            var isConnected = this.graph.isConnected();\n            if (!isConnected) {\n                this.setIssue((_a = {},\n                    _a[this.loc] = {\n                        message: \"Workflow is not connected\",\n                        type: \"warning\"\n                    },\n                    _a));\n            }\n            return isConnected;\n        }\n        catch (ex) {\n            this.setIssue((_b = {},\n                _b[this.loc] = {\n                    message: ex,\n                    type: \"error\"\n                },\n                _b));\n            return false;\n        }\n        var _a, _b;\n    };\n    WorkflowModel.prototype.hasCycles = function () {\n        try {\n            if (!this.graph)\n                this.graph = this.constructGraph();\n            var hasCycles = this.graph.hasCycles();\n            if (hasCycles) {\n                this.setIssue((_a = {},\n                    _a[this.loc] = {\n                        message: \"Workflow contains cycles\",\n                        type: \"error\"\n                    },\n                    _a));\n            }\n            return hasCycles;\n        }\n        catch (ex) {\n            this.setIssue((_b = {},\n                _b[this.loc] = {\n                    message: ex,\n                    type: \"error\"\n                },\n                _b));\n            return false;\n        }\n        var _a, _b;\n    };\n    /**\n     * Finds matching ports to which pointA can connect within the workflow.\n     * Looks at port type and fileTypes if they are specified.\n     */\n    WorkflowModel.prototype.gatherValidPorts = function (pointA, points, ltr) {\n        return points.filter(function (pointB) {\n            try {\n                utils_1.checkIfConnectionIsValid(pointA, pointB, ltr);\n                return true;\n            }\n            catch (e) {\n                return false;\n            }\n        });\n    };\n    /**\n     * Finds valid destination ports (workflow.outputs and step.in)\n     * for a given source port (workflow.inputs and step.out);\n     * @param port\n     * @returns {any[]}\n     */\n    WorkflowModel.prototype.gatherValidConnectionPoints = function (port) {\n        if (typeof port === \"string\") {\n            port = this.graph.getVertexData(port);\n        }\n        if (port instanceof WorkflowInputParameterModel_1.WorkflowInputParameterModel || port instanceof WorkflowStepOutputModel_1.WorkflowStepOutputModel) {\n            var destinations = this.gatherDestinations();\n            return this.gatherValidPorts(port, destinations, true);\n        }\n        else {\n            var sources = this.gatherSources();\n            return this.gatherValidPorts(port, sources, false);\n        }\n    };\n    /**\n     * Returns all possible sources on the graph\n     */\n    WorkflowModel.prototype.gatherSources = function () {\n        var stepOut = this.steps.reduce(function (acc, curr) {\n            return acc.concat(curr.out);\n        }, []);\n        return stepOut.concat(this.inputs);\n    };\n    /**\n     * Returns all possible destinations on the graph\n     */\n    WorkflowModel.prototype.gatherDestinations = function () {\n        var stepOut = this.steps.reduce(function (acc, curr) {\n            return acc.concat(curr.in);\n        }, []);\n        return stepOut.concat(this.outputs);\n    };\n    WorkflowModel.prototype.addStepToGraph = function (step, graph) {\n        var _this = this;\n        if (graph === void 0) { graph = this.graph; }\n        this.addVertex(step.id, step, graph);\n        // Sources don't have information about their destinations,\n        // so we don't look through them for connections\n        step.out.forEach(function (source) {\n            _this.addVertex(source.connectionId, source, graph);\n            graph.addEdge({\n                id: source.parentStep.id,\n                type: \"Step\"\n            }, {\n                id: source.connectionId,\n                type: \"StepOutput\"\n            }, false);\n        });\n        step.in.forEach(function (dest) {\n            _this.addVertex(dest.connectionId, dest, graph);\n            graph.addEdge({\n                id: dest.connectionId,\n                type: \"StepInput\"\n            }, {\n                id: dest.parentStep.id,\n                type: \"Step\"\n            }, false);\n        });\n    };\n    /**\n     * @param inPort\n     * @param inputConstructor\n     * @param show\n     * @param create\n     *\n     * @param data\n     * @private\n     */\n    WorkflowModel.prototype._createInputFromPort = function (inPort, inputConstructor, show, create, data) {\n        var _this = this;\n        if (show === void 0) { show = true; }\n        if (create === void 0) { create = false; }\n        if (data === void 0) { data = {}; }\n        if (typeof inPort === \"string\") {\n            inPort = this.graph.getVertexData(inPort);\n        }\n        if (!inPort || !this.graph.hasVertex(inPort.connectionId)) {\n            if (!create) {\n                throw new Error(\"WorkflowStepInputModel \" + inPort.destinationId + \" does not exist on the graph\");\n            }\n            else {\n                this.addVertex(inPort.connectionId, inPort);\n                // connect in port to step\n                this.addEdge({\n                    id: inPort.connectionId,\n                    type: \"StepInput\"\n                }, {\n                    id: inPort.parentStep.id,\n                    type: \"Step\"\n                }, false);\n            }\n        }\n        // create new input on the workflow to connect with the port\n        var inputParam = Object.assign((_a = {\n                id: this.getNextAvailableId(\"\" + constants_1.STEP_OUTPUT_CONNECTION_PREFIX + inPort.id + \"/\" + inPort.id, true),\n                type: inPort.type ? inPort.type.serialize() : \"null\"\n            },\n            _a[\"sbg:fileTypes\"] = inPort.fileTypes,\n            _a.inputBinding = inPort[\"inputBinding\"],\n            _a), data.customProps);\n        var input = new inputConstructor(inputParam, this.loc + \".inputs[\" + this.inputs.length + \"]\", this.eventHub);\n        // add it to the workflow tree\n        input.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        this.inputs.push(input);\n        // add input to graph\n        this.addInputToGraph(input);\n        input.isVisible = show;\n        inPort.isVisible = show;\n        this.eventHub.emit(\"input.create\", input);\n        // connect input with inPort\n        this.connect(input, inPort, show);\n        return input;\n        var _a;\n    };\n    WorkflowModel.prototype._createOutputFromPort = function (outPort, outputConstructor, show, create, opts) {\n        var _this = this;\n        if (show === void 0) { show = true; }\n        if (create === void 0) { create = false; }\n        if (opts === void 0) { opts = {}; }\n        if (typeof outPort === \"string\") {\n            outPort = this.graph.getVertexData(outPort);\n        }\n        if (!outPort || !this.graph.hasVertex(outPort.connectionId)) {\n            if (!create) {\n                throw new Error(\"WorkflowStepInputModel \" + outPort.sourceId + \" does not exist on the graph\");\n            }\n            else {\n                this.addVertex(outPort.connectionId, outPort);\n                // connect in port to step\n                this.addEdge({\n                    id: outPort.connectionId,\n                    type: \"StepInput\"\n                }, {\n                    id: outPort.parentStep.id,\n                    type: \"Step\"\n                }, false);\n            }\n        }\n        // create new input on the workflow to connect with the port\n        var outputParam = Object.assign((_a = {\n                id: this.getNextAvailableId(\"\" + constants_1.STEP_INPUT_CONNECTION_PREFIX + outPort.id + \"/\" + outPort.id, true),\n                type: outPort.type ? outPort.type.serialize() : \"null\"\n            },\n            _a[\"sbg:fileTypes\"] = outPort.fileTypes,\n            _a), opts.customProps);\n        var output = new outputConstructor(outputParam, this.loc + \".outputs[\" + this.outputs.length + \"]\", this.eventHub);\n        // add it to the workflow tree\n        output.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        this.outputs.push(output);\n        // add output to graph\n        this.addOutputToGraph(output);\n        this.eventHub.emit(\"output.create\", output);\n        outPort.isVisible = show;\n        // connect output with outPort\n        this.connect(outPort, output, show);\n        return output;\n        var _a;\n    };\n    WorkflowModel.prototype.addInputToGraph = function (input, graph) {\n        if (graph === void 0) { graph = this.graph; }\n        this.addVertex(input.connectionId, input, graph);\n    };\n    WorkflowModel.prototype.addOutputToGraph = function (output, graph) {\n        if (graph === void 0) { graph = this.graph; }\n        this.addVertex(output.connectionId, output, graph);\n    };\n    /**\n     * Helper function to connect source to destination\n     */\n    WorkflowModel.prototype.connectSource = function (sourceId, dest, destNode, graph) {\n        if (graph === void 0) { graph = this.graph; }\n        var sourceConnectionId = this.getSourceConnectionId(sourceId);\n        // detect if source is a port of an input (has a step in its identifier),\n        // if it is a port then add the prefix to form the connectionId\n        // get source node by connectionId from graph's vertices\n        var sourceModel = graph.getVertexData(sourceConnectionId);\n        if (sourceModel === undefined) {\n            dest.setIssue((_a = {},\n                _a[\"\" + dest.loc] = {\n                    type: \"error\",\n                    message: \"Destination id \" + dest.id + \" has unknown source \\\"\" + sourceId + \"\\\". This may result in a cycle in the graph\"\n                },\n                _a));\n            return;\n        }\n        // all workflow inputs are visible by default and should be shown\n        // except for those which are \"exposed\", these are explicitly hidden\n        var isVisible = !(sourceModel instanceof WorkflowInputParameterModel_1.WorkflowInputParameterModel && !sourceModel.isVisible);\n        // if workflow input isn't visible, its destination and connection\n        // shouldn't be visible either\n        dest.isVisible = isVisible;\n        // add a connection between this destination and its source.\n        // visibility depends on both nodes, for ports that were \"exposed\" for example\n        // and are connected to nodes which are invisible\n        var isValid = this.validateConnection(dest, sourceModel, graph);\n        graph.addEdge({\n            id: sourceModel.connectionId,\n            type: this.getNodeType(sourceModel)\n        }, destNode, isVisible, isValid);\n        var _a;\n    };\n    ;\n    WorkflowModel.prototype.constructGraph = function () {\n        var _this = this;\n        var destinations = this.gatherDestinations();\n        // Create a blank Graph\n        var graph = new Graph_1.Graph();\n        // Add inputs to graph\n        this.inputs.forEach(function (input) { return _this.addInputToGraph(input, graph); });\n        // Add outputs to graph\n        this.outputs.forEach(function (output) { return _this.addOutputToGraph(output, graph); });\n        // Adding steps to graph adds their step.in and step.out as well as connecting in/out to step\n        this.steps.forEach(function (step) { return _this.addStepToGraph(step, graph); });\n        // Destinations contain all information about connections in .source property,\n        // we loop through them and create the appropriate type of connection\n        destinations.forEach(function (dest) {\n            // create destination EdgeNode\n            var destination = {\n                id: dest.connectionId,\n                type: _this.getNodeType(dest)\n            };\n            // No point in connecting if there's no source\n            // @todo source should always be an array (just in case), change this check to dest.source.length\n            if (dest.source) {\n                // if source is an array, loop through all sources for this destination\n                if (Array.isArray(dest.source)) {\n                    dest.source.forEach(function (s) {\n                        _this.connectSource(s, dest, destination, graph);\n                    });\n                }\n                else {\n                    _this.connectSource(dest.source, dest, destination, graph);\n                }\n            }\n        });\n        return graph;\n    };\n    /**\n     * Returns type of node to be added to graph, for canvas rendering\n     */\n    WorkflowModel.prototype.getNodeType = function (node) {\n        if (node instanceof WorkflowInputParameterModel_1.WorkflowInputParameterModel) {\n            return \"WorkflowInput\";\n        }\n        else if (node instanceof WorkflowStepOutputModel_1.WorkflowStepOutputModel) {\n            return \"StepOutput\";\n        }\n        else if (node instanceof StepModel_1.StepModel) {\n            return \"Step\";\n        }\n        else if (node instanceof WorkflowStepInputModel_1.WorkflowStepInputModel) {\n            return \"StepInput\";\n        }\n        else if (node instanceof WorkflowOutputParameterModel_1.WorkflowOutputParameterModel) {\n            return \"WorkflowOutput\";\n        }\n    };\n    WorkflowModel.prototype.getSourceConnectionId = function (source) {\n        new UnimplementedMethodException_1.UnimplementedMethodException(\"getSourceConnectionId\");\n        return undefined;\n    };\n    /**\n     * Validate all visible connections and sets correct validity state on destinations\n     */\n    WorkflowModel.prototype.validateConnections = function () {\n        var _this = this;\n        var sources = this.gatherSources();\n        var destinations = this.gatherDestinations();\n        this.connections.forEach(function (connection) {\n            if (connection.isVisible) {\n                var source = sources.find(function (item) {\n                    return item.connectionId === connection.source.id;\n                });\n                var destination = destinations.find(function (item) {\n                    return item.connectionId === connection.destination.id;\n                });\n                _this.validateConnection(destination, source);\n            }\n        });\n    };\n    /**\n     * Validate connection between source and destination and sets correct validity state on destination\n     */\n    WorkflowModel.prototype.validateConnection = function (destination, source, graph) {\n        if (graph === void 0) { graph = this.graph; }\n        if (!source || !destination) {\n            return;\n        }\n        var isValid = false;\n        try {\n            utils_1.checkIfConnectionIsValid(source, destination);\n            isValid = true;\n        }\n        catch (e) {\n            var sourceText = destination instanceof V1WorkflowOutputParameterModel_1.V1WorkflowOutputParameterModel ? \"outputSource\" : \"source\";\n            destination.setIssue((_a = {},\n                _a[destination.loc + (\".\" + sourceText + \"[\") + source.sourceId + \"]\"] = {\n                    message: e.message,\n                    type: \"warning\",\n                    code: e.code\n                },\n                _a));\n        }\n        Array.from(graph.edges).filter(function (c) {\n            return c.isVisible && (c.destination.id === destination.connectionId && c.source.id === source.connectionId);\n        })\n            .forEach(function (c) {\n            c.isValid = isValid;\n        });\n        return isValid;\n        var _a;\n    };\n    /**\n     * Validate all connections made with given destination\n     */\n    WorkflowModel.prototype.validateDestination = function (destination) {\n        var _this = this;\n        destination.clearIssue(ErrorCode_1.ErrorCode.CONNECTION_ALL);\n        // Find all sources connected to given destination\n        var sources = this.connections.filter(function (connection) {\n            return connection.isVisible && (connection.destination.id === destination.connectionId);\n        }).map(function (connection) {\n            return _this.findById(connection.source.id);\n        });\n        // Validate all connections\n        sources.forEach(function (source) {\n            _this.validateConnection(destination, source);\n        });\n    };\n    /**\n     * Validate all connections made with given IO port\n     */\n    WorkflowModel.prototype.validateConnectionsForIOPort = function (port) {\n        var _this = this;\n        if (port instanceof WorkflowInputParameterModel_1.WorkflowInputParameterModel) {\n            var destinations = this.connections.filter(function (connection) {\n                return connection.isVisible && (connection.source.id === port.connectionId);\n            }).map(function (connection) {\n                return _this.findById(connection.destination.id);\n            });\n            // Validate destination in case when connection goes from invalid > valid to remove warning\n            // (This is because we do not have currently method to remove certain keys in issues - ValidationBase)\n            destinations.forEach(function (destination) {\n                _this.validateDestination(destination);\n            });\n        }\n        else {\n            // If port is output\n            this.validateDestination(port);\n        }\n        this.eventHub.emit(\"connections.updated\");\n    };\n    WorkflowModel.prototype.validateGraph = function () {\n        try {\n            this.graph.topSort();\n        }\n        catch (ex) {\n            if (ex.message === \"Graph has cycles\") {\n                this.setIssue((_a = {},\n                    _a[this.loc] = {\n                        message: \"Graph has cycles\",\n                        type: \"error\"\n                    },\n                    _a));\n            }\n            else if (ex === \"Can't sort unconnected graph\") {\n                this.setIssue((_b = {},\n                    _b[this.loc] = {\n                        message: \"Graph is not connected\",\n                        type: \"warning\"\n                    },\n                    _b));\n            }\n        }\n        var _a, _b;\n    };\n    return WorkflowModel;\n}(ValidationBase_1.ValidationBase));\nexports.WorkflowModel = WorkflowModel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/generic/WorkflowModel.js\n// module id = 11\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ValidationBase_1 = require(\"../helpers/validation/ValidationBase\");\nvar UnimplementedMethodException_1 = require(\"../helpers/UnimplementedMethodException\");\nvar ProcessRequirementModel = /** @class */ (function (_super) {\n    __extends(ProcessRequirementModel, _super);\n    function ProcessRequirementModel(loc) {\n        var _this = _super.call(this, loc) || this;\n        _this.customProps = {};\n        return _this;\n    }\n    ProcessRequirementModel.prototype.serialize = function () {\n        new UnimplementedMethodException_1.UnimplementedMethodException(\"serialize\", \"ProcessRequirementModel\");\n        return null;\n    };\n    ProcessRequirementModel.prototype.deserialize = function (attr) {\n        new UnimplementedMethodException_1.UnimplementedMethodException(\"deserialize\", \"ProcessRequirementModel\");\n    };\n    return ProcessRequirementModel;\n}(ValidationBase_1.ValidationBase));\nexports.ProcessRequirementModel = ProcessRequirementModel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/generic/ProcessRequirementModel.js\n// module id = 12\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ValidationBase_1 = require(\"../helpers/validation/ValidationBase\");\nvar UnimplementedMethodException_1 = require(\"../helpers/UnimplementedMethodException\");\nvar ErrorCode_1 = require(\"../helpers/validation/ErrorCode\");\nvar utils_1 = require(\"../helpers/utils\");\nvar CommandOutputParameterModel = /** @class */ (function (_super) {\n    __extends(CommandOutputParameterModel, _super);\n    function CommandOutputParameterModel(loc, eventHub) {\n        var _this = _super.call(this, loc) || this;\n        _this.eventHub = eventHub;\n        _this.customProps = {};\n        return _this;\n    }\n    CommandOutputParameterModel.prototype.updateOutputBinding = function (binding) {\n        new UnimplementedMethodException_1.UnimplementedMethodException(\"updateOutputBinding\", \"CommandOutputParameterModel\");\n    };\n    CommandOutputParameterModel.prototype._addSecondaryFile = function (file, exprConstructor, locBase) {\n        var _this = this;\n        var loc = utils_1.incrementLastLoc(this.secondaryFiles, locBase + \".secondaryFiles\");\n        var f = new exprConstructor(file, loc, this.eventHub);\n        this.secondaryFiles.push(f);\n        f.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        return f;\n    };\n    CommandOutputParameterModel.prototype._updateSecondaryFiles = function (files) {\n        var _this = this;\n        this.secondaryFiles.forEach(function (f) { return f.clearIssue(ErrorCode_1.ErrorCode.EXPR_ALL); });\n        this.secondaryFiles = [];\n        files.forEach(function (f) { return _this.addSecondaryFile(f); });\n    };\n    CommandOutputParameterModel.prototype._removeSecondaryFile = function (index) {\n        var file = this.secondaryFiles[index];\n        if (file) {\n            file.setValue(\"\", \"string\");\n            this.secondaryFiles.splice(index, 1);\n        }\n    };\n    CommandOutputParameterModel.prototype.updateLoc = function (loc) {\n        // must update location of self first\n        _super.prototype.updateLoc.call(this, loc);\n        // update location of type, so that in case the input is a field,\n        // newly created fields will have correct loc\n        this.type.updateLoc(loc + \".type\");\n    };\n    CommandOutputParameterModel.prototype.validate = function (context) {\n        var _this = this;\n        this.clearIssue(ErrorCode_1.ErrorCode.ALL);\n        var promises = [];\n        promises.push(this.outputBinding.validate(context));\n        promises.push(this.type.validate(context));\n        promises.concat(this.secondaryFiles.map(function (f) { return f.validate(context); }));\n        return Promise.all(promises).then(function () { return _this.issues; });\n    };\n    CommandOutputParameterModel.prototype.attachFileTypeListeners = function () {\n        var _this = this;\n        if (this.eventHub) {\n            this.modelListeners.push(this.eventHub.on(\"io.change.type\", function (loc) {\n                if (_this.loc + \".type\" === loc) {\n                    if (!utils_1.isFileType(_this)) {\n                        _this.updateSecondaryFiles([]);\n                        if (_this.outputBinding) {\n                            _this.outputBinding.setInheritMetadataFrom(null);\n                        }\n                    }\n                }\n            }));\n        }\n    };\n    return CommandOutputParameterModel;\n}(ValidationBase_1.ValidationBase));\nexports.CommandOutputParameterModel = CommandOutputParameterModel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/generic/CommandOutputParameterModel.js\n// module id = 13\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ProcessRequirementModel_1 = require(\"./ProcessRequirementModel\");\nvar SBDraft2ExpressionModel_1 = require(\"../d2sb/SBDraft2ExpressionModel\");\nvar utils_1 = require(\"../helpers/utils\");\nvar ExpressionModel_1 = require(\"./ExpressionModel\");\nvar RequirementBaseModel = /** @class */ (function (_super) {\n    __extends(RequirementBaseModel, _super);\n    function RequirementBaseModel(req, exprConstructor, loc, eventHub) {\n        var _this = _super.call(this, loc) || this;\n        _this.exprConstructor = exprConstructor;\n        _this.eventHub = eventHub;\n        _this.customProps = {};\n        _this.deserialize(req);\n        return _this;\n    }\n    RequirementBaseModel.prototype.updateValue = function (value) {\n        var _this = this;\n        this.value = value;\n        if (value instanceof ExpressionModel_1.ExpressionModel) {\n            this.value.setValidationCallback(function (err) { return _this.updateValidity(err); });\n            this.value.loc = this.loc + \".value\";\n        }\n    };\n    RequirementBaseModel.prototype.serialize = function () {\n        // value stored in customProps was whole value of hint\n        if (this.customProps.constructor.name !== \"Object\") {\n            return this.customProps;\n        }\n        var base = {};\n        if (this.class)\n            base.class = this.class;\n        var value;\n        if (this.value instanceof ExpressionModel_1.ExpressionModel) {\n            value = this.value.serialize();\n        }\n        else {\n            value = this.value;\n        }\n        if (value) {\n            base[\"value\"] = value;\n        }\n        return Object.assign({}, base, this.customProps);\n    };\n    RequirementBaseModel.prototype.deserialize = function (attr) {\n        var _this = this;\n        // hint is not an object type, therefore it cannot be deserialized\n        if (attr.constructor.name !== \"Object\") {\n            this.customProps = attr;\n            return;\n        }\n        this.class = attr.class;\n        if (attr[\"value\"] !== undefined && attr[\"value\"] !== null) {\n            this.value = attr[\"value\"];\n            if (typeof this.value === \"string\" || (this.value[\"script\"] && this.exprConstructor === SBDraft2ExpressionModel_1.SBDraft2ExpressionModel)) {\n                this.value = new this.exprConstructor(attr[\"value\"], this.loc + \".value\", this.eventHub);\n                this.value.setValidationCallback(function (err) { return _this.updateValidity(err); });\n            }\n        }\n        utils_1.spreadSelectProps(attr, this.customProps, [\"class\", \"value\"]);\n    };\n    return RequirementBaseModel;\n}(ProcessRequirementModel_1.ProcessRequirementModel));\nexports.RequirementBaseModel = RequirementBaseModel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/generic/RequirementBaseModel.js\n// module id = 14\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ValidationBase_1 = require(\"../helpers/validation/ValidationBase\");\nvar constants_1 = require(\"../helpers/constants\");\nvar UnimplementedMethodException_1 = require(\"../helpers/UnimplementedMethodException\");\nvar ErrorCode_1 = require(\"../helpers/validation/ErrorCode\");\nvar WorkflowInputParameterModel = /** @class */ (function (_super) {\n    __extends(WorkflowInputParameterModel, _super);\n    function WorkflowInputParameterModel(loc, eventHub) {\n        var _this = _super.call(this, loc) || this;\n        _this.fileTypes = [];\n        _this.isVisible = true;\n        _this.customProps = {};\n        _this.eventHub = eventHub;\n        return _this;\n    }\n    Object.defineProperty(WorkflowInputParameterModel.prototype, \"label\", {\n        get: function () {\n            return this._label;\n        },\n        set: function (value) {\n            this._label = value;\n            this.eventHub.emit(\"io.change\", this);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(WorkflowInputParameterModel.prototype, \"sourceId\", {\n        /**\n         * ID to be used when adding as source\n         */\n        get: function () {\n            return this.id;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(WorkflowInputParameterModel.prototype, \"connectionId\", {\n        /**\n         * ID to be used in graph\n         */\n        get: function () {\n            return \"\" + constants_1.STEP_OUTPUT_CONNECTION_PREFIX + this.id + \"/\" + this.id;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    WorkflowInputParameterModel.prototype.updateLoc = function (loc) {\n        // must update location of self first\n        _super.prototype.updateLoc.call(this, loc);\n        // update location of type, so that in case the input is a field,\n        // newly created fields will have correct loc\n        this.type.updateLoc(loc + \".type\");\n    };\n    WorkflowInputParameterModel.prototype.serialize = function () {\n        new UnimplementedMethodException_1.UnimplementedMethodException(\"serialize\", \"WorkflowInputParameterModel\");\n    };\n    WorkflowInputParameterModel.prototype.deserialize = function (attr) {\n        new UnimplementedMethodException_1.UnimplementedMethodException(\"deserialize\", \"WorkflowInputParameterModel\");\n    };\n    WorkflowInputParameterModel.prototype.validate = function () {\n        var _this = this;\n        this.clearIssue(ErrorCode_1.ErrorCode.ALL);\n        var promises = [];\n        promises.push(this.type.validate());\n        return Promise.all(promises).then(function (res) { return _this.issues; });\n    };\n    return WorkflowInputParameterModel;\n}(ValidationBase_1.ValidationBase));\nexports.WorkflowInputParameterModel = WorkflowInputParameterModel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/generic/WorkflowInputParameterModel.js\n// module id = 15\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ValidationBase_1 = require(\"../helpers/validation/ValidationBase\");\nvar constants_1 = require(\"../helpers/constants\");\nvar UnimplementedMethodException_1 = require(\"../helpers/UnimplementedMethodException\");\nvar ErrorCode_1 = require(\"../helpers/validation/ErrorCode\");\nvar WorkflowOutputParameterModel = /** @class */ (function (_super) {\n    __extends(WorkflowOutputParameterModel, _super);\n    function WorkflowOutputParameterModel(loc, eventHub) {\n        var _this = _super.call(this, loc) || this;\n        _this.fileTypes = [];\n        _this.isField = false;\n        _this.isVisible = true;\n        _this.customProps = {};\n        _this.eventHub = eventHub;\n        return _this;\n    }\n    Object.defineProperty(WorkflowOutputParameterModel.prototype, \"label\", {\n        get: function () {\n            return this._label;\n        },\n        set: function (value) {\n            this._label = value;\n            this.eventHub.emit(\"io.change\", this);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(WorkflowOutputParameterModel.prototype, \"destinationId\", {\n        get: function () {\n            return this.id;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(WorkflowOutputParameterModel.prototype, \"connectionId\", {\n        get: function () {\n            return \"\" + constants_1.STEP_INPUT_CONNECTION_PREFIX + this.id + \"/\" + this.id;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    WorkflowOutputParameterModel.prototype.updateLoc = function (loc) {\n        // must update location of self first\n        _super.prototype.updateLoc.call(this, loc);\n        // update location of type, so that in case the input is a field,\n        // newly created fields will have correct loc\n        this.type.updateLoc(loc + \".type\");\n    };\n    WorkflowOutputParameterModel.prototype.serialize = function () {\n        new UnimplementedMethodException_1.UnimplementedMethodException(\"serialize\", \"WorkflowOutputParameterModel\");\n    };\n    WorkflowOutputParameterModel.prototype.deserialize = function (attr) {\n        new UnimplementedMethodException_1.UnimplementedMethodException(\"deserialize\", \"WorkflowOutputParameterModel\");\n    };\n    WorkflowOutputParameterModel.prototype.validate = function () {\n        var _this = this;\n        this.clearIssue(ErrorCode_1.ErrorCode.ALL);\n        var promises = [];\n        promises.push(this.type.validate());\n        return Promise.all(promises).then(function (res) { return _this.issues; });\n    };\n    return WorkflowOutputParameterModel;\n}(ValidationBase_1.ValidationBase));\nexports.WorkflowOutputParameterModel = WorkflowOutputParameterModel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/generic/WorkflowOutputParameterModel.js\n// module id = 16\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ExpressionEvaluator = /** @class */ (function () {\n    function ExpressionEvaluator() {\n    }\n    ExpressionEvaluator.evaluate = function (expr, context, version) {\n        var _this = this;\n        if (context === void 0) { context = {}; }\n        if (version === \"v1.0\") {\n            if (typeof expr === \"number\") {\n                expr = expr.toString();\n            }\n            else if (typeof expr === \"object\") {\n                return new Promise(function (res, rej) {\n                    rej(\"Unexpected object type when evaluating v1.0 Expression: \" + expr);\n                });\n            }\n            try {\n                var results = ExpressionEvaluator.grabExpressions(expr).map(function (token) {\n                    switch (token.type) {\n                        case \"func\":\n                            return ExpressionEvaluator.evaluateExpression(\"(function() {\" + _this.libraries.join(\"\\n\\n\") + \"\\n\\n\"\n                                + token.value + \"})()\", context);\n                        case \"expr\":\n                            return ExpressionEvaluator.evaluateExpression(_this.libraries.join(\"\\n\\n\") + \"\\n\\n\" + token.value, context);\n                        case \"literal\":\n                            return new Promise(function (res) { return res(token.value); });\n                    }\n                });\n                if (results.length === 1) {\n                    return results[0];\n                }\n                else {\n                    return Promise.all(results).then(function (res) { return res.join(\"\"); });\n                }\n            }\n            catch (ex) {\n                return new Promise(function (res, rej) {\n                    rej(ex);\n                });\n            }\n        }\n        else if (version === \"draft-2\") {\n            if (typeof expr === \"string\" || typeof expr === \"number\") {\n                return new Promise(function (res) { return res(expr); });\n            }\n            else {\n                var script = expr.script.trim().charAt(0) === '{'\n                    ? \"(function()\" + expr.script + \")()\"\n                    : expr.script;\n                return ExpressionEvaluator.evaluateExpression(script, context);\n            }\n        }\n    };\n    ExpressionEvaluator.evaluateD2 = function (expr, context) {\n        if (typeof expr === \"string\" || typeof expr === \"number\") {\n            return new Promise(function (res) { return res(expr); });\n        }\n        else {\n            var script = expr.script.trim().charAt(0) === '{'\n                ? \"(function()\" + expr.script + \")()\"\n                : expr.script;\n            return ExpressionEvaluator.evaluateExpression(script, context);\n        }\n    };\n    ExpressionEvaluator.grabExpressions = function (exprStr) {\n        var tokens = [];\n        var i = 0;\n        var state = State.LITERAL;\n        var literal = \"\";\n        var expr = \"\";\n        var func = \"\";\n        var bracketCount = 0;\n        var parenCount = 0;\n        // go through character by character\n        while (i < exprStr.length) {\n            var currentChar = exprStr[i];\n            switch (state) {\n                case State.LITERAL:\n                    if (currentChar === \"$\" && exprStr[i + 1] === \"(\") {\n                        // start expression and push past literal\n                        if (literal) {\n                            tokens.push({ type: \"literal\", value: literal });\n                            literal = \"\";\n                        }\n                        i++;\n                        expr = \"\";\n                        state = State.EXPR;\n                    }\n                    else if (currentChar === \"$\" && exprStr[i + 1] === \"{\") {\n                        // start expression and push past literal\n                        if (literal) {\n                            tokens.push({ type: \"literal\", value: literal });\n                            literal = \"\";\n                        }\n                        i++;\n                        func = \"\";\n                        state = State.FUNC;\n                    }\n                    else if (currentChar === \"\\\\\" && exprStr[i + 1] === \"$\") {\n                        literal += \"\\\\$\";\n                        i++;\n                    }\n                    else {\n                        literal += currentChar;\n                    }\n                    break;\n                case State.EXPR:\n                    switch (currentChar) {\n                        case \"(\":\n                            expr += currentChar;\n                            parenCount++;\n                            break;\n                        case \")\":\n                            if (parenCount === 0) {\n                                tokens.push({ type: \"expr\", value: expr });\n                                state = State.LITERAL;\n                            }\n                            else {\n                                expr += currentChar;\n                                parenCount--;\n                            }\n                            break;\n                        default:\n                            expr += currentChar;\n                    }\n                    break;\n                case State.FUNC:\n                    switch (currentChar) {\n                        case \"{\":\n                            func += currentChar;\n                            bracketCount++;\n                            break;\n                        case \"}\":\n                            if (bracketCount === 0) {\n                                tokens.push({ type: \"func\", value: func });\n                                state = State.LITERAL;\n                            }\n                            else {\n                                func += currentChar;\n                                bracketCount--;\n                            }\n                            break;\n                        default:\n                            func += currentChar;\n                            break;\n                    }\n                    break;\n            }\n            i++;\n        }\n        if (state === State.LITERAL && literal.length > 0) {\n            tokens.push({ type: \"literal\", value: literal });\n        }\n        if (state === State.EXPR || state === State.FUNC) {\n            // if expression is invalid, treat the whole thing as a literal\n            tokens = [{ value: exprStr, type: \"literal\" }];\n        }\n        return tokens;\n    };\n    ExpressionEvaluator.evaluateExpression = null;\n    ExpressionEvaluator.libraries = [];\n    return ExpressionEvaluator;\n}());\nexports.ExpressionEvaluator = ExpressionEvaluator;\nvar State;\n(function (State) {\n    State[State[\"LITERAL\"] = 0] = \"LITERAL\";\n    State[State[\"FUNC\"] = 1] = \"FUNC\";\n    State[State[\"EXPR\"] = 2] = \"EXPR\";\n})(State || (State = {}));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/helpers/ExpressionEvaluator.js\n// module id = 17\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ValidationBase_1 = require(\"../helpers/validation/ValidationBase\");\nvar UnimplementedMethodException_1 = require(\"../helpers/UnimplementedMethodException\");\nvar RequirementBaseModel_1 = require(\"./RequirementBaseModel\");\nvar StepModel = /** @class */ (function (_super) {\n    __extends(StepModel, _super);\n    function StepModel(loc, eventHub) {\n        var _this = _super.call(this, loc) || this;\n        _this.isVisible = true;\n        _this.runPath = \"\";\n        _this.hints = [];\n        _this.customProps = {};\n        _this.eventHub = eventHub;\n        return _this;\n    }\n    Object.defineProperty(StepModel.prototype, \"label\", {\n        get: function () {\n            return this._label;\n        },\n        set: function (value) {\n            this._label = value;\n            this.eventHub.emit(\"step.change\", this);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(StepModel.prototype, \"inAsMap\", {\n        get: function () {\n            return this.in.reduce(function (acc, curr) {\n                return __assign({}, acc, (_a = {}, _a[curr.id] = curr, _a));\n                var _a;\n            }, {});\n        },\n        enumerable: true,\n        configurable: true\n    });\n    StepModel.prototype.setRunProcess = function (process) {\n        new UnimplementedMethodException_1.UnimplementedMethodException(\"setRunProcess\", \"StepModel\");\n    };\n    Object.defineProperty(StepModel.prototype, \"connectionId\", {\n        get: function () {\n            return this.id;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    StepModel.prototype.compareInPorts = function (isUpdate) {\n        if (isUpdate === void 0) { isUpdate = false; }\n    };\n    StepModel.prototype.compareOutPorts = function (isUpdate) {\n        if (isUpdate === void 0) { isUpdate = false; }\n    };\n    StepModel.prototype.serializeEmbedded = function () {\n        new UnimplementedMethodException_1.UnimplementedMethodException(\"serializeEmbedded\", \"StepModel\");\n    };\n    StepModel.prototype.addHint = function (hint) {\n        new UnimplementedMethodException_1.UnimplementedMethodException(\"addHint\", \"WorkflowModel\");\n        return null;\n    };\n    StepModel.prototype.createReq = function (req, constructor, loc, hint) {\n        var _this = this;\n        if (hint === void 0) { hint = false; }\n        var reqModel;\n        var property = hint ? \"hints\" : \"requirements\";\n        loc = loc || this.loc + \".\" + property + \"[\" + this[property].length + \"]\";\n        reqModel = new RequirementBaseModel_1.RequirementBaseModel(req, constructor, loc);\n        reqModel.isHint = hint;\n        this[property].push(reqModel);\n        reqModel.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        return reqModel;\n    };\n    StepModel.prototype.serialize = function () {\n        new UnimplementedMethodException_1.UnimplementedMethodException(\"serialize\", \"StepModel\");\n    };\n    StepModel.prototype.deserialize = function (attr) {\n        new UnimplementedMethodException_1.UnimplementedMethodException(\"deserialize\", \"StepModel\");\n    };\n    StepModel.portDifference = function (stepPorts, runParameters) {\n        var inserted = []; // contains only InputParamModels from run.inputs\n        var remaining = []; // contains whatever is left from inPorts that's still in run.inputs\n        var removed = stepPorts.slice(); // contains what isn't in run.inputs\n        var _loop_1 = function (i) {\n            var index = removed.findIndex(function (inp) { return inp.id === runParameters[i].id; });\n            if (index === -1) {\n                inserted.push(runParameters[i]);\n            }\n            else {\n                remaining = remaining.concat(removed.splice(index, 1));\n            }\n        };\n        for (var i = 0; i < runParameters.length; i++) {\n            _loop_1(i);\n        }\n        return [inserted, remaining, removed];\n    };\n    return StepModel;\n}(ValidationBase_1.ValidationBase));\nexports.StepModel = StepModel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/generic/StepModel.js\n// module id = 18\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ValidationBase_1 = require(\"../helpers/validation/ValidationBase\");\nvar UnimplementedMethodException_1 = require(\"../helpers/UnimplementedMethodException\");\nvar constants_1 = require(\"../helpers/constants\");\nvar WorkflowStepInputModel = /** @class */ (function (_super) {\n    __extends(WorkflowStepInputModel, _super);\n    function WorkflowStepInputModel(loc) {\n        var _this = _super.call(this, loc) || this;\n        _this.source = [];\n        _this.fileTypes = [];\n        _this.isVisible = false;\n        _this.customProps = {};\n        return _this;\n    }\n    Object.defineProperty(WorkflowStepInputModel.prototype, \"connectionId\", {\n        /**\n         * The connectionId used within the graph, prefix with \"in/\" because it refers to the\n         */\n        get: function () {\n            return \"\" + constants_1.STEP_INPUT_CONNECTION_PREFIX + this.parentStep.id + \"/\" + this.id;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(WorkflowStepInputModel.prototype, \"destinationId\", {\n        /**\n         * The input's ID for scatter\n         * @returns {string}\n         */\n        get: function () {\n            return this.parentStep.id + \"/\" + this.id;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(WorkflowStepInputModel.prototype, \"status\", {\n        get: function () {\n            //  A port is displayed on canvas (if it has connections or\n            // if it is required file, by default)\n            if (this.isVisible)\n                return \"port\";\n            // Neither included in ports nor \"exposed\"\n            if (!this.source.length)\n                return \"editable\";\n            // An in port is \"exposed\" when it isn't visible but has\n            // a workflow input to which it is solely connected\n            if (this.source.length === 1)\n                return \"exposed\";\n        },\n        enumerable: true,\n        configurable: true\n    });\n    WorkflowStepInputModel.prototype.serialize = function () {\n        new UnimplementedMethodException_1.UnimplementedMethodException(\"serialize\");\n    };\n    WorkflowStepInputModel.prototype.deserialize = function (attr) {\n        new UnimplementedMethodException_1.UnimplementedMethodException(\"deserialize\");\n    };\n    return WorkflowStepInputModel;\n}(ValidationBase_1.ValidationBase));\nexports.WorkflowStepInputModel = WorkflowStepInputModel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/generic/WorkflowStepInputModel.js\n// module id = 19\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ValidationBase_1 = require(\"../helpers/validation/ValidationBase\");\nvar UnimplementedMethodException_1 = require(\"../helpers/UnimplementedMethodException\");\nvar constants_1 = require(\"../helpers/constants\");\nvar WorkflowStepOutputModel = /** @class */ (function (_super) {\n    __extends(WorkflowStepOutputModel, _super);\n    function WorkflowStepOutputModel() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.fileTypes = [];\n        _this.customProps = {};\n        _this.isVisible = true;\n        return _this;\n    }\n    WorkflowStepOutputModel.prototype.serialize = function () {\n        new UnimplementedMethodException_1.UnimplementedMethodException(\"serialize\");\n    };\n    WorkflowStepOutputModel.prototype.deserialize = function (attr) {\n        new UnimplementedMethodException_1.UnimplementedMethodException(\"deserialize\");\n    };\n    Object.defineProperty(WorkflowStepOutputModel.prototype, \"sourceId\", {\n        /**\n         * ID used for creating connections\n         */\n        get: function () {\n            return this.parentStep.id + \"/\" + this.id;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(WorkflowStepOutputModel.prototype, \"connectionId\", {\n        /**\n         * ID used for graph\n         */\n        get: function () {\n            return \"\" + constants_1.STEP_OUTPUT_CONNECTION_PREFIX + this.parentStep.id + \"/\" + this.id;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return WorkflowStepOutputModel;\n}(ValidationBase_1.ValidationBase));\nexports.WorkflowStepOutputModel = WorkflowStepOutputModel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/generic/WorkflowStepOutputModel.js\n// module id = 20\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CommandLineUtils_1 = require(\"../helpers/CommandLineUtils\");\nvar EventHub_1 = require(\"../helpers/EventHub\");\nvar JobHelper_1 = require(\"../helpers/JobHelper\");\nvar UnimplementedMethodException_1 = require(\"../helpers/UnimplementedMethodException\");\nvar utils_1 = require(\"../helpers/utils\");\nvar ErrorCode_1 = require(\"../helpers/validation/ErrorCode\");\nvar ValidationBase_1 = require(\"../helpers/validation/ValidationBase\");\nvar CommandInputParameterModel_1 = require(\"./CommandInputParameterModel\");\nvar CommandOutputParameterModel_1 = require(\"./CommandOutputParameterModel\");\nvar CommandLineToolModel = /** @class */ (function (_super) {\n    __extends(CommandLineToolModel, _super);\n    function CommandLineToolModel(loc) {\n        var _this = _super.call(this, loc || \"document\") || this;\n        _this[\"class\"] = \"CommandLineTool\";\n        // CWL PROPERTIES //\n        _this.baseCommand = [];\n        _this.inputs = [];\n        _this.outputs = [];\n        _this.arguments = [];\n        _this.requirements = [];\n        _this.hints = [];\n        _this.successCodes = [];\n        _this.temporaryFailCodes = [];\n        _this.permanentFailCodes = [];\n        /** Set of all expressions the tool contains */\n        _this.expressions = new Set();\n        /** Array of all validation processes that are currently occurring */\n        _this.validationPromises = [];\n        /** Dummy job.inputs value to be used in command line generation */\n        _this.jobInputs = {};\n        /** Dummy job.runtime value to be used in command line generation */\n        _this.runtime = {};\n        // MODEL HELPERS //\n        /** Flag to indicate that the tool has finished deserializing */\n        _this.constructed = false;\n        /** Custom properties that weren't serialized */\n        _this.customProps = {};\n        /** Function which is called when the command line is changed */\n        _this.commandLineWatcher = function () {\n        };\n        _this.eventHub = new EventHub_1.EventHub([\n            \"input.create\",\n            \"input.remove\",\n            \"input.change\",\n            \"input.change.id\",\n            \"io.change.type\",\n            \"output.create\",\n            \"output.remove\",\n            \"output.change.id\",\n            \"argument.create\",\n            \"argument.remove\",\n            \"field.create\",\n            \"field.remove\",\n            \"validate\",\n            \"binding.shellQuote\",\n            \"expression.create\",\n            \"expression.change\",\n            \"expression.serialize\",\n            \"output.metadata.inherit\"\n        ]);\n        return _this;\n    }\n    // EXPRESSION CONTEXT //\n    CommandLineToolModel.prototype.setJobInputs = function (inputs) {\n        this.jobInputs = inputs || JobHelper_1.JobHelper.getNullJobInputs(this);\n        this.validateAllExpressions();\n        this.updateCommandLine();\n    };\n    // EVENT HANDLING //\n    CommandLineToolModel.prototype.on = function (event, handler) {\n        return {\n            dispose: this.eventHub.on(event, handler)\n        };\n    };\n    CommandLineToolModel.prototype.off = function (event, handler) {\n        this.eventHub.off(event, handler);\n    };\n    CommandLineToolModel.prototype.initializeJobWatchers = function () {\n        var _this = this;\n        this.eventHub.on(\"input.change.id\", function (data) {\n            var root = _this.jobInputs;\n            // check if port is a field (nested structure)\n            if (data.port.isField) {\n                root = _this.findFieldRoot(data.port, root);\n                if (Array.isArray(root)) {\n                    root.forEach(function (obj) {\n                        obj[data.newId] = obj[data.oldId] || JobHelper_1.JobHelper.generateMockJobData(data.port);\n                        delete obj[data.oldId];\n                    });\n                    return;\n                }\n            }\n            // root is the object which holds changed input, either jobInputs or a record\n            root[data.newId] = root[data.oldId] || JobHelper_1.JobHelper.generateMockJobData(data.port);\n            delete root[data.oldId];\n            _this.updateCommandLine();\n        });\n        this.eventHub.on(\"io.change.type\", function (loc) {\n            // make sure loc is within this tree and that belongs to one of the inputs\n            if (loc.search(_this.loc) === 0 && loc.search(\"inputs\") > -1) {\n                // remove root part of loc and ignore type part of loc\n                loc = loc.substr(_this.loc.length).replace(/type$/, \"\");\n                // find port based on its loc\n                var port = utils_1.fetchByLoc(_this, loc);\n                if (!port) {\n                    // newly added inputs will trigger this event before they are added to tool\n                    return;\n                }\n                var root = _this.jobInputs;\n                if (port.isField) {\n                    root = _this.findFieldRoot(port, root);\n                    if (Array.isArray(root)) {\n                        for (var i = 0; i < root.length; i++) {\n                            // add mock value of field to each record in array\n                            root[i][port.id] = JobHelper_1.JobHelper.generateMockJobData(port);\n                        }\n                        _this.updateCommandLine();\n                        return;\n                    }\n                }\n                root[port.id] = JobHelper_1.JobHelper.generateMockJobData(port);\n                _this.updateCommandLine();\n            }\n        });\n        this.eventHub.on(\"input.remove\", function (port) {\n            delete _this.jobInputs[port.id];\n            _this.updateCommandLine();\n        });\n        this.eventHub.on(\"field.remove\", function (port) {\n            if (port instanceof CommandInputParameterModel_1.CommandInputParameterModel) {\n                var root = _this.findFieldRoot(port, _this.jobInputs);\n                if (Array.isArray(root)) {\n                    root.forEach(function (obj) { return delete obj[port.id]; });\n                }\n                else {\n                    delete root[port.id];\n                }\n                _this.updateCommandLine();\n            }\n        });\n        this.eventHub.on(\"input.create\", function (port) {\n            _this.jobInputs[port.id] = JobHelper_1.JobHelper.generateMockJobData(port);\n            _this.updateCommandLine();\n        });\n        this.eventHub.on(\"field.create\", function (port) {\n            if (port instanceof CommandInputParameterModel_1.CommandInputParameterModel) {\n                var root = _this.findFieldRoot(port, _this.jobInputs);\n                // in case parent is array of records, not a single record\n                if (Array.isArray(root)) {\n                    for (var i = 0; i < root.length; i++) {\n                        // add mock value of field to each record in array\n                        root[i][port.id] = JobHelper_1.JobHelper.generateMockJobData(port);\n                    }\n                }\n                else {\n                    // parent is single record, add mock value of field to that record\n                    root[port.id] = JobHelper_1.JobHelper.generateMockJobData(port);\n                }\n                _this.updateCommandLine();\n            }\n        });\n    };\n    CommandLineToolModel.prototype.initializeExprWatchers = function () {\n        var _this = this;\n        this.eventHub.on(\"expression.create\", function (expr) {\n            _this.expressions.add(expr);\n            if (_this.constructed) {\n                _this.validationPromises.push(_this.validateExpression(expr));\n            }\n        });\n        this.eventHub.on(\"expression.change\", function (expr) {\n            _this.validationPromises.push(_this.validateExpression(expr));\n        });\n    };\n    CommandLineToolModel.prototype.validateExpression = function (expression) {\n        var input;\n        if (/inputs|outputs/.test(expression.loc)) {\n            var loc = /.*(?:inputs\\[\\d+]|.*outputs\\[\\d+]|.*fields\\[\\d+])/\n                .exec(expression.loc)[0] // take the first match\n                .replace(\"document\", \"\"); // so loc is relative to root\n            input = utils_1.fetchByLoc(this, loc);\n        }\n        return expression.validate(this.getContext(input));\n    };\n    CommandLineToolModel.prototype.validateAllExpressions = function () {\n        var _this = this;\n        this.expressions.forEach(function (e) {\n            _this.validationPromises.push(_this.validateExpression(e));\n        });\n    };\n    // DOCUMENT TREE TRAVERSAL //\n    CommandLineToolModel.prototype.findFieldRoot = function (port, base) {\n        // find ancestor that is in the inputs root, save ancestors\n        var isField = true;\n        // creating a path to the input inside the job, ignoring the id of the actual input for now\n        var path = [];\n        // location of the current port we're looking at\n        var loc = port.loc;\n        while (isField) {\n            var parent_1 = this.findFieldParent(loc);\n            // add parent id to the beginning of the path, we're traversing up the tree\n            // keeping track if type is array so we can gather all child nodes where port has a value\n            path.unshift({ id: parent_1.id, isArray: parent_1.type.type === \"array\" });\n            // continue traversing if parent is a field\n            isField = parent_1.isField;\n            // parent becomes port we're looking at\n            loc = parent_1.loc;\n        }\n        // traverse jobInputs with the ids generated from field parents, find root of field\n        var traversePath = function (path, root) {\n            // null is if the record itself is set to null,\n            // undefined is if the id isn't even defined in the job object\n            if (root === null || root === undefined) {\n                return null;\n            }\n            // starting from the root of the tree, going down each level till we find the port\n            if (path.length === 0) {\n                return root;\n            }\n            // if node is an array, recursively traverse all it's elements\n            var part = path[0];\n            if (part.isArray) {\n                if (!Array.isArray(root[part.id])) {\n                    return null;\n                }\n                // flatten the nested array, if it contains arrays itself\n                return utils_1.flatten(root[part.id].map(function (obj) { return traversePath(path.slice(1), obj); }));\n            }\n            // traverse the path for the root element\n            return traversePath(path.slice(1), root[part.id]);\n        };\n        return traversePath(path, base);\n    };\n    CommandLineToolModel.prototype.findFieldParent = function (loc) {\n        // remove base of location that's the same as this location\n        // remove the \".type.fields[#]\" which signifies the field so the loc points to its parent\n        // before: \"document.inputs[3].type.fields[3]\n        // after: \".inputs[3]\"\n        loc = loc.substr(this.loc.length).replace(/\\.type\\.fields\\[\\d+]$/, \"\");\n        return utils_1.fetchByLoc(this, loc);\n    };\n    // CRUD HELPER METHODS //\n    CommandLineToolModel.prototype.changeIOId = function (port, id) {\n        if (port.id === id) {\n            return;\n        }\n        var oldId = port.id;\n        var type;\n        var scope;\n        // emit set proper type so event can be emitted and validity can be scoped\n        if (port instanceof CommandInputParameterModel_1.CommandInputParameterModel) {\n            type = \"input\";\n        }\n        else if (port instanceof CommandOutputParameterModel_1.CommandOutputParameterModel) {\n            type = \"output\";\n        }\n        if (port.isField) {\n            scope = this.findFieldParent(port.loc).type.fields;\n        }\n        // verify that the new ID can be set\n        utils_1.checkIdValidity(id, scope || this.inputs.concat(this.outputs));\n        port.clearIssue(ErrorCode_1.ErrorCode.ID_ALL);\n        port.id = id;\n        if (utils_1.isType(port, [\"record\", \"enum\"])) {\n            port.type.name = id;\n        }\n        // emit change event so CLT subclasses can change job values,\n        // emits \"input.change.id\" or \"output.change.id\"\n        this.eventHub.emit(type + \".change.id\", { port: port, oldId: oldId, newId: port.id });\n    };\n    CommandLineToolModel.prototype.addHint = function (hint) {\n        new UnimplementedMethodException_1.UnimplementedMethodException(\"addHint\", \"CommandLineToolModel\");\n        return null;\n    };\n    CommandLineToolModel.prototype.updateStream = function (stream, type) {\n        new UnimplementedMethodException_1.UnimplementedMethodException(\"updateStream\", \"CommandLineToolModel\");\n    };\n    CommandLineToolModel.prototype._addOutput = function (outputConstructor, output) {\n        var _this = this;\n        if (output === void 0) { output = { id: null }; }\n        var loc = utils_1.incrementLastLoc(this.outputs, this.loc + \".outputs\");\n        output.id = output.id || utils_1.getNextAvailableId(\"output\", this.inputs.concat(this.outputs));\n        var o = new outputConstructor(output, loc, this.eventHub);\n        o.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        try {\n            utils_1.checkIdValidity(o.id, this.inputs.concat(this.outputs));\n        }\n        catch (ex) {\n            this.setIssue((_a = {},\n                _a[o.loc + \".id\"] = {\n                    type: \"error\",\n                    message: ex.message,\n                    code: ex.code\n                },\n                _a));\n        }\n        this.outputs.push(o);\n        return o;\n        var _a;\n    };\n    CommandLineToolModel.prototype.addOutput = function (output) {\n        new UnimplementedMethodException_1.UnimplementedMethodException(\"addOutput\", \"CommandLineToolModel\");\n        return null;\n    };\n    CommandLineToolModel.prototype.removeOutput = function (output) {\n        var index = this.outputs.indexOf(output);\n        if (index < 0) {\n            return;\n        }\n        this.outputs[index].clearIssue(ErrorCode_1.ErrorCode.ALL);\n        this.outputs[index].clearListeners();\n        this.outputs.splice(index, 1);\n        // start at the index and update location of all arguments after it\n        for (var i = index; i < this.outputs.length; i++) {\n            this.outputs[i].updateLoc(this.loc + \".outputs[\" + i + \"]\");\n        }\n        this.eventHub.emit(\"output.remove\", output);\n    };\n    CommandLineToolModel.prototype._addInput = function (inputConstructor, input) {\n        var _this = this;\n        if (input === void 0) { input = { id: null }; }\n        var loc = utils_1.incrementLastLoc(this.inputs, this.loc + \".inputs\");\n        input.id = input.id || utils_1.getNextAvailableId(\"input\", this.inputs.concat(this.outputs));\n        var i = new inputConstructor(input, loc, this.eventHub);\n        i.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        try {\n            utils_1.checkIdValidity(i.id, this.inputs.concat(this.outputs));\n        }\n        catch (ex) {\n            this.setIssue((_a = {},\n                _a[i.loc + \".id\"] = {\n                    type: \"error\",\n                    message: ex.message,\n                    code: ex.code\n                },\n                _a));\n        }\n        this.inputs.push(i);\n        this.eventHub.emit(\"input.create\", i);\n        return i;\n        var _a;\n    };\n    CommandLineToolModel.prototype.addInput = function (input) {\n        new UnimplementedMethodException_1.UnimplementedMethodException(\"addInput\", \"CommandLineToolModel\");\n        return null;\n    };\n    CommandLineToolModel.prototype.removeInput = function (input) {\n        var index = this.inputs.indexOf(input);\n        if (index < 0) {\n            return;\n        }\n        this.inputs[index].clearIssue(ErrorCode_1.ErrorCode.ALL);\n        this.inputs[index].clearListeners();\n        this.inputs.splice(index, 1);\n        // start at the index and update location of all arguments after it\n        for (var i = index; i < this.inputs.length; i++) {\n            this.inputs[i].updateLoc(this.loc + \".inputs[\" + i + \"]\");\n        }\n        this.eventHub.emit(\"input.remove\", input);\n    };\n    CommandLineToolModel.prototype.addArgument = function (arg) {\n        new UnimplementedMethodException_1.UnimplementedMethodException(\"addArgument\", \"CommandLineToolModel\");\n        return null;\n    };\n    CommandLineToolModel.prototype.removeArgument = function (arg) {\n        var index = this.arguments.indexOf(arg);\n        if (index < 0) {\n            return;\n        }\n        this.arguments[index].clearIssue(ErrorCode_1.ErrorCode.ALL);\n        this.arguments[index].clearListeners();\n        this.arguments.splice(index, 1);\n        // start at the index and update location of all arguments after it\n        for (var i = index; i < this.arguments.length; i++) {\n            this.arguments[i].updateLoc(this.loc + \".arguments[\" + i + \"]\");\n        }\n        this.eventHub.emit(\"argument.remove\", arg);\n    };\n    CommandLineToolModel.prototype.addBaseCommand = function (cmd) {\n        new UnimplementedMethodException_1.UnimplementedMethodException(\"addBaseCommand\", \"CommandLineToolModel\");\n        return null;\n    };\n    CommandLineToolModel.prototype.setRequirement = function (req, hint) {\n        new UnimplementedMethodException_1.UnimplementedMethodException(\"setRequirement\", \"CommandLineToolModel\");\n    };\n    // COMMAND LINE //\n    CommandLineToolModel.prototype.updateCommandLine = function () {\n        var _this = this;\n        if (this.constructed) {\n            this.generateCommandLineParts().then(function (res) {\n                _this.commandLineWatcher(res);\n            });\n        }\n    };\n    CommandLineToolModel.prototype.onCommandLineResult = function (fn) {\n        this.commandLineWatcher = fn;\n    };\n    CommandLineToolModel.prototype.generateCommandLine = function () {\n        return this.generateCommandLineParts().then(function (parts) {\n            var res = parts.filter(function (p) { return !!p.value; }).map(function (p) { return p.value; }).join(\" \");\n            return res.trim();\n        });\n    };\n    CommandLineToolModel.prototype.generateCommandLineParts = function () {\n        return CommandLineUtils_1.generateCommandLineParts(this, this.jobInputs, this.runtime);\n    };\n    // VALIDATION //\n    CommandLineToolModel.prototype.validate = function () {\n        var _this = this;\n        return Promise.all(this.validationPromises).then(function () {\n            _this.validationPromises = [];\n        });\n    };\n    return CommandLineToolModel;\n}(ValidationBase_1.ValidationBase));\nexports.CommandLineToolModel = CommandLineToolModel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/generic/CommandLineToolModel.js\n// module id = 21\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ValidationBase_1 = require(\"../helpers/validation/ValidationBase\");\nvar UnimplementedMethodException_1 = require(\"../helpers/UnimplementedMethodException\");\nvar ErrorCode_1 = require(\"../helpers/validation/ErrorCode\");\nvar CommandArgumentModel = /** @class */ (function (_super) {\n    __extends(CommandArgumentModel, _super);\n    function CommandArgumentModel(loc, eventHub) {\n        var _this = _super.call(this, loc) || this;\n        _this.eventHub = eventHub;\n        _this.hasBinding = false;\n        _this.customProps = {};\n        return _this;\n    }\n    Object.defineProperty(CommandArgumentModel.prototype, \"prefix\", {\n        get: function () {\n            return this.binding ? this.binding.prefix : undefined;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CommandArgumentModel.prototype, \"position\", {\n        get: function () {\n            return this.binding ? this.binding.position || 0 : 0;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CommandArgumentModel.prototype, \"separate\", {\n        get: function () {\n            return this.binding ? this.binding.separate !== false : true;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CommandArgumentModel.prototype, \"itemSeparator\", {\n        get: function () {\n            return this.binding ? this.binding.itemSeparator : undefined;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CommandArgumentModel.prototype, \"valueFrom\", {\n        get: function () {\n            return this.binding ? this.binding.valueFrom : undefined;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CommandArgumentModel.prototype, \"shellQuote\", {\n        // if binding doesn't have shellQuote, it will return undefined anyway\n        get: function () {\n            return this.binding ? this.binding.shellQuote : undefined;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CommandArgumentModel.prototype.toggleBinding = function (state) {\n        new UnimplementedMethodException_1.UnimplementedMethodException(\"toggleBinding\", \"CommandArgumentModel\");\n    };\n    CommandArgumentModel.prototype.updatePrimitive = function (str) {\n        new UnimplementedMethodException_1.UnimplementedMethodException(\"updatePrimitive\", \"CommandArgumentModel\");\n    };\n    CommandArgumentModel.prototype.updateBinding = function (binding) {\n        new UnimplementedMethodException_1.UnimplementedMethodException(\"updateBinding\", \"CommandArgumentModel\");\n    };\n    CommandArgumentModel.prototype.toString = function () {\n        new UnimplementedMethodException_1.UnimplementedMethodException(\"toString\", \"CommandArgumentModel\");\n        return null;\n    };\n    CommandArgumentModel.prototype.serialize = function () {\n        new UnimplementedMethodException_1.UnimplementedMethodException(\"serialize\", \"CommandArgumentModel\");\n        return null;\n    };\n    CommandArgumentModel.prototype.deserialize = function (attr) {\n        new UnimplementedMethodException_1.UnimplementedMethodException(\"deserialize\", \"CommandArgumentModel\");\n    };\n    CommandArgumentModel.prototype.validate = function (context) {\n        var _this = this;\n        this.clearIssue(ErrorCode_1.ErrorCode.EXPR_ALL);\n        if (this.hasBinding) {\n            return this.binding.validate(context);\n        }\n        return new Promise(function (res) { res(_this.issues); });\n    };\n    return CommandArgumentModel;\n}(ValidationBase_1.ValidationBase));\nexports.CommandArgumentModel = CommandArgumentModel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/generic/CommandArgumentModel.js\n// module id = 22\n// module chunks = 0","\"use strict\";\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar V1CommandInputParameterModel_1 = require(\"../v1.0/V1CommandInputParameterModel\");\nvar V1WorkflowInputParameterModel_1 = require(\"../v1.0/V1WorkflowInputParameterModel\");\nvar JobHelper = /** @class */ (function () {\n    function JobHelper() {\n    }\n    JobHelper.generateMockJobData = function (input) {\n        var type = input.type.type;\n        var items = input.type.items;\n        var name = input.id;\n        var symbols = input.type.symbols;\n        var version = input instanceof V1CommandInputParameterModel_1.V1CommandInputParameterModel || input instanceof V1WorkflowInputParameterModel_1.V1WorkflowInputParameterModel ? \"v1.0\" : \"sbg:draft-2\";\n        /**\n         * Returns a random integer between min (included) and max (excluded)\n         *\n         * @param {number} min\n         * @param {number} max\n         * @returns {number}\n         */\n        function getRandomInt(min, max) {\n            return Math.floor(Math.random() * (max - min)) + min;\n        }\n        /**\n         * Returns a random floating number between min (inclusive) and max (exclusive)\n         *\n         * @param {number} min\n         * @param {number} max\n         * @returns {float}\n         */\n        function getRandomFloat(min, max) {\n            return Math.random() * (max - min) + min;\n        }\n        var file = function (name) {\n            return {\n                path: '/path/to/' + name + '.ext',\n                'class': 'File',\n                size: 0,\n                contents: \"file contents\",\n                secondaryFiles: []\n            };\n        };\n        var map = {\n            File: file(name),\n            Directory: { path: \"/path/to/\" + name, \"class\": \"Directory\", basename: name },\n            'enum': symbols ? symbols[0] : name,\n            string: name + '-string-value',\n            int: getRandomInt(0, 11),\n            float: getRandomFloat(0, 11),\n            boolean: true,\n            record: {},\n            map: {},\n            array: {\n                File: [\n                    file(name + \"-1\"),\n                    file(name + \"-2\")\n                ],\n                Directory: [\n                    {\n                        path: \"/path/to/\" + name,\n                        \"class\": \"Directory\",\n                        basename: name\n                    },\n                    {\n                        path: \"/path/to/\" + name,\n                        \"class\": \"Directory\",\n                        basename: name\n                    }\n                ],\n                string: [name + '-string-value-1', name + '-string-value-2'],\n                int: [getRandomInt(0, 11), getRandomInt(0, 11)],\n                float: [getRandomFloat(0, 11), getRandomFloat(0, 11)],\n                record: [{}],\n                map: [{}],\n                'enum': [symbols ? symbols[0] || \"\" : name || \"\"],\n                boolean: [true, true],\n            }\n        };\n        var val = map[type];\n        if (type === \"array\") {\n            val = val[items];\n            if (items === \"record\" && input.type.fields) {\n                val = [];\n                var obj_1 = {};\n                input.type.fields.forEach(function (field) {\n                    obj_1[field.id] = JobHelper.generateMockJobData(field);\n                });\n                // Objects must be cloned because of job management and later manipulation\n                var obj1 = JSON.parse(JSON.stringify(obj_1));\n                var obj2 = JSON.parse(JSON.stringify(obj_1));\n                val.push(obj1);\n                val.push(obj2);\n            }\n        }\n        if (type === \"record\" && input.type.fields) {\n            input.type.fields.forEach(function (field) {\n                val[field.id] = JobHelper.generateMockJobData(field);\n            });\n        }\n        if (type === \"File\" && version === \"v1.0\") {\n            val = __assign({}, val, { basename: name + \".ext\", nameroot: name, nameext: \".ext\" });\n        }\n        return val !== undefined ? val : null;\n    };\n    JobHelper.getJobInputs = function (app) {\n        var job = {};\n        app.inputs.forEach(function (input) {\n            job[input.id] = JobHelper.generateMockJobData(input);\n        });\n        return job;\n    };\n    JobHelper.getNullJobInputs = function (app) {\n        var job = {};\n        app.inputs.forEach(function (input) {\n            job[input.id] = null;\n        });\n        return job;\n    };\n    return JobHelper;\n}());\nexports.JobHelper = JobHelper;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/helpers/JobHelper.js\n// module id = 23\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar models_1 = require(\"cwlts/models\");\nvar html_utils_1 = require(\"../utils/html-utils\");\nvar svg_utils_1 = require(\"../utils/svg-utils\");\nvar io_port_1 = require(\"./io-port\");\nvar GraphNode = /** @class */ (function () {\n    function GraphNode(position, dataModel) {\n        this.dataModel = dataModel;\n        this.position = { x: 0, y: 0 };\n        this.dataModel = dataModel;\n        Object.assign(this.position, position);\n    }\n    GraphNode.makeIconFragment = function (model) {\n        var iconStr = \"\";\n        if (model instanceof models_1.StepModel && model.run) {\n            if (model.run.class === \"Workflow\") {\n                iconStr = this.workflowIconSvg;\n            }\n            else if (model.run.class === \"CommandLineTool\") {\n                iconStr = this.toolIconSvg;\n            }\n        }\n        else if (model instanceof models_1.WorkflowInputParameterModel && model.type) {\n            if (model.type.type === \"File\" || (model.type.type === \"array\" && model.type.items === \"File\")) {\n                iconStr = this.fileInputIconSvg;\n            }\n            else {\n                iconStr = this.inputIconSvg;\n            }\n        }\n        else if (model instanceof models_1.WorkflowOutputParameterModel && model.type) {\n            if (model.type.type === \"File\" || (model.type.type === \"array\" && model.type.items === \"File\")) {\n                iconStr = this.fileOutputIconSvg;\n            }\n            else {\n                iconStr = this.outputIconSvg;\n            }\n        }\n        return iconStr;\n    };\n    GraphNode.makeTemplate = function (dataModel, labelScale) {\n        if (labelScale === void 0) { labelScale = 1; }\n        var x = ~~(dataModel.customProps && dataModel.customProps[\"sbg:x\"]);\n        var y = ~~(dataModel.customProps && dataModel.customProps[\"sbg:y\"]);\n        var nodeTypeClass = \"step\";\n        if (dataModel instanceof models_1.WorkflowInputParameterModel) {\n            nodeTypeClass = \"input\";\n        }\n        else if (dataModel instanceof models_1.WorkflowOutputParameterModel) {\n            nodeTypeClass = \"output\";\n        }\n        var inputs = (dataModel[\"in\"] || []).filter(function (p) { return p.isVisible; });\n        var outputs = (dataModel[\"out\"] || []).filter(function (p) { return p.isVisible; });\n        var maxPorts = Math.max(inputs.length, outputs.length);\n        var radius = GraphNode.radius + maxPorts * io_port_1.IOPort.radius;\n        var typeClass = \"\";\n        var itemsClass = \"\";\n        if (dataModel.type) {\n            typeClass = \"type-\" + dataModel.type.type;\n            if (dataModel.type.items) {\n                itemsClass = \"items-\" + dataModel.type.items;\n            }\n        }\n        var inputPortTemplates = inputs\n            .sort(function (a, b) { return -a.id.localeCompare(b.id); })\n            .map(function (p, i, arr) { return GraphNode.makePortTemplate(p, \"input\", svg_utils_1.SVGUtils.matrixToTransformAttr(GraphNode.createPortMatrix(arr.length, i, radius, \"input\"))); })\n            .reduce(function (acc, tpl) { return acc + tpl; }, \"\");\n        var outputPortTemplates = outputs\n            .sort(function (a, b) { return -a.id.localeCompare(b.id); })\n            .map(function (p, i, arr) { return GraphNode.makePortTemplate(p, \"output\", svg_utils_1.SVGUtils.matrixToTransformAttr(GraphNode.createPortMatrix(arr.length, i, radius, \"output\"))); })\n            .reduce(function (acc, tpl) { return acc + tpl; }, \"\");\n        return \"\\n            <g tabindex=\\\"-1\\\" class=\\\"node \" + nodeTypeClass + \" \" + typeClass + \" \" + itemsClass + \"\\\"\\n               data-connection-id=\\\"\" + dataModel.connectionId + \"\\\"\\n               transform=\\\"matrix(1, 0, 0, 1, \" + x + \", \" + y + \")\\\"\\n               data-id=\\\"\" + dataModel.id + \"\\\">\\n               \\n                <g class=\\\"core\\\" transform=\\\"matrix(1, 0, 0, 1, 0, 0)\\\">\\n                    <circle cx=\\\"0\\\" cy=\\\"0\\\" r=\\\"\" + radius + \"\\\" class=\\\"outer\\\"></circle>\\n                    <circle cx=\\\"0\\\" cy=\\\"0\\\" r=\\\"\" + radius * .75 + \"\\\" class=\\\"inner\\\"></circle>\\n                    \\n                    \" + GraphNode.makeIconFragment(dataModel) + \"\\n                </g>\\n                \\n                <text transform=\\\"matrix(\" + labelScale + \",0,0,\" + labelScale + \",0,\" + (radius + 30) + \")\\\" class=\\\"title label\\\">\" + html_utils_1.HtmlUtils.escapeHTML(dataModel.label || dataModel.id) + \"</text>\\n                \\n                \" + inputPortTemplates + \"\\n                \" + outputPortTemplates + \"\\n            </g>\\n        \";\n    };\n    GraphNode.makePortTemplate = function (port, type, transform) {\n        if (transform === void 0) { transform = \"matrix(1, 0, 0, 1, 0, 0)\"; }\n        var portClass = type === \"input\" ? \"input-port\" : \"output-port\";\n        var label = port.label || port.id;\n        return \"\\n            <g class=\\\"port \" + portClass + \"\\\" transform=\\\"\" + (transform || \"matrix(1, 0, 0, 1, 0, 0)\") + \"\\\"\\n               data-connection-id=\\\"\" + port.connectionId + \"\\\"\\n               data-port-id=\\\"\" + port.id + \"\\\"\\n            >\\n                <g class=\\\"io-port\\\">\\n                    <circle cx=\\\"0\\\" cy=\\\"0\\\" r=\\\"7\\\" class=\\\"port-handle\\\"></circle>\\n                </g>\\n                <text x=\\\"0\\\" y=\\\"0\\\" transform=\\\"matrix(1,0,0,1,0,0)\\\" class=\\\"label unselectable\\\">\" + label + \"</text>\\n            </g>\\n            \\n        \";\n    };\n    GraphNode.createPortMatrix = function (totalPortLength, portIndex, radius, type) {\n        var availableAngle = 140;\n        var rotationAngle = \n        // Starting rotation angle\n        (-availableAngle / 2) +\n            (\n            // Angular offset by element index\n            (portIndex + 1)\n                // Angle between elements\n                * availableAngle / (totalPortLength + 1));\n        if (type === \"input\") {\n            rotationAngle =\n                // Determines the starting rotation angle\n                180 - (availableAngle / -2)\n                    // Determines the angular offset modifier for the current index\n                    - (portIndex + 1)\n                        // Determines the angular offset\n                        * availableAngle / (totalPortLength + 1);\n        }\n        var matrix = svg_utils_1.SVGUtils.createMatrix();\n        return matrix.rotate(rotationAngle).translate(radius, 0).rotate(-rotationAngle);\n    };\n    GraphNode.patchModelPorts = function (model) {\n        var patch = [{ connectionId: model.connectionId, isVisible: true, id: model.id }];\n        if (model instanceof models_1.WorkflowInputParameterModel) {\n            var copy = Object.create(model);\n            return Object.assign(copy, { out: patch });\n        }\n        else if (model instanceof models_1.WorkflowOutputParameterModel) {\n            var copy = Object.create(model);\n            return Object.assign(copy, { in: patch });\n        }\n        return model;\n    };\n    GraphNode.radius = 30;\n    /**\n     * @FIXME Making icons increases the rendering time by 50-100%. Try embedding the SVG directly.\n     */\n    GraphNode.workflowIconSvg = \"<svg class=\\\"node-icon\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 400.01 399.88\\\" x=\\\"-9\\\" y=\\\"-10\\\" width=\\\"20\\\" height=\\\"20\\\"><title>workflow</title><path d=\\\"M400,200a80,80,0,0,1-140.33,52.53L158.23,303.24a80,80,0,1,1-17.9-35.77l101.44-50.71a80.23,80.23,0,0,1,0-33.52L140.33,132.53a79.87,79.87,0,1,1,17.9-35.77l101.44,50.71A80,80,0,0,1,400,200Z\\\" transform=\\\"translate(0.01 -0.16)\\\"/></svg>\";\n    GraphNode.toolIconSvg = \"<svg class=\\\"node-icon\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 398.39 397.78\\\" x=\\\"-10\\\" y=\\\"-8\\\" width=\\\"20\\\" height=\\\"15\\\"><title>tool2</title><polygon points=\\\"38.77 397.57 0 366 136.15 198.78 0 31.57 38.77 0 200.63 198.78 38.77 397.57\\\"/><rect x=\\\"198.39\\\" y=\\\"347.78\\\" width=\\\"200\\\" height=\\\"50\\\"/></svg>\";\n    GraphNode.fileInputIconSvg = \"<svg class=\\\"node-icon\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 499 462.86\\\" y=\\\"-10\\\" x=\\\"-11\\\" width=\\\"20\\\" height=\\\"20\\\"><title>file_input</title><path d=\\\"M386.06,0H175V58.29l50,50V50H337.81V163.38h25l86.19.24V412.86H225V353.71l-50,50v59.15H499V112.94Zm1.75,113.45v-41l41.1,41.1Z\\\"/><polygon points=\\\"387.81 1.06 387.81 1.75 387.12 1.06 387.81 1.06\\\"/><polygon points=\\\"290.36 231 176.68 344.68 141.32 309.32 194.64 256 0 256 0 206 194.64 206 142.32 153.68 177.68 118.32 290.36 231\\\"/></svg>\";\n    GraphNode.fileOutputIconSvg = \"<svg class=\\\"node-icon\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 499 462.86\\\" x=\\\"-7\\\" y=\\\"-11\\\" width=\\\"20\\\" height=\\\"20\\\"><title>file_output</title><polygon points=\\\"387.81 1.06 387.81 1.75 387.12 1.06 387.81 1.06\\\"/><polygon points=\\\"499 231 385.32 344.68 349.96 309.32 403.28 256 208.64 256 208.64 206 403.28 206 350.96 153.68 386.32 118.32 499 231\\\"/><path d=\\\"M187.81,163.38l77.69.22H324V112.94L211.06,0H0V462.86H324V298.5H274V412.86H50V50H162.81V163.38Zm25-90.92,41.1,41.1-41.1-.11Z\\\"/></svg>\";\n    GraphNode.inputIconSvg = \"<svg class=\\\"node-icon\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 499 365\\\" x=\\\"-11\\\" y=\\\"-10\\\" width=\\\"20\\\" height=\\\"20\\\"><title>type_input</title><g id=\\\"input\\\"><path d=\\\"M316.5,68a181.72,181.72,0,0,0-114.12,40.09L238,143.72a132.5,132.5,0,1,1,1.16,214.39L203.48,393.8A182.5,182.5,0,1,0,316.5,68Z\\\" transform=\\\"translate(0 -68)\\\"/><g id=\\\"Layer_22\\\" data-name=\\\"Layer 22\\\"><g id=\\\"Layer_9_copy_4\\\" data-name=\\\"Layer 9 copy 4\\\"><polygon points=\\\"290.36 182 176.68 295.68 141.32 260.32 194.64 207 0 207 0 157 194.64 157 142.32 104.68 177.68 69.32 290.36 182\\\"/></g></g></g></svg>\";\n    GraphNode.outputIconSvg = \"<svg class=\\\"node-icon\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 500.36 365\\\" x=\\\"-9\\\" y=\\\"-10\\\" width=\\\"20\\\" height=\\\"20\\\"><title>type_output</title><g id=\\\"output\\\"><path d=\\\"M291.95,325.23a134,134,0,0,1-15.76,19,132.5,132.5,0,1,1,0-187.38,133.9,133.9,0,0,1,16.16,19.55l35.81-35.81A182.5,182.5,0,1,0,327.73,361Z\\\" transform=\\\"translate(0 -68)\\\"/><g id=\\\"circle_source_copy\\\" data-name=\\\"circle source copy\\\"><g id=\\\"Layer_22_copy\\\" data-name=\\\"Layer 22 copy\\\"><g id=\\\"Layer_9_copy_5\\\" data-name=\\\"Layer 9 copy 5\\\"><polygon points=\\\"500.36 182 386.68 295.68 351.32 260.32 404.64 207 210 207 210 157 404.64 157 352.32 104.68 387.68 69.32 500.36 182\\\"/></g></g></g></g></svg>\";\n    return GraphNode;\n}());\nexports.GraphNode = GraphNode;\n//# sourceMappingURL=graph-node.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwl-svg/compiled/src/graph/graph-node.js\n// module id = 24\n// module chunks = 0","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./generic\"));\n__export(require(\"./helpers\"));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/index.js\n// module id = 25\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar WorkflowModel_1 = require(\"./WorkflowModel\");\nvar V1WorkflowModel_1 = require(\"../v1.0/V1WorkflowModel\");\nvar SBDraft2WorkflowModel_1 = require(\"../d2sb/SBDraft2WorkflowModel\");\nvar WorkflowFactory = /** @class */ (function () {\n    function WorkflowFactory() {\n    }\n    WorkflowFactory.from = function (workflow, loc) {\n        // check if workflow passed has already been parsed to the model\n        if (workflow instanceof WorkflowModel_1.WorkflowModel)\n            return workflow;\n        if (workflow) {\n            switch (workflow.cwlVersion) {\n                case \"v1.0\":\n                    return new V1WorkflowModel_1.V1WorkflowModel(workflow, loc);\n                case \"sbg:draft-2\":\n                case \"draft-2\":\n                default:\n                    return new SBDraft2WorkflowModel_1.SBDraft2WorkflowModel(workflow, loc);\n            }\n        }\n        return new SBDraft2WorkflowModel_1.SBDraft2WorkflowModel(workflow, loc);\n    };\n    return WorkflowFactory;\n}());\nexports.WorkflowFactory = WorkflowFactory;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/generic/WorkflowFactory.js\n// module id = 26\n// module chunks = 0","\"use strict\";\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ErrorCode_1 = require(\"./validation/ErrorCode\");\n/**\n * Name has to be present even if not initially added because of Avro compatibility\n * @name nameRequirement\n * @link https://docs.oracle.com/cd/E57769_01/html/GettingStartedGuide/avroschemas.html\n */\nvar TypeResolver = /** @class */ (function () {\n    function TypeResolver() {\n    }\n    TypeResolver.resolveType = function (originalType, result) {\n        result = result || {\n            type: null,\n            items: null,\n            fields: null,\n            symbols: null,\n            isNullable: false,\n            isItemOrArray: false,\n            typeBinding: null,\n            name: null,\n            unionType: null\n        };\n        if (originalType === null || originalType === undefined) {\n            result.isNullable = true;\n            return result;\n        }\n        var tmp = originalType;\n        if (typeof originalType.serialize === \"function\") {\n            tmp = originalType.serialize();\n        }\n        var type;\n        // clone type object because it will be sliced and modified later\n        try {\n            type = JSON.parse(JSON.stringify(tmp));\n        }\n        catch (err) {\n            type = __assign({}, tmp);\n            console.error(err);\n        }\n        if (typeof type === 'string') {\n            var matches = /(\\w+)([\\[\\]?]+)/g.exec(type);\n            if (matches) {\n                if (/\\?/.test(matches[2])) {\n                    result.isNullable = true;\n                }\n                if (/\\[]/.test(matches[2])) {\n                    result.type = 'array';\n                    result.items = matches[1];\n                }\n                else {\n                    result.type = matches[1];\n                }\n                return result;\n            }\n            else {\n                result.type = type;\n                return result;\n            }\n        }\n        else if (Array.isArray(type)) {\n            // check if type is required\n            var nullIndex = type.indexOf('null');\n            if (nullIndex > -1) {\n                result.isNullable = true;\n                type.splice(nullIndex, 1);\n            }\n            if (type.length !== 1) {\n                // check if type has only two remaining values\n                if (type.length === 2) {\n                    // resolve types to TypeResolution\n                    var type0 = TypeResolver.resolveType(type[0]);\n                    var type1 = TypeResolver.resolveType(type[1]);\n                    // check if types are actually item and item[]\n                    if (type0.items === type1.type || type1.items === type0.type) {\n                        // remove type which is array for encoding\n                        type0.type === \"array\" ? type.splice(0, 1) : type.splice(1, 1);\n                        result.isItemOrArray = true;\n                    }\n                    else {\n                        result.unionType = type;\n                        throw new ErrorCode_1.ValidityError(\"TypeResolverError: Union types not supported yet. Found type \" + type, ErrorCode_1.ErrorCode.TYPE_UNSUPPORTED);\n                    }\n                }\n                else {\n                    result.unionType = type;\n                    throw new ErrorCode_1.ValidityError(\"TypeResolverError: Union types not supported yet! Found type \" + type, ErrorCode_1.ErrorCode.TYPE_UNSUPPORTED);\n                }\n            }\n            if (typeof type[0] === 'string') {\n                return TypeResolver.resolveType(type[0], result);\n            }\n            else {\n                if (typeof type[0] === 'object') {\n                    return TypeResolver.resolveType(type[0], result);\n                }\n                else {\n                    throw new ErrorCode_1.ValidityError(\"TypeResolverError: expected complex object, instead got \" + type[0], ErrorCode_1.ErrorCode.TYPE_UNSUPPORTED);\n                }\n            }\n        }\n        else if (typeof type === 'object') {\n            if (type.type) {\n                // result type has already been set, pass through is evaluating complex items type\n                if (result.type === \"array\") {\n                    result.items = type.type;\n                }\n                else {\n                    // first pass through, type should be set  on result\n                    result.type = type.type;\n                }\n                switch (type.type) {\n                    case \"array\":\n                        result.typeBinding = type.inputBinding || null;\n                        if (typeof type.items === 'string') {\n                            // primitive types don't need to be reevaluated\n                            result.items = type.items;\n                            return result;\n                        }\n                        else if (Array.isArray(type.items) || type.items.type === \"array\") {\n                            // complex types that aren't currently supported but should be preserved\n                            result.items = type.items;\n                            return result;\n                        }\n                        else {\n                            // complex types should be reevaluated to set fields/symbols/items properties\n                            return TypeResolver.resolveType(type.items, result);\n                        }\n                    case \"record\":\n                        result.fields = type.fields;\n                        result.name = type.name || null;\n                        return result;\n                    case \"enum\":\n                        result.symbols = type.symbols;\n                        result.name = type.name || null;\n                        return result;\n                    case \"string\":\n                    case \"File\":\n                    case \"null\":\n                    case \"boolean\":\n                    case \"int\":\n                    case \"long\":\n                    case \"Directory\":\n                    case \"double\":\n                        return result;\n                    default:\n                        throw new ErrorCode_1.ValidityError(\"TypeResolverError: unmatched complex type, expected 'enum', 'array', or 'record', got '\" + type.type + \"'\", ErrorCode_1.ErrorCode.TYPE_UNSUPPORTED);\n                }\n            }\n            else {\n                throw new ErrorCode_1.ValidityError(\"TypeResolverError: expected complex object with type field, instead got \" + JSON.stringify(type), ErrorCode_1.ErrorCode.TYPE_UNSUPPORTED);\n            }\n        }\n        else {\n            throw new ErrorCode_1.ValidityError(\"TypeResolverError: expected complex object, array, or string, instead got \" + type, ErrorCode_1.ErrorCode.TYPE_UNSUPPORTED);\n        }\n    };\n    TypeResolver.doesTypeMatch = function (type, value) {\n        if (type) {\n            switch (type) {\n                case 'int':\n                case 'float':\n                case 'long':\n                case 'double':\n                    return typeof value === 'number';\n                case 'File':\n                case 'record':\n                case \"Directory\":\n                    return typeof value === 'object' && !Array.isArray(value);\n                case 'array':\n                    return Array.isArray(value);\n                case 'enum':\n                    return typeof value === 'string';\n                default:\n                    return typeof value === type;\n            }\n        }\n        return true;\n    };\n    TypeResolver.serializeType = function (type, version) {\n        var t;\n        if (type.unionType) {\n            var union = type.unionType;\n            type.type === \"array\" ? type.items = union : type.type = union;\n            if (type.isNullable) {\n                union.push(\"null\");\n                type.isNullable = false;\n            }\n        }\n        if (type.type === null || type.type === undefined) {\n            return null;\n        }\n        switch (type.type) {\n            case \"array\":\n                if (type.items === \"enum\") {\n                    t = {\n                        type: \"array\",\n                        items: {\n                            type: \"enum\",\n                            /** @see nameRequirement */\n                            name: type.name || \"\",\n                            symbols: type.symbols\n                        }\n                    };\n                }\n                else if (type.items === \"record\") {\n                    t = {\n                        type: \"array\",\n                        items: {\n                            type: \"record\",\n                            /** @see nameRequirement */\n                            name: type.name || \"\",\n                            fields: type.fields.map(function (field) {\n                                if (typeof field.serialize === \"function\") {\n                                    return field.serialize();\n                                }\n                                else {\n                                    return field;\n                                }\n                            })\n                        }\n                    };\n                }\n                else if (version === \"v1.0\" && !type.typeBinding && typeof type.items === \"string\") {\n                    t = type.items + \"[]\";\n                }\n                else {\n                    t = {\n                        type: \"array\",\n                        items: type.items\n                    };\n                    if (type.typeBinding)\n                        t.inputBinding = type.typeBinding;\n                }\n                break;\n            case \"record\":\n                t = {\n                    type: \"record\",\n                    fields: type.fields.map(function (field) {\n                        if (typeof field.serialize === \"function\") {\n                            return field.serialize();\n                        }\n                        else {\n                            return field;\n                        }\n                    }),\n                    /** @see nameRequirement */\n                    name: type.name || \"\"\n                };\n                if (type.typeBinding)\n                    t.inputBinding = type.typeBinding;\n                break;\n            case \"enum\":\n                t = {\n                    type: \"enum\",\n                    symbols: type.symbols,\n                    /** @see nameRequirement */\n                    name: type.name || \"\"\n                };\n                if (type.typeBinding)\n                    t.inputBinding = type.typeBinding;\n                break;\n            default:\n                t = type.type;\n        }\n        // type should be serialized as an array of [\"item\", \"item[]\"]\n        if (type.isItemOrArray) {\n            var tArr = {\n                type: \"array\",\n                items: t\n            };\n            t = [t];\n            t.push(tArr);\n            if (type.isNullable) {\n                t.unshift(\"null\");\n            }\n            return t;\n        }\n        if (type.isNullable) {\n            t = version === \"v1.0\" && typeof t === \"string\" ? t + \"?\" : [\"null\", t];\n        }\n        else if (version !== \"v1.0\") {\n            t = [t];\n        }\n        return t;\n    };\n    return TypeResolver;\n}());\nexports.TypeResolver = TypeResolver;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/helpers/TypeResolver.js\n// module id = 27\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CommandLineToolModel_1 = require(\"./CommandLineToolModel\");\nvar V1CommandLineToolModel_1 = require(\"../v1.0/V1CommandLineToolModel\");\nvar SBDraft2CommandLineToolModel_1 = require(\"../d2sb/SBDraft2CommandLineToolModel\");\nvar CommandLineToolFactory = /** @class */ (function () {\n    function CommandLineToolFactory() {\n    }\n    CommandLineToolFactory.from = function (tool, loc) {\n        // check if tool passed has already been parsed to the model\n        if (tool instanceof CommandLineToolModel_1.CommandLineToolModel)\n            return tool;\n        if (tool) {\n            switch (tool.cwlVersion) {\n                case \"v1.0\":\n                    return new V1CommandLineToolModel_1.V1CommandLineToolModel(tool, loc);\n                case \"sbg:draft-2\":\n                case \"draft-2\":\n                default:\n                    return new SBDraft2CommandLineToolModel_1.SBDraft2CommandLineToolModel(tool, loc);\n            }\n        }\n        return new SBDraft2CommandLineToolModel_1.SBDraft2CommandLineToolModel(tool, loc);\n    };\n    return CommandLineToolFactory;\n}());\nexports.CommandLineToolFactory = CommandLineToolFactory;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/generic/CommandLineToolFactory.js\n// module id = 28\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CommandLinePart = /** @class */ (function () {\n    function CommandLinePart(value, type, loc) {\n        value = value === undefined ? '' : value; // in case expression returned undefined\n        value = value.toString(); // in case expression returned something other than a string\n        this.value = value.trim();\n        this.type = type;\n        this.loc = loc;\n    }\n    return CommandLinePart;\n}());\nexports.CommandLinePart = CommandLinePart;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/helpers/CommandLinePart.js\n// module id = 29\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ValidationBase_1 = require(\"../helpers/validation/ValidationBase\");\nvar UnimplementedMethodException_1 = require(\"../helpers/UnimplementedMethodException\");\nvar CommandLineBindingModel = /** @class */ (function (_super) {\n    __extends(CommandLineBindingModel, _super);\n    function CommandLineBindingModel(loc, eventHub) {\n        var _this = _super.call(this, loc) || this;\n        _this.eventHub = eventHub;\n        _this.customProps = {};\n        return _this;\n    }\n    CommandLineBindingModel.prototype.validate = function (context) {\n        var _this = this;\n        new UnimplementedMethodException_1.UnimplementedMethodException(\"validate\", \"CommandLineBindingModel\");\n        return new Promise(function (res, rej) { return res(_this.issues); });\n    };\n    CommandLineBindingModel.prototype.setValueFrom = function (val) {\n        new UnimplementedMethodException_1.UnimplementedMethodException(\"setValueFrom\", \"CommandLineBindingModel\");\n    };\n    CommandLineBindingModel.prototype.serialize = function () {\n        new UnimplementedMethodException_1.UnimplementedMethodException(\"serialize\", \"CommandLineBindingModel\");\n        return null;\n    };\n    CommandLineBindingModel.prototype.deserialize = function (attr) {\n        new UnimplementedMethodException_1.UnimplementedMethodException(\"deserialize\", \"CommandLineBindingModel\");\n    };\n    CommandLineBindingModel.prototype.cloneStatus = function (clone) {\n        this.setIssue(__assign({}, clone.issues));\n        this.deserialize(clone.serialize());\n    };\n    ;\n    return CommandLineBindingModel;\n}(ValidationBase_1.ValidationBase));\nexports.CommandLineBindingModel = CommandLineBindingModel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/generic/CommandLineBindingModel.js\n// module id = 30\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CommandInputParameterModel_1 = require(\"../generic/CommandInputParameterModel\");\nvar ParameterTypeModel_1 = require(\"../generic/ParameterTypeModel\");\nvar utils_1 = require(\"../helpers/utils\");\nvar V1CommandLineBindingModel_1 = require(\"./V1CommandLineBindingModel\");\nvar V1ExpressionModel_1 = require(\"./V1ExpressionModel\");\nvar V1CommandInputParameterModel = /** @class */ (function (_super) {\n    __extends(V1CommandInputParameterModel, _super);\n    function V1CommandInputParameterModel(attr, loc, eventHub) {\n        var _this = _super.call(this, loc, eventHub) || this;\n        _this.secondaryFiles = [];\n        _this.hasSecondaryFiles = true;\n        _this.hasSecondaryFilesInRoot = true;\n        _this.hasStageInput = false;\n        if (attr)\n            _this.deserialize(attr);\n        return _this;\n    }\n    V1CommandInputParameterModel.prototype.updateInputBinding = function (binding) {\n        var _this = this;\n        if (binding instanceof V1CommandLineBindingModel_1.V1CommandLineBindingModel) {\n            //@todo breaks here for \"serialize of undefined\"\n            this.inputBinding.cloneStatus(binding);\n            this.inputBinding.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        }\n    };\n    V1CommandInputParameterModel.prototype.createInputBinding = function () {\n        var _this = this;\n        this.inputBinding = new V1CommandLineBindingModel_1.V1CommandLineBindingModel({}, this.loc + \".inputBinding\", this.eventHub);\n        this.inputBinding.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        return this.inputBinding;\n    };\n    V1CommandInputParameterModel.prototype.addSecondaryFile = function (file) {\n        return this._addSecondaryFile(file, V1ExpressionModel_1.V1ExpressionModel, this.loc);\n    };\n    V1CommandInputParameterModel.prototype.updateSecondaryFiles = function (files) {\n        this._updateSecondaryFiles(files);\n    };\n    V1CommandInputParameterModel.prototype.removeSecondaryFile = function (index) {\n        this._removeSecondaryFile(index);\n    };\n    V1CommandInputParameterModel.prototype.serialize = function () {\n        var base = __assign({}, this.customProps);\n        if (this.isField) {\n            base.name = this.id || \"\";\n        }\n        else {\n            base.id = this.id || \"\";\n        }\n        base.type = this.type.serialize(\"v1.0\");\n        if (this.inputBinding)\n            base.inputBinding = this.inputBinding.serialize();\n        if (this.label)\n            base.label = this.label;\n        if (this.description)\n            base.doc = this.description;\n        if (this.fileTypes.length && !this.isField) {\n            base[\"sbg:fileTypes\"] = this.fileTypes.join(\", \");\n        }\n        if (this.streamable !== undefined && !this.isField) {\n            base.streamable = this.streamable;\n        }\n        if (this.secondaryFiles && this.secondaryFiles.length && !this.isField) {\n            base.secondaryFiles = this.secondaryFiles.map(function (f) { return f.serialize(); }).filter(function (f) { return !!f; });\n        }\n        return base;\n    };\n    V1CommandInputParameterModel.prototype.deserialize = function (attr) {\n        var _this = this;\n        var serializedKeys = [\"type\", \"doc\", \"inputBinding\", \"label\", \"secondaryFiles\", \"sbg:fileTypes\", \"streamable\"];\n        if (attr.name) {\n            this.id = attr.name;\n            this.isField = true;\n            serializedKeys.push(\"name\");\n        }\n        else {\n            this.id = attr.id;\n            serializedKeys.push(\"id\");\n        }\n        this.type = new ParameterTypeModel_1.ParameterTypeModel(attr.type, V1CommandInputParameterModel, this.id + \"_field\", this.loc + \".type\", this.eventHub);\n        this.type.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        this.type.hasDirectoryType = true;\n        if (utils_1.isType(this, [\"record\", \"enum\"]) && !this.type.name) {\n            this.type.name = this.id;\n        }\n        if (attr.inputBinding) {\n            this.inputBinding = new V1CommandLineBindingModel_1.V1CommandLineBindingModel(attr.inputBinding, this.loc + \".inputBinding\", this.eventHub);\n            this.inputBinding.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        }\n        this.label = attr.label;\n        this.description = utils_1.ensureArray(attr.doc).join('\\n');\n        this.secondaryFiles = utils_1.ensureArray(attr.secondaryFiles).map(function (f) { return _this.addSecondaryFile(f); });\n        this.fileTypes = utils_1.commaSeparatedToArray(attr[\"sbg:fileTypes\"]);\n        this.streamable = attr.streamable;\n        this.attachFileTypeListeners();\n        utils_1.spreadSelectProps(attr, this.customProps, serializedKeys);\n    };\n    return V1CommandInputParameterModel;\n}(CommandInputParameterModel_1.CommandInputParameterModel));\nexports.V1CommandInputParameterModel = V1CommandInputParameterModel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/v1.0/V1CommandInputParameterModel.js\n// module id = 31\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ProcessRequirementModel_1 = require(\"./ProcessRequirementModel\");\nvar utils_1 = require(\"../helpers/utils\");\nvar DockerRequirementModel = /** @class */ (function (_super) {\n    __extends(DockerRequirementModel, _super);\n    function DockerRequirementModel(req, loc) {\n        var _this = _super.call(this, loc) || this;\n        _this.class = \"DockerRequirement\";\n        _this.customProps = {};\n        _this.serializedKeys = [\n            \"class\",\n            \"dockerFile\",\n            \"dockerImageId\",\n            \"dockerLoad\",\n            \"dockerOutputDirectory\",\n            \"dockerPull\"\n        ];\n        if (req)\n            _this.deserialize(req);\n        return _this;\n    }\n    DockerRequirementModel.prototype.serialize = function () {\n        var _this = this;\n        var base = {};\n        this.serializedKeys.forEach(function (key) {\n            if (_this[key])\n                base[key] = _this[key];\n        });\n        // don't serialize if the only property that is being serialized is the class\n        var keys = Object.keys(base);\n        var customPropsKeys = Object.keys(this.customProps);\n        if (keys.length === 1 && keys[0] === \"class\" && customPropsKeys.length === 0) {\n            return undefined;\n        }\n        return utils_1.spreadAllProps(base, this.customProps);\n    };\n    DockerRequirementModel.prototype.deserialize = function (attr) {\n        var _this = this;\n        this.serializedKeys.forEach(function (key) {\n            _this[key] = attr[key];\n        });\n        this.class = \"DockerRequirement\";\n        utils_1.spreadSelectProps(attr, this.customProps, this.serializedKeys);\n    };\n    return DockerRequirementModel;\n}(ProcessRequirementModel_1.ProcessRequirementModel));\nexports.DockerRequirementModel = DockerRequirementModel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/generic/DockerRequirementModel.js\n// module id = 32\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ValidationBase_1 = require(\"../helpers/validation/ValidationBase\");\nvar ErrorCode_1 = require(\"../helpers/validation/ErrorCode\");\nvar CommandOutputBindingModel = /** @class */ (function (_super) {\n    __extends(CommandOutputBindingModel, _super);\n    function CommandOutputBindingModel(loc, eventHub) {\n        var _this = _super.call(this, loc) || this;\n        _this.eventHub = eventHub;\n        _this.customProps = {};\n        return _this;\n    }\n    CommandOutputBindingModel.prototype.setGlob = function (value, exprConstructor) {\n        var _this = this;\n        var val = value.serialize();\n        this._glob.clearIssue(ErrorCode_1.ErrorCode.ALL);\n        this._glob = new exprConstructor(val, this.loc + \".glob\", this.eventHub);\n        this._glob.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        this.validateGlob();\n    };\n    CommandOutputBindingModel.prototype.validateGlob = function () {\n        if (!this._glob)\n            return;\n        if (this._glob.serialize() === undefined) {\n            this._glob.setIssue((_a = {},\n                _a[this.loc + \".glob\"] = {\n                    message: \"Glob should be specified\",\n                    type: \"warning\",\n                    code: ErrorCode_1.ErrorCode.OUTPUT_GLOB_MISSING\n                },\n                _a), true);\n        }\n        else {\n            this._glob.clearIssue(ErrorCode_1.ErrorCode.OUTPUT_GLOB_MISSING);\n        }\n        var _a;\n    };\n    CommandOutputBindingModel.prototype.setOutputEval = function (value, exprConstructor) {\n        var _this = this;\n        if (this._outputEval) {\n            this._outputEval.clearIssue(ErrorCode_1.ErrorCode.ALL);\n        }\n        this._outputEval = new exprConstructor(value.serialize(), this.loc + \".outputEval\", this.eventHub);\n        this._outputEval.setValidationCallback(function (err) { return _this.updateValidity(err); });\n    };\n    return CommandOutputBindingModel;\n}(ValidationBase_1.ValidationBase));\nexports.CommandOutputBindingModel = CommandOutputBindingModel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/generic/CommandOutputBindingModel.js\n// module id = 33\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar UnimplementedMethodException_1 = require(\"../helpers/UnimplementedMethodException\");\nvar ProcessRequirementModel_1 = require(\"./ProcessRequirementModel\");\nvar ErrorCode_1 = require(\"../helpers/validation/ErrorCode\");\nvar CreateFileRequirementModel = /** @class */ (function (_super) {\n    __extends(CreateFileRequirementModel, _super);\n    function CreateFileRequirementModel(loc, eventHub) {\n        var _this = _super.call(this, loc) || this;\n        _this.eventHub = eventHub;\n        return _this;\n    }\n    CreateFileRequirementModel.prototype.addDirent = function (def) {\n        new UnimplementedMethodException_1.UnimplementedMethodException(\"addDirent\", \"CreateFileRequirementModel\");\n        return null;\n    };\n    CreateFileRequirementModel.prototype.addExpression = function (e) {\n        new UnimplementedMethodException_1.UnimplementedMethodException(\"addExpression\", \"CreateFileRequirementModel\");\n        return null;\n    };\n    CreateFileRequirementModel.prototype.validate = function (context) {\n        var _this = this;\n        this.clearIssue(ErrorCode_1.ErrorCode.ALL);\n        return Promise.all(this.listing.map(function (dir) { return dir.validate(context); }))\n            .then(function () { return _this.issues; }, function () { return _this.issues; });\n    };\n    return CreateFileRequirementModel;\n}(ProcessRequirementModel_1.ProcessRequirementModel));\nexports.CreateFileRequirementModel = CreateFileRequirementModel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/generic/CreateFileRequirementModel.js\n// module id = 34\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ValidationBase_1 = require(\"../helpers/validation/ValidationBase\");\nvar UnimplementedMethodException_1 = require(\"../helpers/UnimplementedMethodException\");\nvar ErrorCode_1 = require(\"../helpers/validation/ErrorCode\");\nvar DirentModel = /** @class */ (function (_super) {\n    __extends(DirentModel, _super);\n    function DirentModel(loc, eventHub) {\n        var _this = _super.call(this, loc) || this;\n        _this.eventHub = eventHub;\n        _this.customProps = {};\n        return _this;\n    }\n    DirentModel.prototype.serialize = function () {\n        new UnimplementedMethodException_1.UnimplementedMethodException(\"serialize\", \"DirentModel\");\n        return null;\n    };\n    DirentModel.prototype.deserialize = function (attr) {\n        new UnimplementedMethodException_1.UnimplementedMethodException(\"deserialize\", \"DirentModel\");\n    };\n    DirentModel.prototype.validate = function (context) {\n        this.clearIssue(ErrorCode_1.ErrorCode.ALL);\n        return Promise.all([this.entry.validate(context), this.entryName.validate(context)]);\n    };\n    return DirentModel;\n}(ValidationBase_1.ValidationBase));\nexports.DirentModel = DirentModel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/generic/DirentModel.js\n// module id = 35\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ProcessRequirementModel_1 = require(\"./ProcessRequirementModel\");\nvar ResourceRequirementModel = /** @class */ (function (_super) {\n    __extends(ResourceRequirementModel, _super);\n    function ResourceRequirementModel(loc, eventHub) {\n        var _this = _super.call(this, loc) || this;\n        _this.eventHub = eventHub;\n        _this.class = \"ResourceRequirement\";\n        return _this;\n    }\n    return ResourceRequirementModel;\n}(ProcessRequirementModel_1.ProcessRequirementModel));\nexports.ResourceRequirementModel = ResourceRequirementModel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/generic/ResourceRequirementModel.js\n// module id = 36\n// module chunks = 0","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nvar __values = (this && this.__values) || function (o) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\n    if (m) return m.call(o);\n    return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar dom_events_1 = require(\"../utils/dom-events\");\nvar event_hub_1 = require(\"../utils/event-hub\");\nvar edge_1 = require(\"./edge\");\nvar graph_node_1 = require(\"./graph-node\");\nvar step_node_1 = require(\"./step-node\");\nvar template_parser_1 = require(\"./template-parser\");\n/**\n * @FIXME validation states of old and newly created edges\n */\nvar Workflow = /** @class */ (function () {\n    function Workflow(parameters) {\n        var _this = this;\n        this.svgID = this.makeID();\n        this.minScale = 0.2;\n        this.maxScale = 2;\n        this.editingEnabled = true;\n        /** Scale of labels, they are different than scale of other elements in the workflow */\n        this.labelScale = 1;\n        this.plugins = [];\n        this.handlersThatCanBeDisabled = [];\n        this.disposers = [];\n        this.pendingFirstDraw = true;\n        /** Current scale of the document */\n        this._scale = 1;\n        this.svgRoot = parameters.svgRoot;\n        this.plugins = parameters.plugins || [];\n        this.domEvents = new dom_events_1.DomEvents(this.svgRoot);\n        this.model = parameters.model;\n        this.editingEnabled = parameters.editingEnabled !== false; // default to true if undefined\n        this.svgRoot.classList.add(this.svgID);\n        this.svgRoot.innerHTML = \"\\n            <rect x=\\\"0\\\" y=\\\"0\\\" width=\\\"100%\\\" height=\\\"100%\\\" class=\\\"pan-handle\\\" transform=\\\"matrix(1,0,0,1,0,0)\\\"></rect>\\n            <g class=\\\"workflow\\\" transform=\\\"matrix(1,0,0,1,0,0)\\\"></g>\\n        \";\n        this.workflow = this.svgRoot.querySelector(\".workflow\");\n        this.invokePlugins(\"registerWorkflow\", this);\n        this.eventHub = new event_hub_1.EventHub([\n            \"connection.create\",\n            \"app.create.step\",\n            \"app.create.input\",\n            \"app.create.output\",\n            \"beforeChange\",\n            \"afterChange\",\n            \"afterRender\",\n            \"selectionChange\"\n        ]);\n        this.hookPlugins();\n        this.draw(parameters.model);\n        this.eventHub.on(\"afterRender\", function () { return _this.invokePlugins(\"afterRender\"); });\n    }\n    Object.defineProperty(Workflow.prototype, \"scale\", {\n        get: function () {\n            return this._scale;\n        },\n        // noinspection JSUnusedGlobalSymbols\n        set: function (scale) {\n            this.workflowBoundingClientRect = this.svgRoot.getBoundingClientRect();\n            var x = (this.workflowBoundingClientRect.right + this.workflowBoundingClientRect.left) / 2;\n            var y = (this.workflowBoundingClientRect.top + this.workflowBoundingClientRect.bottom) / 2;\n            this.scaleAtPoint(scale, x, y);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Workflow.canDrawIn = function (element) {\n        return element.getBoundingClientRect().width !== 0;\n    };\n    Workflow.makeConnectionPath = function (x1, y1, x2, y2, forceDirection) {\n        if (forceDirection === void 0) { forceDirection = \"right\"; }\n        if (!forceDirection) {\n            return \"M \" + x1 + \" \" + y1 + \" C \" + (x1 + x2) / 2 + \" \" + y1 + \" \" + (x1 + x2) / 2 + \" \" + y2 + \" \" + x2 + \" \" + y2;\n        }\n        else if (forceDirection === \"right\") {\n            var outDir = x1 + Math.abs(x1 - x2) / 2;\n            var inDir = x2 - Math.abs(x1 - x2) / 2;\n            return \"M \" + x1 + \" \" + y1 + \" C \" + outDir + \" \" + y1 + \" \" + inDir + \" \" + y2 + \" \" + x2 + \" \" + y2;\n        }\n        else if (forceDirection === \"left\") {\n            var outDir = x1 - Math.abs(x1 - x2) / 2;\n            var inDir = x2 + Math.abs(x1 - x2) / 2;\n            return \"M \" + x1 + \" \" + y1 + \" C \" + outDir + \" \" + y1 + \" \" + inDir + \" \" + y2 + \" \" + x2 + \" \" + y2;\n        }\n    };\n    Workflow.prototype.draw = function (model) {\n        var _this = this;\n        if (model === void 0) { model = this.model; }\n        // We will need to restore the transformations when we redraw the model, so save the current state\n        var oldTransform = this.workflow.getAttribute(\"transform\");\n        var modelChanged = this.model !== model;\n        if (modelChanged || this.pendingFirstDraw) {\n            this.pendingFirstDraw = false;\n            this.model = model;\n            var stepChangeDisposer_1 = this.model.on(\"step.change\", this.onStepChange.bind(this));\n            var stepCreateDisposer_1 = this.model.on(\"step.create\", this.onStepCreate.bind(this));\n            var stepRemoveDisposer_1 = this.model.on(\"step.remove\", this.onStepRemove.bind(this));\n            var inputCreateDisposer_1 = this.model.on(\"input.create\", this.onInputCreate.bind(this));\n            var inputRemoveDisposer_1 = this.model.on(\"input.remove\", this.onInputRemove.bind(this));\n            var outputCreateDisposer_1 = this.model.on(\"output.create\", this.onOutputCreate.bind(this));\n            var outputRemoveDisposer_1 = this.model.on(\"output.remove\", this.onOutputRemove.bind(this));\n            var stepInPortShowDisposer_1 = this.model.on(\"step.inPort.show\", this.onInputPortShow.bind(this));\n            var stepInPortHideDisposer_1 = this.model.on(\"step.inPort.hide\", this.onInputPortHide.bind(this));\n            var connectionCreateDisposer_1 = this.model.on(\"connection.create\", this.onConnectionCreate.bind(this));\n            var connectionRemoveDisposer_1 = this.model.on(\"connection.remove\", this.onConnectionRemove.bind(this));\n            var stepOutPortCreateDisposer_1 = this.model.on(\"step.outPort.create\", this.onOutputPortCreate.bind(this));\n            var stepOutPortRemoveDisposer_1 = this.model.on(\"step.outPort.remove\", this.onOutputPortRemove.bind(this));\n            this.disposers.push(function () {\n                stepChangeDisposer_1.dispose();\n                stepCreateDisposer_1.dispose();\n                stepRemoveDisposer_1.dispose();\n                inputCreateDisposer_1.dispose();\n                inputRemoveDisposer_1.dispose();\n                outputCreateDisposer_1.dispose();\n                outputRemoveDisposer_1.dispose();\n                stepInPortShowDisposer_1.dispose();\n                stepInPortHideDisposer_1.dispose();\n                connectionCreateDisposer_1.dispose();\n                connectionRemoveDisposer_1.dispose();\n                stepOutPortCreateDisposer_1.dispose();\n                stepOutPortRemoveDisposer_1.dispose();\n            });\n            this.invokePlugins(\"afterModelChange\");\n        }\n        this.clearCanvas();\n        var nodes = __spread(this.model.steps, this.model.inputs, this.model.outputs).filter(function (n) { return n.isVisible; });\n        /**\n         * If there is a missing sbg:x or sbg:y property on any node model,\n         * graph should be arranged to avoid random placement.\n         */\n        var arrangeNecessary = false;\n        var nodeTemplate = \"\";\n        try {\n            for (var nodes_1 = __values(nodes), nodes_1_1 = nodes_1.next(); !nodes_1_1.done; nodes_1_1 = nodes_1.next()) {\n                var node = nodes_1_1.value;\n                var patched = graph_node_1.GraphNode.patchModelPorts(node);\n                var missingX = isNaN(parseInt(patched.customProps[\"sbg:x\"]));\n                var missingY = isNaN(parseInt(patched.customProps[\"sbg:y\"]));\n                if (missingX || missingY) {\n                    arrangeNecessary = true;\n                }\n                nodeTemplate += graph_node_1.GraphNode.makeTemplate(patched);\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (nodes_1_1 && !nodes_1_1.done && (_a = nodes_1.return)) _a.call(nodes_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        this.workflow.innerHTML += nodeTemplate;\n        this.redrawEdges();\n        Array.from(this.workflow.querySelectorAll(\".node\")).forEach(function (e) {\n            _this.workflow.appendChild(e);\n        });\n        this.addEventListeners();\n        this.workflow.setAttribute(\"transform\", oldTransform);\n        this.scaleAtPoint(this.scale);\n        this.invokePlugins(\"afterRender\");\n        var e_1, _a;\n    };\n    Workflow.prototype.findParent = function (el, parentClass) {\n        if (parentClass === void 0) { parentClass = \"node\"; }\n        var parentNode = el;\n        while (parentNode) {\n            if (parentNode.classList.contains(parentClass)) {\n                return parentNode;\n            }\n            parentNode = parentNode.parentElement;\n        }\n    };\n    /**\n     * Retrieves a plugin instance\n     * @param {{new(...args: any[]) => T}} plugin\n     * @returns {T}\n     */\n    Workflow.prototype.getPlugin = function (plugin) {\n        return this.plugins.find(function (p) { return p instanceof plugin; });\n    };\n    Workflow.prototype.on = function (event, handler) {\n        this.eventHub.on(event, handler);\n    };\n    Workflow.prototype.off = function (event, handler) {\n        this.eventHub.off(event, handler);\n    };\n    /**\n     * Scales the workflow to fit the available viewport\n     */\n    Workflow.prototype.fitToViewport = function (ignoreScaleLimits) {\n        if (ignoreScaleLimits === void 0) { ignoreScaleLimits = false; }\n        this.scaleAtPoint(1);\n        Object.assign(this.workflow.transform.baseVal.getItem(0).matrix, {\n            e: 0,\n            f: 0\n        });\n        var clientBounds = this.svgRoot.getBoundingClientRect();\n        var wfBounds = this.workflow.getBoundingClientRect();\n        var padding = 100;\n        if (clientBounds.width === 0 || clientBounds.height === 0) {\n            throw new Error(\"Cannot fit workflow to the area that has no visible viewport.\");\n        }\n        var verticalScale = (wfBounds.height) / (clientBounds.height - padding);\n        var horizontalScale = (wfBounds.width) / (clientBounds.width - padding);\n        var scaleFactor = Math.max(verticalScale, horizontalScale);\n        // Cap the upscaling to 1, we don't want to zoom in workflows that would fit anyway\n        var newScale = Math.min(this.scale / scaleFactor, 1);\n        if (!ignoreScaleLimits) {\n            newScale = Math.max(newScale, this.minScale);\n        }\n        this.scaleAtPoint(newScale);\n        var scaledWFBounds = this.workflow.getBoundingClientRect();\n        var moveY = clientBounds.top - scaledWFBounds.top + Math.abs(clientBounds.height - scaledWFBounds.height) / 2;\n        var moveX = clientBounds.left - scaledWFBounds.left + Math.abs(clientBounds.width - scaledWFBounds.width) / 2;\n        var matrix = this.workflow.transform.baseVal.getItem(0).matrix;\n        matrix.e += moveX;\n        matrix.f += moveY;\n    };\n    Workflow.prototype.redrawEdges = function () {\n        var _this = this;\n        var highlightedEdges = new Set();\n        Array.from(this.workflow.querySelectorAll(\".edge\")).forEach(function (el) {\n            if (el.classList.contains(\"highlighted\")) {\n                var edgeID = el.attributes[\"data-source-connection\"].value + el.attributes[\"data-destination-connection\"].value;\n                highlightedEdges.add(edgeID);\n            }\n            el.remove();\n        });\n        var edgesTpl = this.model.connections\n            .map(function (c) {\n            var edgeId = c.source.id + c.destination.id;\n            var edgeStates = highlightedEdges.has(edgeId) ? \"highlighted\" : \"\";\n            return edge_1.Edge.makeTemplate(c, _this.workflow, edgeStates);\n        })\n            .reduce(function (acc, tpl) { return acc + tpl; }, \"\");\n        this.workflow.innerHTML = edgesTpl + this.workflow.innerHTML;\n    };\n    /**\n     * Scale the workflow by the scaleCoefficient (not compounded) over given coordinates\n     */\n    Workflow.prototype.scaleAtPoint = function (scale, x, y) {\n        if (scale === void 0) { scale = 1; }\n        if (x === void 0) { x = 0; }\n        if (y === void 0) { y = 0; }\n        this._scale = scale;\n        this.labelScale = 1 + (1 - this._scale) / (this._scale * 2);\n        var transform = this.workflow.transform.baseVal;\n        var matrix = transform.getItem(0).matrix;\n        var coords = this.transformScreenCTMtoCanvas(x, y);\n        matrix.e += matrix.a * coords.x;\n        matrix.f += matrix.a * coords.y;\n        matrix.a = matrix.d = scale;\n        matrix.e -= scale * coords.x;\n        matrix.f -= scale * coords.y;\n        var nodeLabels = this.workflow.querySelectorAll(\".node .label\");\n        try {\n            for (var nodeLabels_1 = __values(nodeLabels), nodeLabels_1_1 = nodeLabels_1.next(); !nodeLabels_1_1.done; nodeLabels_1_1 = nodeLabels_1.next()) {\n                var el = nodeLabels_1_1.value;\n                var matrix_1 = el.transform.baseVal.getItem(0).matrix;\n                Object.assign(matrix_1, {\n                    a: this.labelScale,\n                    d: this.labelScale\n                });\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (nodeLabels_1_1 && !nodeLabels_1_1.done && (_a = nodeLabels_1.return)) _a.call(nodeLabels_1);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n        var e_2, _a;\n    };\n    Workflow.prototype.transformScreenCTMtoCanvas = function (x, y) {\n        var svg = this.svgRoot;\n        var ctm = this.workflow.getScreenCTM();\n        var point = svg.createSVGPoint();\n        point.x = x;\n        point.y = y;\n        var t = point.matrixTransform(ctm.inverse());\n        return {\n            x: t.x,\n            y: t.y\n        };\n    };\n    Workflow.prototype.enableEditing = function (enabled) {\n        this.invokePlugins(\"onEditableStateChange\", enabled);\n        this.editingEnabled = enabled;\n    };\n    // noinspection JSUnusedGlobalSymbols\n    Workflow.prototype.destroy = function () {\n        this.svgRoot.classList.remove(this.svgID);\n        this.clearCanvas();\n        this.eventHub.empty();\n        this.invokePlugins(\"destroy\");\n        try {\n            for (var _a = __values(this.disposers), _b = _a.next(); !_b.done; _b = _a.next()) {\n                var dispose = _b.value;\n                dispose();\n            }\n        }\n        catch (e_3_1) { e_3 = { error: e_3_1 }; }\n        finally {\n            try {\n                if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n            }\n            finally { if (e_3) throw e_3.error; }\n        }\n        var e_3, _c;\n    };\n    Workflow.prototype.resetTransform = function () {\n        this.workflow.setAttribute(\"transform\", \"matrix(1,0,0,1,0,0)\");\n        this.scaleAtPoint();\n    };\n    Workflow.prototype.addEventListeners = function () {\n        var _this = this;\n        /**\n         * Attach canvas panning\n         */\n        {\n            var pane_1;\n            var x_1;\n            var y_1;\n            var matrix_2;\n            this.domEvents.drag(\".pan-handle\", function (dx, dy) {\n                matrix_2.e = x_1 + dx;\n                matrix_2.f = y_1 + dy;\n            }, function (ev, el, root) {\n                pane_1 = root.querySelector(\".workflow\");\n                matrix_2 = pane_1.transform.baseVal.getItem(0).matrix;\n                x_1 = matrix_2.e;\n                y_1 = matrix_2.f;\n            }, function () {\n                pane_1 = undefined;\n                matrix_2 = undefined;\n            });\n        }\n        /**\n         * On mouse over node, bring it to the front\n         */\n        this.domEvents.on(\"mouseover\", \".node\", function (ev, target, root) {\n            if (_this.workflow.querySelector(\".edge.dragged\")) {\n                return;\n            }\n            target.parentElement.appendChild(target);\n        });\n    };\n    Workflow.prototype.clearCanvas = function () {\n        this.domEvents.detachAll();\n        this.workflow.innerHTML = \"\";\n        this.workflow.setAttribute(\"transform\", \"matrix(1,0,0,1,0,0)\");\n        this.workflow.setAttribute(\"class\", \"workflow\");\n    };\n    Workflow.prototype.hookPlugins = function () {\n        var _this = this;\n        this.plugins.forEach(function (plugin) {\n            plugin.registerOnBeforeChange(function (event) {\n                _this.eventHub.emit(\"beforeChange\", event);\n            });\n            plugin.registerOnAfterChange(function (event) {\n                _this.eventHub.emit(\"afterChange\", event);\n            });\n            plugin.registerOnAfterRender(function (event) {\n                _this.eventHub.emit(\"afterRender\", event);\n            });\n        });\n    };\n    Workflow.prototype.invokePlugins = function (methodName) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        this.plugins.forEach(function (plugin) {\n            if (typeof plugin[methodName] === \"function\") {\n                plugin[methodName].apply(plugin, __spread(args));\n            }\n        });\n    };\n    /**\n     * Listener for connection.create event on model that renders new edges on canvas\n     */\n    Workflow.prototype.onConnectionCreate = function (source, destination) {\n        if (!source.isVisible || !destination.isVisible) {\n            return;\n        }\n        var sourceID = source.connectionId;\n        var destinationID = destination.connectionId;\n        edge_1.Edge.spawnBetweenConnectionIDs(this.workflow, sourceID, destinationID);\n    };\n    /**\n     * Listener for \"connection.remove\" event on the model that disconnects nodes\n     */\n    Workflow.prototype.onConnectionRemove = function (source, destination) {\n        if (!source.isVisible || !destination.isVisible) {\n            return;\n        }\n        var sourceID = source.connectionId;\n        var destinationID = destination.connectionId;\n        var edge = this.svgRoot.querySelector(\".edge[data-source-connection=\\\"\" + sourceID + \"\\\"][data-destination-connection=\\\"\" + destinationID + \"\\\"\");\n        edge.remove();\n    };\n    /**\n     * Listener for input.create event on model that renders workflow inputs\n     */\n    Workflow.prototype.onInputCreate = function (input) {\n        if (!input.isVisible) {\n            return;\n        }\n        var patched = graph_node_1.GraphNode.patchModelPorts(input);\n        var graphTemplate = graph_node_1.GraphNode.makeTemplate(patched, this.labelScale);\n        var el = template_parser_1.TemplateParser.parse(graphTemplate);\n        this.workflow.appendChild(el);\n    };\n    /**\n     * Listener for output.create event on model that renders workflow outputs\n     */\n    Workflow.prototype.onOutputCreate = function (output) {\n        if (!output.isVisible) {\n            return;\n        }\n        var patched = graph_node_1.GraphNode.patchModelPorts(output);\n        var graphTemplate = graph_node_1.GraphNode.makeTemplate(patched, this.labelScale);\n        var el = template_parser_1.TemplateParser.parse(graphTemplate);\n        this.workflow.appendChild(el);\n    };\n    Workflow.prototype.onStepCreate = function (step) {\n        // if the step doesn't have x & y coordinates, check if they are in the run property\n        if (!step.customProps[\"sbg:x\"] && step.run.customProps && step.run.customProps[\"sbg:x\"]) {\n            Object.assign(step.customProps, {\n                \"sbg:x\": step.run.customProps[\"sbg:x\"],\n                \"sbg:y\": step.run.customProps[\"sbg:y\"]\n            });\n            // remove them from the run property once finished\n            delete step.run.customProps[\"sbg:x\"];\n            delete step.run.customProps[\"sbg:y\"];\n        }\n        var template = graph_node_1.GraphNode.makeTemplate(step, this.labelScale);\n        var element = template_parser_1.TemplateParser.parse(template);\n        this.workflow.appendChild(element);\n    };\n    Workflow.prototype.onStepChange = function (change) {\n        var title = this.workflow.querySelector(\".step[data-id=\\\"\" + change.connectionId + \"\\\"] .title\");\n        if (title) {\n            title.textContent = change.label;\n        }\n    };\n    Workflow.prototype.onInputPortShow = function (input) {\n        var stepEl = this.svgRoot.querySelector(\".step[data-connection-id=\\\"\" + input.parentStep.connectionId + \"\\\"]\");\n        new step_node_1.StepNode(stepEl, input.parentStep).update();\n    };\n    Workflow.prototype.onInputPortHide = function (input) {\n        var stepEl = this.svgRoot.querySelector(\".step[data-connection-id=\\\"\" + input.parentStep.connectionId + \"\\\"]\");\n        new step_node_1.StepNode(stepEl, input.parentStep).update();\n    };\n    Workflow.prototype.onOutputPortCreate = function (output) {\n        var stepEl = this.svgRoot.querySelector(\".step[data-connection-id=\\\"\" + output.parentStep.connectionId + \"\\\"]\");\n        new step_node_1.StepNode(stepEl, output.parentStep).update();\n    };\n    Workflow.prototype.onOutputPortRemove = function (output) {\n        var stepEl = this.svgRoot.querySelector(\".step[data-connection-id=\\\"\" + output.parentStep.connectionId + \"\\\"]\");\n        new step_node_1.StepNode(stepEl, output.parentStep).update();\n    };\n    /**\n     * Listener for \"step.remove\" event on model which removes steps\n     */\n    Workflow.prototype.onStepRemove = function (step) {\n        var stepEl = this.svgRoot.querySelector(\".step[data-connection-id=\\\"\" + step.connectionId + \"\\\"]\");\n        stepEl.remove();\n    };\n    /**\n     * Listener for \"input.remove\" event on model which removes inputs\n     */\n    Workflow.prototype.onInputRemove = function (input) {\n        if (!input.isVisible)\n            return;\n        var inputEl = this.svgRoot.querySelector(\".node.input[data-connection-id=\\\"\" + input.connectionId + \"\\\"]\");\n        inputEl.remove();\n    };\n    /**\n     * Listener for \"output.remove\" event on model which removes outputs\n     */\n    Workflow.prototype.onOutputRemove = function (output) {\n        if (!output.isVisible)\n            return;\n        var outputEl = this.svgRoot.querySelector(\".node.output[data-connection-id=\\\"\" + output.connectionId + \"\\\"]\");\n        outputEl.remove();\n    };\n    Workflow.prototype.makeID = function (length) {\n        if (length === void 0) { length = 6; }\n        var output = \"\";\n        var charset = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\";\n        for (var i = 0; i < length; i++) {\n            output += charset.charAt(Math.floor(Math.random() * charset.length));\n        }\n        return output;\n    };\n    return Workflow;\n}());\nexports.Workflow = Workflow;\n//# sourceMappingURL=workflow.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwl-svg/compiled/src/graph/workflow.js\n// module id = 37\n// module chunks = 0","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __values = (this && this.__values) || function (o) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\n    if (m) return m.call(o);\n    return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar geometry_1 = require(\"../utils/geometry\");\nvar io_port_1 = require(\"./io-port\");\nvar workflow_1 = require(\"./workflow\");\nvar Edge = /** @class */ (function () {\n    function Edge() {\n    }\n    Edge.makeTemplate = function (edge, containerNode, connectionStates) {\n        if (!edge.isVisible || edge.source.type === \"Step\" || edge.destination.type === \"Step\") {\n            return \"\";\n        }\n        var _a = __read(edge.source.id.split(\"/\"), 3), sourceSide = _a[0], sourceStepId = _a[1], sourcePort = _a[2];\n        var _b = __read(edge.destination.id.split(\"/\"), 3), destSide = _b[0], destStepId = _b[1], destPort = _b[2];\n        var sourceVertex = containerNode.querySelector(\".node[data-id=\\\"\" + sourceStepId + \"\\\"] .output-port[data-port-id=\\\"\" + sourcePort + \"\\\"] .io-port\");\n        var destVertex = containerNode.querySelector(\".node[data-id=\\\"\" + destStepId + \"\\\"] .input-port[data-port-id=\\\"\" + destPort + \"\\\"] .io-port\");\n        if (edge.source.type === edge.destination.type) {\n            console.error(\"Can't update edge between nodes of the same type.\", edge);\n            return;\n        }\n        if (!sourceVertex) {\n            console.error(\"Source vertex not found for edge \" + edge.source.id, edge);\n            return;\n        }\n        if (!destVertex) {\n            console.error(\"Destination vertex not found for edge \" + edge.destination.id, edge);\n            return;\n        }\n        var sourceCTM = sourceVertex.getCTM();\n        var destCTM = destVertex.getCTM();\n        var wfMatrix = containerNode.transform.baseVal[0].matrix;\n        var pathStr = workflow_1.Workflow.makeConnectionPath((sourceCTM.e - wfMatrix.e) / sourceCTM.a, (sourceCTM.f - wfMatrix.f) / sourceCTM.a, (destCTM.e - wfMatrix.e) / sourceCTM.a, (destCTM.f - wfMatrix.f) / sourceCTM.a);\n        return \"\\n            <g tabindex=\\\"-1\\\" class=\\\"edge \" + connectionStates + \"\\\"\\n               data-source-port=\\\"\" + sourcePort + \"\\\"\\n               data-destination-port=\\\"\" + destPort + \"\\\"\\n               data-source-node=\\\"\" + sourceStepId + \"\\\"\\n               data-source-connection=\\\"\" + edge.source.id + \"\\\"\\n               data-destination-connection=\\\"\" + edge.destination.id + \"\\\"\\n               data-destination-node=\\\"\" + destStepId + \"\\\">\\n                <path class=\\\"sub-edge outer\\\" d=\\\"\" + pathStr + \"\\\"></path>\\n                <path class=\\\"sub-edge inner\\\" d=\\\"\" + pathStr + \"\\\"></path>\\n            </g>\\n        \";\n    };\n    Edge.spawn = function (pathStr, connectionIDs) {\n        if (pathStr === void 0) { pathStr = \"\"; }\n        if (connectionIDs === void 0) { connectionIDs = {}; }\n        var ns = \"http://www.w3.org/2000/svg\";\n        var edge = document.createElementNS(ns, \"g\");\n        var _a = __read((connectionIDs.source || \"//\").split(\"/\"), 3), sourceSide = _a[0], sourceStepId = _a[1], sourcePort = _a[2];\n        var _b = __read((connectionIDs.destination || \"//\").split(\"/\"), 3), destSide = _b[0], destStepId = _b[1], destPort = _b[2];\n        edge.classList.add(\"edge\");\n        if (sourceStepId) {\n            edge.classList.add(sourceStepId);\n        }\n        if (destStepId) {\n            edge.classList.add(destStepId);\n        }\n        edge.setAttribute(\"tabindex\", \"-1\");\n        edge.setAttribute(\"data-destination-node\", destStepId);\n        edge.setAttribute(\"data-destination-port\", destPort);\n        edge.setAttribute(\"data-source-port\", sourcePort);\n        edge.setAttribute(\"data-source-node\", sourceStepId);\n        edge.setAttribute(\"data-source-connection\", connectionIDs.source);\n        edge.setAttribute(\"data-destination-connection\", connectionIDs.destination);\n        edge.innerHTML = \"\\n            <path class=\\\"sub-edge outer\\\" d=\\\"\" + pathStr + \"\\\"></path>\\n            <path class=\\\"sub-edge inner\\\" d=\\\"\" + pathStr + \"\\\"></path>\\n        \";\n        return edge;\n    };\n    Edge.spawnBetweenConnectionIDs = function (root, source, destination) {\n        if (source.startsWith(\"in\")) {\n            var tmp = source;\n            source = destination;\n            destination = tmp;\n        }\n        var sourceNode = root.querySelector(\".port[data-connection-id=\\\"\" + source + \"\\\"]\");\n        var destinationNode = root.querySelector(\".port[data-connection-id=\\\"\" + destination + \"\\\"]\");\n        var sourceCTM = geometry_1.Geometry.getTransformToElement(sourceNode, root);\n        var destCTM = geometry_1.Geometry.getTransformToElement(destinationNode, root);\n        var path = io_port_1.IOPort.makeConnectionPath(sourceCTM.e, sourceCTM.f, destCTM.e, destCTM.f);\n        // If there is already a connection between these ports, update that one instead\n        var existingEdge = root.querySelector(\".edge[data-source-connection=\\\"\" + source + \"\\\"][data-destination-connection=\\\"\" + destination + \"\\\"]\");\n        if (existingEdge) {\n            console.log(\"Updating existing edge\");\n            try {\n                for (var _a = __values(existingEdge.querySelectorAll(\".sub-edge\")), _b = _a.next(); !_b.done; _b = _a.next()) {\n                    var sub = _b.value;\n                    sub.setAttribute(\"d\", path);\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n            return existingEdge;\n        }\n        var edge = Edge.spawn(path, {\n            source: source,\n            destination: destination\n        });\n        var firstNode = root.querySelector(\".node\");\n        root.insertBefore(edge, firstNode);\n        return edge;\n        var e_1, _c;\n    };\n    ;\n    Edge.findEdge = function (root, sourceConnectionID, destinationConnectionID) {\n        return root.querySelector(\"[data-source-connection=\\\"\" + sourceConnectionID + \"\\\"][data-destination-connection=\\\"\" + destinationConnectionID + \"\\\"]\");\n    };\n    Edge.parseConnectionID = function (cid) {\n        var _a = __read((cid || \"//\").split(\"/\"), 3), side = _a[0], stepID = _a[1], portID = _a[2];\n        return { side: side, stepID: stepID, portID: portID };\n    };\n    return Edge;\n}());\nexports.Edge = Edge;\n//# sourceMappingURL=edge.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwl-svg/compiled/src/graph/edge.js\n// module id = 38\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __values = (this && this.__values) || function (o) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\n    if (m) return m.call(o);\n    return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar plugin_base_1 = require(\"../plugin-base\");\nvar SelectionPlugin = /** @class */ (function (_super) {\n    __extends(SelectionPlugin, _super);\n    function SelectionPlugin() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.selection = new Map();\n        _this.cleanups = [];\n        _this.selectionChangeCallbacks = [];\n        _this.css = {\n            selected: \"__selection-plugin-selected\",\n            highlight: \"__selection-plugin-highlight\",\n            fade: \"__selection-plugin-fade\",\n            plugin: \"__plugin-selection\"\n        };\n        return _this;\n    }\n    SelectionPlugin.prototype.registerWorkflow = function (workflow) {\n        var _this = this;\n        _super.prototype.registerWorkflow.call(this, workflow);\n        this.svg = this.workflow.svgRoot;\n        this.svg.classList.add(this.css.plugin);\n        var clickListener = this.onClick.bind(this);\n        this.svg.addEventListener(\"click\", clickListener);\n        this.cleanups.push(function () { return _this.svg.removeEventListener(\"click\", clickListener); });\n    };\n    SelectionPlugin.prototype.afterRender = function () {\n        this.restoreSelection();\n    };\n    SelectionPlugin.prototype.afterModelChange = function () {\n        if (typeof this.detachModelEvents === \"function\") {\n            this.detachModelEvents();\n        }\n        this.detachModelEvents = this.bindModelEvents();\n    };\n    SelectionPlugin.prototype.destroy = function () {\n        this.detachModelEvents();\n        this.detachModelEvents = undefined;\n        this.svg.classList.remove(this.css.plugin);\n        try {\n            for (var _a = __values(this.cleanups), _b = _a.next(); !_b.done; _b = _a.next()) {\n                var fn = _b.value;\n                fn();\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        var e_1, _c;\n    };\n    SelectionPlugin.prototype.clearSelection = function () {\n        var selection = this.svg.querySelectorAll(\".\" + this.css.selected);\n        var highlights = this.svg.querySelectorAll(\".\" + this.css.highlight);\n        try {\n            for (var selection_1 = __values(selection), selection_1_1 = selection_1.next(); !selection_1_1.done; selection_1_1 = selection_1.next()) {\n                var el = selection_1_1.value;\n                el.classList.remove(this.css.selected);\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (selection_1_1 && !selection_1_1.done && (_a = selection_1.return)) _a.call(selection_1);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n        try {\n            for (var highlights_1 = __values(highlights), highlights_1_1 = highlights_1.next(); !highlights_1_1.done; highlights_1_1 = highlights_1.next()) {\n                var el = highlights_1_1.value;\n                el.classList.remove(this.css.highlight);\n            }\n        }\n        catch (e_3_1) { e_3 = { error: e_3_1 }; }\n        finally {\n            try {\n                if (highlights_1_1 && !highlights_1_1.done && (_b = highlights_1.return)) _b.call(highlights_1);\n            }\n            finally { if (e_3) throw e_3.error; }\n        }\n        this.svg.classList.remove(this.css.fade);\n        this.selection.clear();\n        this.emitChange(null);\n        var e_2, _a, e_3, _b;\n    };\n    SelectionPlugin.prototype.getSelection = function () {\n        return this.selection;\n    };\n    SelectionPlugin.prototype.registerOnSelectionChange = function (fn) {\n        this.selectionChangeCallbacks.push(fn);\n    };\n    SelectionPlugin.prototype.selectStep = function (stepID) {\n        var query = \"[data-connection-id=\\\"\" + stepID + \"\\\"]\";\n        var el = this.svg.querySelector(query);\n        if (el) {\n            this.materializeClickOnElement(el);\n        }\n    };\n    SelectionPlugin.prototype.bindModelEvents = function () {\n        var _this = this;\n        var handler = function () { return _this.restoreSelection(); };\n        var cleanup = [];\n        var events = [\"connection.create\", \"connection.remove\"];\n        var _loop_1 = function (ev) {\n            var dispose = this_1.workflow.model.on(ev, handler);\n            cleanup.push(function () { return dispose.dispose(); });\n        };\n        var this_1 = this;\n        try {\n            for (var events_1 = __values(events), events_1_1 = events_1.next(); !events_1_1.done; events_1_1 = events_1.next()) {\n                var ev = events_1_1.value;\n                _loop_1(ev);\n            }\n        }\n        catch (e_4_1) { e_4 = { error: e_4_1 }; }\n        finally {\n            try {\n                if (events_1_1 && !events_1_1.done && (_a = events_1.return)) _a.call(events_1);\n            }\n            finally { if (e_4) throw e_4.error; }\n        }\n        return function () { return cleanup.forEach(function (fn) { return fn(); }); };\n        var e_4, _a;\n    };\n    SelectionPlugin.prototype.restoreSelection = function () {\n        var _this = this;\n        this.selection.forEach(function (type, connectionID) {\n            if (type === \"node\") {\n                var el = _this.svg.querySelector(\"[data-connection-id=\\\"\" + connectionID + \"\\\"]\");\n                if (el) {\n                    _this.selectNode(el);\n                }\n            }\n            else if (type === \"edge\") {\n                var _a = __read(connectionID.split(SelectionPlugin.edgePortsDelimiter), 2), sID = _a[0], dID = _a[1];\n                var edgeSelector = \"[data-source-connection=\\\"\" + sID + \"\\\"][data-destination-connection=\\\"\" + dID + \"\\\"]\";\n                var edge = _this.svg.querySelector(edgeSelector);\n                if (edge) {\n                    _this.selectEdge(edge);\n                }\n            }\n        });\n    };\n    SelectionPlugin.prototype.onClick = function (click) {\n        var target = click.target;\n        this.clearSelection();\n        this.materializeClickOnElement(target);\n    };\n    SelectionPlugin.prototype.materializeClickOnElement = function (target) {\n        var element;\n        if (element = this.workflow.findParent(target, \"node\")) {\n            this.selectNode(element);\n            this.selection.set(element.getAttribute(\"data-connection-id\"), \"node\");\n            this.emitChange(element);\n        }\n        else if (element = this.workflow.findParent(target, \"edge\")) {\n            this.selectEdge(element);\n            var cid = [\n                element.getAttribute(\"data-source-connection\"),\n                SelectionPlugin.edgePortsDelimiter,\n                element.getAttribute(\"data-destination-connection\")\n            ].join(\"\");\n            this.selection.set(cid, \"edge\");\n            this.emitChange(cid);\n        }\n    };\n    SelectionPlugin.prototype.selectNode = function (element) {\n        // Fade everything on canvas so we can highlight only selected stuff\n        this.svg.classList.add(this.css.fade);\n        // Mark this node as selected\n        element.classList.add(this.css.selected);\n        // Highlight it in case there are no edges on the graph\n        element.classList.add(this.css.highlight);\n        // Take all adjacent edges since we should highlight them and move them above the other edges\n        var nodeID = element.getAttribute(\"data-id\");\n        var adjacentEdges = this.svg.querySelectorAll(\".edge[data-source-node=\\\"\" + nodeID + \"\\\"],\" +\n            (\".edge[data-destination-node=\\\"\" + nodeID + \"\\\"\"));\n        // Find the first node to be an anchor, so we can put all those edges just before that one.\n        var firstNode = this.svg.getElementsByClassName(\"node\")[0];\n        try {\n            for (var adjacentEdges_1 = __values(adjacentEdges), adjacentEdges_1_1 = adjacentEdges_1.next(); !adjacentEdges_1_1.done; adjacentEdges_1_1 = adjacentEdges_1.next()) {\n                var edge = adjacentEdges_1_1.value;\n                // Highlight each adjacent edge\n                edge.classList.add(this.css.highlight);\n                // Move it above other edges\n                this.workflow.workflow.insertBefore(edge, firstNode);\n                // Find all adjacent nodes so we can highlight them\n                var sourceNodeID = edge.getAttribute(\"data-source-node\");\n                var destinationNodeID = edge.getAttribute(\"data-destination-node\");\n                var connectedNodes = this.svg.querySelectorAll(\".node[data-id=\\\"\" + sourceNodeID + \"\\\"],\" +\n                    (\".node[data-id=\\\"\" + destinationNodeID + \"\\\"]\"));\n                try {\n                    // Highlight each adjacent node\n                    for (var connectedNodes_1 = __values(connectedNodes), connectedNodes_1_1 = connectedNodes_1.next(); !connectedNodes_1_1.done; connectedNodes_1_1 = connectedNodes_1.next()) {\n                        var n = connectedNodes_1_1.value;\n                        n.classList.add(this.css.highlight);\n                    }\n                }\n                catch (e_5_1) { e_5 = { error: e_5_1 }; }\n                finally {\n                    try {\n                        if (connectedNodes_1_1 && !connectedNodes_1_1.done && (_a = connectedNodes_1.return)) _a.call(connectedNodes_1);\n                    }\n                    finally { if (e_5) throw e_5.error; }\n                }\n            }\n        }\n        catch (e_6_1) { e_6 = { error: e_6_1 }; }\n        finally {\n            try {\n                if (adjacentEdges_1_1 && !adjacentEdges_1_1.done && (_b = adjacentEdges_1.return)) _b.call(adjacentEdges_1);\n            }\n            finally { if (e_6) throw e_6.error; }\n        }\n        var e_6, _b, e_5, _a;\n    };\n    SelectionPlugin.prototype.selectEdge = function (element) {\n        element.classList.add(this.css.highlight);\n        element.classList.add(this.css.selected);\n        var sourceNode = element.getAttribute(\"data-source-node\");\n        var destNode = element.getAttribute(\"data-destination-node\");\n        var sourcePort = element.getAttribute(\"data-source-port\");\n        var destPort = element.getAttribute(\"data-destination-port\");\n        var inputPortSelector = \".node[data-id=\\\"\" + destNode + \"\\\"] .input-port[data-port-id=\\\"\" + destPort + \"\\\"]\";\n        var outputPortSelector = \".node[data-id=\\\"\" + sourceNode + \"\\\"] .output-port[data-port-id=\\\"\" + sourcePort + \"\\\"]\";\n        var connectedPorts = this.svg.querySelectorAll(inputPortSelector + \", \" + outputPortSelector);\n        try {\n            for (var connectedPorts_1 = __values(connectedPorts), connectedPorts_1_1 = connectedPorts_1.next(); !connectedPorts_1_1.done; connectedPorts_1_1 = connectedPorts_1.next()) {\n                var port = connectedPorts_1_1.value;\n                port.classList.add(this.css.highlight);\n            }\n        }\n        catch (e_7_1) { e_7 = { error: e_7_1 }; }\n        finally {\n            try {\n                if (connectedPorts_1_1 && !connectedPorts_1_1.done && (_a = connectedPorts_1.return)) _a.call(connectedPorts_1);\n            }\n            finally { if (e_7) throw e_7.error; }\n        }\n        var e_7, _a;\n    };\n    SelectionPlugin.prototype.emitChange = function (change) {\n        try {\n            for (var _a = __values(this.selectionChangeCallbacks), _b = _a.next(); !_b.done; _b = _a.next()) {\n                var fn = _b.value;\n                fn(change);\n            }\n        }\n        catch (e_8_1) { e_8 = { error: e_8_1 }; }\n        finally {\n            try {\n                if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n            }\n            finally { if (e_8) throw e_8.error; }\n        }\n        var e_8, _c;\n    };\n    SelectionPlugin.edgePortsDelimiter = \"$!$\";\n    return SelectionPlugin;\n}(plugin_base_1.PluginBase));\nexports.SelectionPlugin = SelectionPlugin;\n//# sourceMappingURL=selection.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwl-svg/compiled/src/plugins/selection/selection.js\n// module id = 39\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EventHub = /** @class */ (function () {\n    function EventHub(validEventList) {\n        this.handlers = validEventList.reduce(function (acc, ev) {\n            return Object.assign(acc, (_a = {}, _a[ev] = [], _a));\n            var _a;\n        }, {});\n    }\n    EventHub.prototype.on = function (event, handler) {\n        var _this = this;\n        this.guard(event, \"subscribe to\");\n        this.handlers[event].push(handler);\n        return function () { return _this.off(event, handler); };\n    };\n    EventHub.prototype.off = function (event, handler) {\n        this.guard(event, \"unsubscribe from\");\n        return this.handlers[event].splice(this.handlers[event].findIndex(function (h) { return handler === h; }), 1);\n    };\n    EventHub.prototype.emit = function (event) {\n        var data = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            data[_i - 1] = arguments[_i];\n        }\n        this.guard(event, \"emit\");\n        for (var i = 0; i < this.handlers[event].length; i++) {\n            (_a = this.handlers[event])[i].apply(_a, data);\n        }\n        var _a;\n    };\n    EventHub.prototype.empty = function () {\n        for (var event_1 in this.handlers) {\n            this.handlers[event_1] = [];\n        }\n    };\n    EventHub.prototype.guard = function (event, verb) {\n        if (!this.handlers[event]) {\n            throw new Error(\"Cannot \" + verb + \" a non-supported event \\u201C\" + event + \"\\u201D. \\n            Supported events are: \" + Object.keys(this.handlers).join(\", \") + \"\\u201D\");\n        }\n    };\n    return EventHub;\n}());\nexports.EventHub = EventHub;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/helpers/EventHub.js\n// module id = 40\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ErrorCode_1 = require(\"./validation/ErrorCode\");\nvar VertexMissing;\n(function (VertexMissing) {\n    VertexMissing[VertexMissing[\"CreateVertex\"] = 0] = \"CreateVertex\";\n    VertexMissing[VertexMissing[\"IgnoreEdge\"] = 1] = \"IgnoreEdge\";\n    VertexMissing[VertexMissing[\"AddEdge\"] = 2] = \"AddEdge\";\n    VertexMissing[VertexMissing[\"Error\"] = 3] = \"Error\";\n})(VertexMissing = exports.VertexMissing || (exports.VertexMissing = {}));\nvar Graph = /** @class */ (function () {\n    function Graph(vertices, edges, missing) {\n        if (missing === void 0) { missing = VertexMissing.Error; }\n        this.vertices = new Map(vertices);\n        this.edges = new Set();\n        if (edges) {\n            for (var _i = 0, _a = Array.from(edges); _i < _a.length; _i++) {\n                var item = _a[_i];\n                this.addEdge({ id: item[0] }, { id: item[1] }, true, true, missing);\n            }\n        }\n    }\n    Graph.prototype.addVertex = function (key, data, onConflict) {\n        if (data === void 0) { data = null; }\n        if (this.hasVertex(key)) {\n            if (onConflict) {\n                data = onConflict(this.vertices.get(key));\n            }\n            else {\n                throw (new ErrorCode_1.ValidityError(\"Vertex '\" + key + \"' already exists\", ErrorCode_1.ErrorCode.ID_DUPLICATE));\n            }\n        }\n        else {\n            this.vertices.set(key, data);\n        }\n    };\n    Graph.prototype.setVertexData = function (key, data) {\n        if (data === void 0) { data = null; }\n        this.throwMissingVertex(key);\n        this.vertices.set(key, data);\n    };\n    Graph.prototype.getVertexData = function (key) {\n        return this.vertices.get(key);\n    };\n    Graph.prototype.hasVertex = function (key) {\n        return this.vertices.has(key);\n    };\n    Graph.prototype.removeVertex = function (key) {\n        return this.vertices.delete(key);\n    };\n    Graph.prototype.addEdge = function (source, destination, isVisible, isValid, missing) {\n        if (isVisible === void 0) { isVisible = true; }\n        if (isValid === void 0) { isValid = true; }\n        if (missing === void 0) { missing = VertexMissing.Error; }\n        switch (missing) {\n            case VertexMissing.Error:\n                this.throwMissingVertex(source.id);\n                this.throwMissingVertex(destination.id);\n                break;\n            case VertexMissing.CreateVertex:\n                this.addVertex(source.id, null, function (old) {\n                    return old;\n                });\n                this.addVertex(destination.id, null, function (old) {\n                    return old;\n                });\n                break;\n            case VertexMissing.IgnoreEdge:\n                if (!(this.hasVertex(source.id) && this.hasVertex(destination.id))) {\n                    return;\n                }\n                break;\n        }\n        this.edges.add({\n            source: source, destination: destination, isVisible: isVisible, isValid: isValid\n        });\n    };\n    Graph.prototype.removeEdge = function (edge) {\n        if (Array.isArray(edge)) {\n            edge = {\n                source: { id: edge[0] },\n                destination: { id: edge[1] }\n            };\n        }\n        return this.edges.delete(Array.from(this.edges.values()).find(function (e) {\n            return e.source.id === edge.source.id && e.destination.id === edge.destination.id;\n        }));\n    };\n    Graph.prototype.topSort = function () {\n        var _this = this;\n        if (!this.isConnected()) {\n            throw (\"Can't sort unconnected graph\");\n        }\n        if (this.vertices.size == 0) {\n            return [];\n        }\n        if (this.vertices.size == 1) {\n            return [this.vertices.keys().next().value];\n        }\n        // initialize set of all nodes\n        var topNodesInit = new Set(this.vertices.keys());\n        // initialize set of all edges\n        var unusedEdges = new Set(this.edges.values());\n        var sorted = [];\n        // go through edges, remove nodes which are destinations (meaning they have incoming connections)\n        // for (let e of Array.from(unusedEdges)) {\n        //     topNodesInit.delete(e.destination.id);\n        // }\n        unusedEdges.forEach(function (e) {\n            topNodesInit.delete(e.destination.id);\n        });\n        // create an array of strings from first nodes\n        var topNodes = Array.from(topNodesInit);\n        var _loop_1 = function () {\n            // remove node from list and add it to sorted nodes\n            var n = topNodes.shift();\n            sorted.push(n);\n            // for each remaining edge check if it originates from this starting node\n            unusedEdges.forEach(function (e) {\n                if (e.source.id == n) {\n                    // delete the edge as used\n                    unusedEdges.delete(e);\n                    // if the destination node of this edge has no other sources\n                    // (no edges contain it as a destination)\n                    if (!_this.hasIncoming(e.destination.id, unusedEdges)) {\n                        // add it as a new starting node\n                        topNodes.push(e.destination.id);\n                    }\n                }\n            });\n        };\n        // for each of the first nodes, go through tree\n        while (topNodes.length > 0) {\n            _loop_1();\n        }\n        // leftover edges are back-edges indicating cycles\n        if (unusedEdges.size > 0) {\n            throw new Error(\"Graph has cycles\");\n        }\n        return sorted;\n    };\n    Graph.prototype.hasOutgoing = function (vertex, edges) {\n        if (edges === void 0) { edges = this.edges; }\n        for (var _i = 0, _a = Array.from(edges); _i < _a.length; _i++) {\n            var e = _a[_i];\n            if (e.source.id === vertex) {\n                return true;\n            }\n        }\n        return false;\n    };\n    Graph.prototype.hasIncoming = function (vertex, edges) {\n        if (edges === void 0) { edges = this.edges; }\n        for (var _i = 0, _a = Array.from(edges); _i < _a.length; _i++) {\n            var e = _a[_i];\n            if (e.destination.id == vertex) {\n                return true;\n            }\n        }\n        return false;\n    };\n    Graph.prototype.isConnected = function () {\n        if (this.vertices.size == 0 || this.vertices.size == 1) {\n            return true;\n        }\n        if (this.edges.size == 0) {\n            return false;\n        }\n        var unvisited = new Set(this.vertices.keys());\n        var starter = unvisited.values().next().value;\n        unvisited.delete(starter);\n        var unusedEdges = new Set(this.edges);\n        return this.connectedIter(unvisited, unusedEdges, [starter]);\n    };\n    Graph.prototype.connectedIter = function (unvisited, unusedEdges, toExpand) {\n        var reached = new Set();\n        for (var _i = 0, toExpand_1 = toExpand; _i < toExpand_1.length; _i++) {\n            var node = toExpand_1[_i];\n            for (var _a = 0, _b = this.reached(unusedEdges, node); _a < _b.length; _a++) {\n                var r = _b[_a];\n                reached.add(r);\n            }\n        }\n        for (var _c = 0, _d = Array.from(reached); _c < _d.length; _c++) {\n            var item = _d[_c];\n            var existing = unvisited.delete(item);\n            if (!existing) {\n                reached.delete(item);\n            }\n        }\n        if (unvisited.size == 0) {\n            return true;\n        }\n        if (reached.size == 0) {\n            // console.log(\"Unreached nodes\", Array.from(unvisited));\n            return false;\n        }\n        return this.connectedIter(unvisited, unusedEdges, Array.from(reached));\n    };\n    Graph.prototype.reached = function (unusedEdges, from) {\n        var reached = new Set();\n        for (var _i = 0, _a = Array.from(unusedEdges); _i < _a.length; _i++) {\n            var item = _a[_i];\n            if (item.source.id == from) {\n                reached.add(item.destination.id);\n                unusedEdges.delete(item);\n            }\n            else if (item.destination.id == from) {\n                reached.add(item.source.id);\n                unusedEdges.delete(item);\n            }\n        }\n        return Array.from(reached);\n    };\n    Graph.prototype.hasCycles = function () {\n        if (this.vertices.size == 0) {\n            return false;\n        }\n        if (this.edges.size == 0) {\n            return false;\n        }\n        try {\n            this.topSort();\n            return false;\n        }\n        catch (ex) {\n            return ex.message === \"Graph has cycles\";\n        }\n    };\n    Graph.prototype.throwMissingVertex = function (key) {\n        if (!this.hasVertex(key)) {\n            throw new Error(\"Vertex '\" + key + \"' doesn't exist\");\n        }\n    };\n    return Graph;\n}());\nexports.Graph = Graph;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/helpers/Graph.js\n// module id = 41\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar WorkflowOutputParameterModel_1 = require(\"../generic/WorkflowOutputParameterModel\");\nvar ParameterTypeModel_1 = require(\"../generic/ParameterTypeModel\");\nvar utils_1 = require(\"../helpers/utils\");\nvar V1WorkflowOutputParameterModel = /** @class */ (function (_super) {\n    __extends(V1WorkflowOutputParameterModel, _super);\n    function V1WorkflowOutputParameterModel(output, loc, eventHub) {\n        var _this = _super.call(this, loc, eventHub) || this;\n        if (output)\n            _this.deserialize(output);\n        return _this;\n    }\n    V1WorkflowOutputParameterModel.prototype.deserialize = function (output) {\n        var _this = this;\n        var serializedKeys = [\"id\", \"name\", \"outputSource\", \"type\", \"label\", \"doc\", \"sbg:fileTypes\"];\n        //@todo deserialization of outputBinding, streamable, linkMerge, secondaryFiles\n        this.isField = !!output.name; // record fields don't have ids\n        this.isField ? serializedKeys.push(\"name\") : serializedKeys.push(\"id\");\n        if (this.isField) {\n            this.id = output.name;\n        }\n        else {\n            this.id = output.id;\n        }\n        if (!this.isField) {\n            this.source = utils_1.ensureArray(output.outputSource);\n        }\n        this.type = new ParameterTypeModel_1.ParameterTypeModel(output.type, V1WorkflowOutputParameterModel, this.id + \"_field\", this.loc + \".type\", this.eventHub);\n        this.type.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        this.type.hasDirectoryType = true;\n        this._label = output.label;\n        this.description = utils_1.ensureArray(output.doc).join(\"\\n\\n\");\n        if (!this.isField) {\n            this.fileTypes = utils_1.commaSeparatedToArray(output[\"sbg:fileTypes\"]);\n        }\n        utils_1.spreadSelectProps(output, this.customProps, serializedKeys);\n    };\n    V1WorkflowOutputParameterModel.prototype.serialize = function () {\n        var base = {};\n        if (!this.isField) {\n            base.id = this.id;\n            if (this.source.length) {\n                base.outputSource = this.source.slice();\n            }\n            if (this.fileTypes.length) {\n                base[\"sbg:fileTypes\"] = this.fileTypes.join(\", \");\n            }\n        }\n        else {\n            base.name = this.id;\n        }\n        if (this.type)\n            base.type = this.type.serialize(\"v1.0\");\n        if (this._label)\n            base.label = this._label;\n        if (this.description)\n            base.doc = this.description;\n        return utils_1.spreadAllProps(base, this.customProps);\n    };\n    return V1WorkflowOutputParameterModel;\n}(WorkflowOutputParameterModel_1.WorkflowOutputParameterModel));\nexports.V1WorkflowOutputParameterModel = V1WorkflowOutputParameterModel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/v1.0/V1WorkflowOutputParameterModel.js\n// module id = 42\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CommandLineParsers_1 = require(\"./CommandLineParsers\");\nvar CommandArgumentModel_1 = require(\"../generic/CommandArgumentModel\");\nvar CommandInputParameterModel_1 = require(\"../generic/CommandInputParameterModel\");\nvar ExpressionModel_1 = require(\"../generic/ExpressionModel\");\nvar CommandLinePrepare = /** @class */ (function () {\n    function CommandLinePrepare() {\n    }\n    CommandLinePrepare.prepare = function (input, flatJobInputs, context, loc, cmdType) {\n        var inputType = \"primitive\";\n        if (!input) {\n            inputType === \"nullValue\";\n        }\n        if (input instanceof CommandInputParameterModel_1.CommandInputParameterModel || input.type === \"record\") {\n            var value = flatJobInputs[input.id] || null;\n            cmdType = \"input\";\n            if (value === null) {\n                inputType = \"nullValue\";\n            }\n            else if (Array.isArray(value)) {\n                inputType = \"array\";\n            }\n            else if (typeof value === \"boolean\") {\n                inputType = \"boolean\";\n            }\n            else if (typeof value === \"object\" && value.class !== \"File\" && value.class !== \"Directory\") {\n                inputType = \"record\";\n            }\n        }\n        if (input instanceof CommandArgumentModel_1.CommandArgumentModel) {\n            inputType = \"argument\";\n            cmdType = \"argument\";\n        }\n        if (input instanceof ExpressionModel_1.ExpressionModel) {\n            inputType = \"expression\";\n        }\n        if (cmdType === \"stdin\" || cmdType === \"stdout\") {\n            inputType = \"stream\";\n        }\n        if (typeof input === \"string\") {\n            inputType = \"string\";\n        }\n        var parser = CommandLineParsers_1.CommandLineParsers[inputType];\n        return parser(input, flatJobInputs, flatJobInputs[input.id || null], context, cmdType, loc);\n    };\n    ;\n    CommandLinePrepare.flattenInputsAndArgs = function (inputs) {\n        return inputs.filter(function (input) {\n            if (input instanceof CommandInputParameterModel_1.CommandInputParameterModel) {\n                return !!input.inputBinding;\n            }\n            return true;\n        }).reduce(function (acc, input, index) {\n            var sortFn = function (a, b) {\n                var c1, c2;\n                _a = [a, b].map(function (a) {\n                    return a instanceof CommandArgumentModel_1.CommandArgumentModel ?\n                        { pos: ~~a.position, id: index.toString() } :\n                        { pos: ~~a.inputBinding.position, id: a.id };\n                }), c1 = _a[0], c2 = _a[1];\n                return ~~c1.pos - ~~c2.pos || (c1.id ? c1.id.localeCompare(c2.id) : -1);\n                var _a;\n            };\n            if (input instanceof CommandInputParameterModel_1.CommandInputParameterModel) {\n                if (input.type.fields) {\n                    return acc.concat.apply(acc, [input].concat(CommandLinePrepare.flattenInputsAndArgs(input.type.fields).sort(sortFn)));\n                }\n            }\n            return acc.concat(input).sort(sortFn);\n        }, []);\n    };\n    CommandLinePrepare.flattenJob = function (job, master) {\n        return Object.keys(job).reduce(function (acc, key) {\n            if (job[key] === null)\n                return Object.assign(master, (_a = {}, _a[key] = null, _a));\n            if (typeof job[key] === \"object\" && job[key].class !== \"File\") {\n                return Object.assign(master, (_b = {}, _b[key] = job[key], _b), CommandLinePrepare.flattenJob(job[key], {}));\n            }\n            return Object.assign(master, (_c = {}, _c[key] = job[key], _c));\n            var _a, _b, _c;\n        }, {});\n    };\n    return CommandLinePrepare;\n}());\nexports.CommandLinePrepare = CommandLinePrepare;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/helpers/CommandLinePrepare.js\n// module id = 43\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CommandArgumentModel_1 = require(\"../generic/CommandArgumentModel\");\nvar V1ExpressionModel_1 = require(\"./V1ExpressionModel\");\nvar V1CommandLineBindingModel_1 = require(\"./V1CommandLineBindingModel\");\nvar ErrorCode_1 = require(\"../helpers/validation/ErrorCode\");\nvar V1CommandArgumentModel = /** @class */ (function (_super) {\n    __extends(V1CommandArgumentModel, _super);\n    function V1CommandArgumentModel(arg, loc, eventHub) {\n        var _this = _super.call(this, loc, eventHub) || this;\n        _this.hasExprPrimitive = true;\n        _this.hasShellQuote = true;\n        if (arg)\n            _this.deserialize(arg);\n        return _this;\n    }\n    Object.defineProperty(V1CommandArgumentModel.prototype, \"arg\", {\n        get: function () {\n            return this.primitive || this.binding;\n        },\n        set: function (value) {\n            this.deserialize(value);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    V1CommandArgumentModel.prototype.toggleBinding = function (state) {\n        var _this = this;\n        if (state) {\n            this.binding = new V1CommandLineBindingModel_1.V1CommandLineBindingModel({}, this.loc, this.eventHub);\n            this.binding.setValidationCallback(function (ev) { return _this.updateValidity(ev); });\n            this.primitive.clearIssue(ErrorCode_1.ErrorCode.ALL);\n            this.primitive = undefined;\n        }\n        else {\n            this.primitive = new V1ExpressionModel_1.V1ExpressionModel(\"\", this.loc, this.eventHub);\n            this.primitive.setValidationCallback(function (ev) { return _this.updateValidity(ev); });\n            this.binding.clearIssue(ErrorCode_1.ErrorCode.ALL);\n            this.binding = undefined;\n        }\n        this.hasBinding = state;\n    };\n    V1CommandArgumentModel.prototype.updatePrimitive = function (str) {\n        this.hasBinding = false;\n        this.binding = undefined;\n        this.primitive.setValue(str);\n    };\n    V1CommandArgumentModel.prototype.updateBinding = function (binding) {\n        var _this = this;\n        this.binding.prefix = binding.prefix;\n        this.binding.position = binding.position;\n        this.binding.separate = binding.separate;\n        this.binding.itemSeparator = binding.itemSeparator;\n        this.binding.shellQuote = binding.shellQuote;\n        this.binding.valueFrom = new V1ExpressionModel_1.V1ExpressionModel(binding.valueFrom, this.loc + \".valueFrom\");\n        this.binding.valueFrom.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        this.primitive = undefined;\n        this.hasBinding = true;\n    };\n    V1CommandArgumentModel.prototype.serialize = function () {\n        if (this.binding) {\n            return this.binding.serialize();\n        }\n        if (this.primitive) {\n            return this.primitive.serialize();\n        }\n        return \"\";\n    };\n    V1CommandArgumentModel.prototype.toString = function () {\n        if (this.primitive)\n            return this.primitive.serialize();\n        if (this.binding) {\n            return this.binding.valueFrom.toString();\n        }\n    };\n    V1CommandArgumentModel.prototype.deserialize = function (attr) {\n        var _this = this;\n        if (typeof attr === 'string' || attr instanceof V1ExpressionModel_1.V1ExpressionModel) {\n            this.hasBinding = false;\n            this.primitive = new V1ExpressionModel_1.V1ExpressionModel(attr, this.loc, this.eventHub);\n            this.primitive.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        }\n        else if (attr instanceof V1CommandLineBindingModel_1.V1CommandLineBindingModel) {\n            this.hasBinding = true;\n            this.binding = new V1CommandLineBindingModel_1.V1CommandLineBindingModel(attr.serialize(), this.loc, this.eventHub);\n            this.binding.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        }\n        else if (typeof attr === 'object') {\n            this.hasBinding = true;\n            this.binding = new V1CommandLineBindingModel_1.V1CommandLineBindingModel(attr, this.loc, this.eventHub);\n            this.binding.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        }\n    };\n    return V1CommandArgumentModel;\n}(CommandArgumentModel_1.CommandArgumentModel));\nexports.V1CommandArgumentModel = V1CommandArgumentModel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/v1.0/V1CommandArgumentModel.js\n// module id = 44\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CommandLineBindingModel_1 = require(\"../generic/CommandLineBindingModel\");\nvar V1ExpressionModel_1 = require(\"./V1ExpressionModel\");\nvar utils_1 = require(\"../helpers/utils\");\nvar ErrorCode_1 = require(\"../helpers/validation/ErrorCode\");\nvar V1CommandLineBindingModel = /** @class */ (function (_super) {\n    __extends(V1CommandLineBindingModel, _super);\n    function V1CommandLineBindingModel(binding, loc, eventHub) {\n        var _this = _super.call(this, loc, eventHub) || this;\n        _this.shellQuote = true;\n        _this.hasSecondaryFiles = false;\n        _this.hasShellQuote = true;\n        _this.serializedKeys = [\n            \"position\",\n            \"prefix\",\n            \"separate\",\n            \"itemSeparator\",\n            \"valueFrom\",\n            \"shellQuote\",\n            \"loadContents\"\n        ];\n        if (binding)\n            _this.deserialize(binding);\n        return _this;\n    }\n    V1CommandLineBindingModel.prototype.setValueFrom = function (val) {\n        var _this = this;\n        this.valueFrom = new V1ExpressionModel_1.V1ExpressionModel(val, this.loc + \".valueFrom\", this.eventHub);\n        this.valueFrom.setValidationCallback(function (err) { return _this.updateValidity(err); });\n    };\n    V1CommandLineBindingModel.prototype.deserialize = function (binding) {\n        var _this = this;\n        this.position = !isNaN(binding.position) ? parseInt(binding.position) : 0;\n        this.prefix = binding.prefix;\n        this.separate = binding.separate !== false; // default is true if not specified\n        this.itemSeparator = binding.itemSeparator;\n        this.shellQuote = binding.shellQuote !== false; // default is true if not specified\n        this.loadContents = binding.loadContents === true;\n        this.valueFrom = new V1ExpressionModel_1.V1ExpressionModel(binding.valueFrom, this.loc + \".valueFrom\", this.eventHub);\n        this.valueFrom.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        utils_1.spreadSelectProps(binding, this.customProps, this.serializedKeys);\n    };\n    V1CommandLineBindingModel.prototype.serialize = function () {\n        var _this = this;\n        var base = {};\n        this.serializedKeys.forEach(function (key) {\n            if (_this[key] !== undefined && _this[key] !== null && key !== \"valueFrom\") {\n                base[key] = _this[key];\n            }\n        });\n        if (!base.loadContents)\n            delete base.loadContents;\n        if (base.shellQuote !== false) {\n            delete base.shellQuote; // true by default\n        }\n        else if (base.shellQuote === false && this.eventHub) {\n            this.eventHub.emit(\"binding.shellQuote\", true);\n        }\n        if (base.separate !== false) {\n            delete base.separate; // true by default\n        }\n        if (this.valueFrom.serialize() !== undefined) {\n            base.valueFrom = this.valueFrom.serialize();\n        }\n        return utils_1.spreadAllProps(base, this.customProps);\n    };\n    V1CommandLineBindingModel.prototype.validate = function (context) {\n        var _this = this;\n        this.clearIssue(ErrorCode_1.ErrorCode.ALL);\n        var promises = [];\n        promises.push(this.valueFrom.validate(context));\n        return Promise.all(promises).then(function () { return _this.issues; });\n    };\n    return V1CommandLineBindingModel;\n}(CommandLineBindingModel_1.CommandLineBindingModel));\nexports.V1CommandLineBindingModel = V1CommandLineBindingModel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/v1.0/V1CommandLineBindingModel.js\n// module id = 45\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar WorkflowInputParameterModel_1 = require(\"../generic/WorkflowInputParameterModel\");\nvar ParameterTypeModel_1 = require(\"../generic/ParameterTypeModel\");\nvar utils_1 = require(\"../helpers/utils\");\nvar V1WorkflowInputParameterModel = /** @class */ (function (_super) {\n    __extends(V1WorkflowInputParameterModel, _super);\n    function V1WorkflowInputParameterModel(input, loc, eventHub) {\n        var _this = _super.call(this, loc, eventHub) || this;\n        if (input)\n            _this.deserialize(input);\n        return _this;\n    }\n    V1WorkflowInputParameterModel.prototype.deserialize = function (attr) {\n        var _this = this;\n        var serializedKeys = [\"id\", \"name\", \"type\", \"label\", \"doc\", \"sbg:fileTypes\"];\n        // @todo serialization of secondaryFiles, streamable, inputBinding\n        this._label = attr.label;\n        this.description = utils_1.ensureArray(attr.doc).join(\"\\n\\n\");\n        this.id = attr.id || attr.name;\n        this.isField = !!attr.name;\n        this.type = new ParameterTypeModel_1.ParameterTypeModel(attr.type, V1WorkflowInputParameterModel, this.id + \"_field\", this.loc + \".type\", this.eventHub);\n        this.type.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        this.type.hasDirectoryType = true;\n        this.fileTypes = utils_1.commaSeparatedToArray(attr[\"sbg:fileTypes\"]);\n        this.isVisible = !attr[\"sbg:exposed\"];\n        utils_1.spreadSelectProps(attr, this.customProps, serializedKeys);\n    };\n    V1WorkflowInputParameterModel.prototype.serialize = function () {\n        var base = {};\n        if (this.isField) {\n            base.name = this.id;\n        }\n        else {\n            base.id = this.id;\n            if (this.fileTypes.length)\n                base[\"sbg:fileTypes\"] = this.fileTypes.join(\", \");\n        }\n        if (this.type.type)\n            base.type = this.type.serialize(\"v1.0\");\n        if (this._label)\n            base.label = this._label;\n        if (this.description)\n            base.doc = this.description;\n        return utils_1.spreadAllProps(base, this.customProps);\n    };\n    return V1WorkflowInputParameterModel;\n}(WorkflowInputParameterModel_1.WorkflowInputParameterModel));\nexports.V1WorkflowInputParameterModel = V1WorkflowInputParameterModel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/v1.0/V1WorkflowInputParameterModel.js\n// module id = 46\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CommandOutputParameterModel_1 = require(\"../generic/CommandOutputParameterModel\");\nvar ParameterTypeModel_1 = require(\"../generic/ParameterTypeModel\");\nvar utils_1 = require(\"../helpers/utils\");\nvar V1CommandOutputBindingModel_1 = require(\"./V1CommandOutputBindingModel\");\nvar V1ExpressionModel_1 = require(\"./V1ExpressionModel\");\nvar V1CommandOutputParameterModel = /** @class */ (function (_super) {\n    __extends(V1CommandOutputParameterModel, _super);\n    function V1CommandOutputParameterModel(output, loc, eventHub) {\n        var _this = _super.call(this, loc, eventHub) || this;\n        _this.secondaryFiles = [];\n        _this.hasSecondaryFiles = true;\n        _this.customProps = {};\n        if (output)\n            _this.deserialize(output);\n        return _this;\n    }\n    V1CommandOutputParameterModel.prototype.addSecondaryFile = function (file) {\n        if (file === void 0) { file = \"\"; }\n        return this._addSecondaryFile(file, V1ExpressionModel_1.V1ExpressionModel, this.loc);\n    };\n    V1CommandOutputParameterModel.prototype.updateSecondaryFiles = function (files) {\n        this._updateSecondaryFiles(files);\n    };\n    V1CommandOutputParameterModel.prototype.removeSecondaryFile = function (index) {\n        this._removeSecondaryFile(index);\n    };\n    V1CommandOutputParameterModel.prototype.serialize = function () {\n        var base = {};\n        !this.isField ? base.id = this.id : base.name = this.id;\n        if (this.description)\n            base.doc = this.description;\n        if (this.label)\n            base.label = this.label;\n        base.type = this.type.serialize(\"v1.0\");\n        if (this.outputBinding) {\n            base.outputBinding = this.outputBinding.serialize();\n        }\n        if (!this.isField && this.secondaryFiles.length && (this.type.type === \"File\" || this.type.items === \"File\")) {\n            base.secondaryFiles = this.secondaryFiles.map(function (f) { return f.serialize(); }).filter(function (f) { return !!f; });\n        }\n        if (!this.isField && this.fileTypes.length) {\n            base[\"sbg:fileTypes\"] = this.fileTypes.join(\", \");\n        }\n        if (!this.isField && this.streamable) {\n            base.streamable = this.streamable;\n        }\n        return utils_1.spreadAllProps(base, this.customProps);\n    };\n    V1CommandOutputParameterModel.prototype.deserialize = function (attr) {\n        var _this = this;\n        var serializedKeys = [\"id\", \"type\", \"outputBinding\", \"label\", \"doc\", \"secondaryFiles\", \"sbg:fileTypes\", \"streamable\"];\n        this.isField = !!attr.name; // record fields don't have ids\n        this.id = attr.id || attr.name;\n        this.type = new ParameterTypeModel_1.ParameterTypeModel(attr.type, V1CommandOutputParameterModel, this.id + \"_field\", this.loc + \".type\", this.eventHub);\n        this.type.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        this.type.hasDirectoryType = true;\n        if (utils_1.isType(this, [\"record\", \"enum\"]) && !this.type.name) {\n            this.type.name = this.id;\n        }\n        this.outputBinding = new V1CommandOutputBindingModel_1.V1CommandOutputBindingModel(attr.outputBinding, this.loc + \".outputBinding\", this.eventHub);\n        this.outputBinding.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        this.label = attr.label;\n        this.description = utils_1.ensureArray(attr.doc).join(\"\\n\\n\");\n        // properties only on inputs, not on fields\n        this.secondaryFiles = utils_1.ensureArray(attr.secondaryFiles).map(function (f) { return _this.addSecondaryFile(f); });\n        this.fileTypes = utils_1.commaSeparatedToArray(attr[\"sbg:fileTypes\"]);\n        this.streamable = attr.streamable;\n        this.attachFileTypeListeners();\n        utils_1.spreadSelectProps(attr, this.customProps, serializedKeys);\n    };\n    return V1CommandOutputParameterModel;\n}(CommandOutputParameterModel_1.CommandOutputParameterModel));\nexports.V1CommandOutputParameterModel = V1CommandOutputParameterModel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/v1.0/V1CommandOutputParameterModel.js\n// module id = 47\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CommandOutputBindingModel_1 = require(\"../generic/CommandOutputBindingModel\");\nvar V1ExpressionModel_1 = require(\"./V1ExpressionModel\");\nvar ErrorCode_1 = require(\"../helpers/validation/ErrorCode\");\nvar V1CommandOutputBindingModel = /** @class */ (function (_super) {\n    __extends(V1CommandOutputBindingModel, _super);\n    function V1CommandOutputBindingModel(binding, loc, eventHub) {\n        if (binding === void 0) { binding = {}; }\n        var _this = _super.call(this, loc, eventHub) || this;\n        _this.hasSecondaryFiles = false;\n        _this.hasMetadata = false;\n        _this.hasInheritMetadata = true;\n        if (binding)\n            _this.deserialize(binding);\n        return _this;\n    }\n    Object.defineProperty(V1CommandOutputBindingModel.prototype, \"glob\", {\n        get: function () {\n            return this._glob;\n        },\n        set: function (value) {\n            this.setGlob(value, V1ExpressionModel_1.V1ExpressionModel);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(V1CommandOutputBindingModel.prototype, \"outputEval\", {\n        get: function () {\n            return this._outputEval;\n        },\n        set: function (value) {\n            if (!(new RegExp(V1CommandOutputBindingModel.INHERIT_REGEX).test(value.serialize())) && this.inheritMetadataFrom) {\n                this.inheritMetadataFrom = null;\n            }\n            this.setOutputEval(value, V1ExpressionModel_1.V1ExpressionModel);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    V1CommandOutputBindingModel.prototype.setInheritMetadataFrom = function (inputId) {\n        var serialized = this._outputEval.serialize();\n        // inherit was set\n        if (inputId) {\n            this.inheritMetadataFrom = inputId;\n            this.eventHub.emit(\"output.metadata.inherit\");\n            var inheritExpr = \"$(inheritMetadata(self, inputs.\" + inputId + \"))\";\n            // output eval doesn't exist\n            if (serialized === undefined) {\n                this._outputEval.setValue(inheritExpr);\n            }\n            else {\n                // remove existing inherit statements if they exist\n                serialized = serialized.replace(new RegExp(V1CommandOutputBindingModel.INHERIT_REGEX), \"\");\n                if (serialized) {\n                    this._outputEval.setIssue((_a = {}, _a[this.loc + \".outputEval\"] = {\n                        type: \"warning\",\n                        code: ErrorCode_1.ErrorCode.OUTPUT_EVAL_INHERIT,\n                        message: \"Inheriting metadata appended some code to outputEval, this might change its behavior\"\n                    }, _a));\n                }\n                // output eval exists and is something else\n                this._outputEval.setValue((serialized + \"\\n\\n\" + inheritExpr).trim());\n            }\n        }\n        else if (serialized !== undefined) {\n            // inherit was removed and should be removed from outputEval\n            var newOutputEval = serialized.replace(new RegExp(V1CommandOutputBindingModel.INHERIT_REGEX), \"\");\n            this._outputEval.setValue(newOutputEval || undefined);\n            this._outputEval.clearIssue(ErrorCode_1.ErrorCode.OUTPUT_EVAL_INHERIT);\n            // set inherit to empty value\n            this.inheritMetadataFrom = inputId;\n        }\n        var _a;\n    };\n    V1CommandOutputBindingModel.prototype.deserialize = function (binding) {\n        var _this = this;\n        var glob = binding.glob;\n        if (Array.isArray(binding.glob)) {\n            glob = binding.glob[0];\n        }\n        this.loadContents = binding.loadContents === true;\n        this._glob = new V1ExpressionModel_1.V1ExpressionModel(glob, this.loc + \".glob\", this.eventHub);\n        this._glob.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        this.validateGlob();\n        this._outputEval = new V1ExpressionModel_1.V1ExpressionModel(binding.outputEval, this.loc + \".outputEval\", this.eventHub);\n        this._outputEval.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        // populate inherit metadata if it existsr\n        if (binding.outputEval) {\n            // only going to look at the first one, should be the only one\n            // have to make a new RegExp because otherwise .exec would be called multiple times on the same one\n            var matches = new RegExp(V1CommandOutputBindingModel.INHERIT_REGEX).exec(binding.outputEval);\n            this.inheritMetadataFrom = matches ? matches[1] : null;\n        }\n    };\n    V1CommandOutputBindingModel.prototype.serialize = function () {\n        var base = {};\n        if (this.loadContents)\n            base.loadContents = true;\n        if (this._glob && this._glob.serialize() !== undefined)\n            base.glob = this._glob.serialize();\n        if (this._outputEval && this._outputEval.serialize() !== undefined)\n            base.outputEval = this._outputEval.serialize();\n        return base;\n    };\n    V1CommandOutputBindingModel.INHERIT_REGEX = /\\$\\(inheritMetadata\\(self, inputs.(.*?)\\)\\)/g;\n    return V1CommandOutputBindingModel;\n}(CommandOutputBindingModel_1.CommandOutputBindingModel));\nexports.V1CommandOutputBindingModel = V1CommandOutputBindingModel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/v1.0/V1CommandOutputBindingModel.js\n// module id = 48\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CommandLineBindingModel_1 = require(\"../generic/CommandLineBindingModel\");\nvar utils_1 = require(\"../helpers/utils\");\nvar SBDraft2ExpressionModel_1 = require(\"./SBDraft2ExpressionModel\");\nvar SBDraft2CommandLineBindingModel = /** @class */ (function (_super) {\n    __extends(SBDraft2CommandLineBindingModel, _super);\n    function SBDraft2CommandLineBindingModel(binding, loc, eventHub) {\n        var _this = _super.call(this, loc, eventHub) || this;\n        _this.hasSecondaryFiles = true;\n        _this.hasShellQuote = false;\n        _this.serializedKeys = [\n            \"position\",\n            \"prefix\",\n            \"separate\",\n            \"itemSeparator\",\n            \"valueFrom\",\n            \"loadContents\",\n            \"secondaryFiles\"\n        ];\n        _this.deserialize(binding || {});\n        return _this;\n    }\n    SBDraft2CommandLineBindingModel.prototype.setValueFrom = function (val) {\n        var _this = this;\n        this.valueFrom = new SBDraft2ExpressionModel_1.SBDraft2ExpressionModel(val, this.loc + \".valueFrom\", this.eventHub);\n        this.valueFrom.setValidationCallback(function (err) { return _this.updateValidity(err); });\n    };\n    SBDraft2CommandLineBindingModel.prototype.validate = function (context) {\n        var _this = this;\n        var promises = [];\n        if (this.valueFrom) {\n            promises.push(this.valueFrom.validate(context));\n        }\n        return Promise.all(promises).then(function () { return _this.issues; }, function (ex) {\n            console.warn(\"SBDraft2CommandLineBindingModel threw error in validation: \" + ex);\n            return _this.issues;\n        });\n    };\n    SBDraft2CommandLineBindingModel.prototype.serialize = function () {\n        var _this = this;\n        var base = {};\n        this.serializedKeys.forEach(function (key) {\n            if (_this[key] !== undefined && _this[key] !== null && key !== \"valueFrom\" && key !== \"secondaryFiles\") {\n                base[key] = _this[key];\n            }\n        });\n        if (!base.loadContents)\n            delete base.loadContents;\n        if (this.valueFrom.serialize() !== undefined) {\n            base.valueFrom = this.valueFrom.serialize();\n        }\n        return utils_1.spreadAllProps(base, this.customProps);\n    };\n    SBDraft2CommandLineBindingModel.prototype.deserialize = function (binding) {\n        var _this = this;\n        if (binding && binding.constructor === Object) {\n            this.position = !isNaN(binding.position) ? parseInt(binding.position) : 0;\n            this.prefix = binding.prefix;\n            this.separate = binding.separate;\n            this.itemSeparator = binding.itemSeparator;\n            this.loadContents = binding.loadContents === true;\n            this.valueFrom = new SBDraft2ExpressionModel_1.SBDraft2ExpressionModel(binding.valueFrom, this.loc + \".valueFrom\", this.eventHub);\n            this.valueFrom.setValidationCallback(function (err) { return _this.updateValidity(err); });\n            // populates object with all custom attributes not covered in model\n            utils_1.spreadSelectProps(binding, this.customProps, this.serializedKeys);\n        }\n    };\n    return SBDraft2CommandLineBindingModel;\n}(CommandLineBindingModel_1.CommandLineBindingModel));\nexports.SBDraft2CommandLineBindingModel = SBDraft2CommandLineBindingModel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/d2sb/SBDraft2CommandLineBindingModel.js\n// module id = 49\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ValidationBase_1 = require(\"../helpers/validation/ValidationBase\");\nvar V1CommandInputParameterModel_1 = require(\"../v1.0/V1CommandInputParameterModel\");\nvar V1CommandOutputParameterModel_1 = require(\"../v1.0/V1CommandOutputParameterModel\");\nvar utils_1 = require(\"../helpers/utils\");\nvar ExpressionToolModel = /** @class */ (function (_super) {\n    __extends(ExpressionToolModel, _super);\n    function ExpressionToolModel(tool, loc) {\n        var _this = _super.call(this, loc) || this;\n        _this[\"class\"] = \"ExperssionTool\";\n        _this.customProps = {};\n        if (tool)\n            _this.deserialize(tool);\n        return _this;\n    }\n    ExpressionToolModel.prototype.serialize = function () {\n        return utils_1.spreadAllProps({}, this.customProps);\n    };\n    ExpressionToolModel.prototype.deserialize = function (attr) {\n        this.inputs = utils_1.ensureArray(attr.inputs, \"id\", \"type\").map(function (i) { return new V1CommandInputParameterModel_1.V1CommandInputParameterModel(i); });\n        this.outputs = utils_1.ensureArray(attr.outputs, \"id\", \"type\").map(function (o) { return new V1CommandOutputParameterModel_1.V1CommandOutputParameterModel(o); });\n        this.id = attr.id;\n        this.label = attr.label;\n        this.description = attr.doc || attr.description;\n        utils_1.spreadSelectProps(attr, this.customProps, []);\n    };\n    return ExpressionToolModel;\n}(ValidationBase_1.ValidationBase));\nexports.ExpressionToolModel = ExpressionToolModel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/generic/ExpressionToolModel.js\n// module id = 50\n// module chunks = 0","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./src/graph/workflow\"));\n__export(require(\"./src/graph/step-node\"));\n__export(require(\"./src/plugins/port-drag/port-drag\"));\n__export(require(\"./src/plugins/arrange/arrange\"));\n__export(require(\"./src/plugins/edge-hover/edge-hover\"));\n__export(require(\"./src/plugins/node-move/node-move\"));\n__export(require(\"./src/plugins/validate/validate\"));\n__export(require(\"./src/plugins/selection/selection\"));\n__export(require(\"./src/plugins/zoom/zoom\"));\n__export(require(\"./src/plugins/deletion/deletion\"));\n// for implementing third-party plugins\n__export(require(\"./src/plugins/plugin-base\"));\n//# sourceMappingURL=index.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwl-svg/compiled/index.js\n// module id = 51\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Geometry = /** @class */ (function () {\n    function Geometry() {\n    }\n    Geometry.distance = function (x1, y1, x2, y2) {\n        return Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\n    };\n    Geometry.getTransformToElement = function (from, to) {\n        var getPosition = function (node, addE, addF) {\n            if (addE === void 0) { addE = 0; }\n            if (addF === void 0) { addF = 0; }\n            if (!node.ownerSVGElement) {\n                // node is the root svg element\n                var matrix = node.createSVGMatrix();\n                matrix.e = addE;\n                matrix.f = addF;\n                return matrix;\n            }\n            else {\n                // node still has parent elements\n                var _a = node.transform.baseVal.getItem(0).matrix, e = _a.e, f = _a.f;\n                return getPosition(node.parentNode, e + addE, f + addF);\n            }\n        };\n        var toPosition = getPosition(to);\n        var fromPosition = getPosition(from);\n        var result = from.ownerSVGElement.createSVGMatrix();\n        result.e = toPosition.e - fromPosition.e;\n        result.f = toPosition.f - fromPosition.f;\n        return result.inverse();\n    };\n    return Geometry;\n}());\nexports.Geometry = Geometry;\n//# sourceMappingURL=geometry.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwl-svg/compiled/src/utils/geometry.js\n// module id = 52\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar IOPort = /** @class */ (function () {\n    function IOPort() {\n    }\n    /**\n     * @param x1\n     * @param y1\n     * @param x2\n     * @param y2\n     * @param {\"right\" | \"left\" | string} forceDirection\n     * @returns {string}\n     */\n    IOPort.makeConnectionPath = function (x1, y1, x2, y2, forceDirection) {\n        if (forceDirection === void 0) { forceDirection = \"right\"; }\n        if (!forceDirection) {\n            return \"M \" + x1 + \" \" + y1 + \" C \" + (x1 + x2) / 2 + \" \" + y1 + \" \" + (x1 + x2) / 2 + \" \" + y2 + \" \" + x2 + \" \" + y2;\n        }\n        else if (forceDirection === \"right\") {\n            var outDir = x1 + Math.abs(x1 - x2) / 2;\n            var inDir = x2 - Math.abs(x1 - x2) / 2;\n            return \"M \" + x1 + \" \" + y1 + \" C \" + outDir + \" \" + y1 + \" \" + inDir + \" \" + y2 + \" \" + x2 + \" \" + y2;\n        }\n        else if (forceDirection === \"left\") {\n            var outDir = x1 - Math.abs(x1 - x2) / 2;\n            var inDir = x2 + Math.abs(x1 - x2) / 2;\n            return \"M \" + x1 + \" \" + y1 + \" C \" + outDir + \" \" + y1 + \" \" + inDir + \" \" + y2 + \" \" + x2 + \" \" + y2;\n        }\n    };\n    IOPort.radius = 7;\n    return IOPort;\n}());\nexports.IOPort = IOPort;\n//# sourceMappingURL=io-port.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwl-svg/compiled/src/graph/io-port.js\n// module id = 53\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar SVGUtils = /** @class */ (function () {\n    function SVGUtils() {\n    }\n    SVGUtils.matrixToTransformAttr = function (matrix) {\n        var a = matrix.a, b = matrix.b, c = matrix.c, d = matrix.d, e = matrix.e, f = matrix.f;\n        return \"matrix(\" + a + \", \" + b + \", \" + c + \", \" + d + \", \" + e + \", \" + f + \")\";\n    };\n    SVGUtils.createMatrix = function () {\n        return document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\").createSVGMatrix();\n    };\n    return SVGUtils;\n}());\nexports.SVGUtils = SVGUtils;\n//# sourceMappingURL=svg-utils.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwl-svg/compiled/src/utils/svg-utils.js\n// module id = 54\n// module chunks = 0","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nvar __values = (this && this.__values) || function (o) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\n    if (m) return m.call(o);\n    return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar edge_1 = require(\"./edge\");\nvar graph_node_1 = require(\"./graph-node\");\nvar template_parser_1 = require(\"./template-parser\");\nvar StepNode = /** @class */ (function () {\n    function StepNode(element, stepModel) {\n        this.stepEl = element;\n        this.svg = element.ownerSVGElement;\n        this.model = stepModel;\n    }\n    StepNode.prototype.update = function () {\n        var tpl = graph_node_1.GraphNode.makeTemplate(this.model);\n        var el = template_parser_1.TemplateParser.parse(tpl);\n        this.stepEl.innerHTML = el.innerHTML;\n        // Reposition all edges\n        var incomingEdges = this.svg.querySelectorAll(\".edge[data-destination-node=\\\"\" + this.model.connectionId + \"\\\"]\");\n        var outgoingEdges = this.svg.querySelectorAll(\".edge[data-source-node=\\\"\" + this.model.connectionId + \"\\\"\");\n        try {\n            for (var _a = __values(__spread(incomingEdges, outgoingEdges)), _b = _a.next(); !_b.done; _b = _a.next()) {\n                var edge = _b.value;\n                edge_1.Edge.spawnBetweenConnectionIDs(this.svg.querySelector(\".workflow\"), edge.getAttribute(\"data-source-connection\"), edge.getAttribute(\"data-destination-connection\"));\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        console.log(\"Should redraw input port\", incomingEdges);\n        var e_1, _c;\n    };\n    return StepNode;\n}());\nexports.StepNode = StepNode;\n//# sourceMappingURL=step-node.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwl-svg/compiled/src/graph/step-node.js\n// module id = 55\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar TemplateParser = /** @class */ (function () {\n    function TemplateParser() {\n    }\n    TemplateParser.parse = function (tpl) {\n        var ns = \"http://www.w3.org/2000/svg\";\n        var node = document.createElementNS(ns, \"g\");\n        node.innerHTML = tpl;\n        return node.firstElementChild;\n    };\n    return TemplateParser;\n}());\nexports.TemplateParser = TemplateParser;\n//# sourceMappingURL=template-parser.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwl-svg/compiled/src/graph/template-parser.js\n// module id = 56\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __values = (this && this.__values) || function (o) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\n    if (m) return m.call(o);\n    return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar plugin_base_1 = require(\"../plugin-base\");\nvar _1 = require(\"../../\");\nvar graph_node_1 = require(\"../../graph/graph-node\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar edge_1 = require(\"../../graph/edge\");\nvar edge_panning_1 = require(\"../../behaviors/edge-panning\");\nvar SVGPortDragPlugin = /** @class */ (function (_super) {\n    __extends(SVGPortDragPlugin, _super);\n    function SVGPortDragPlugin() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /** How far away from the port you need to drag in order to create a new input/output instead of snapping */\n        _this.snapRadius = 120;\n        /** Map of CSS classes attached by this plugin */\n        _this.css = {\n            /** Added to svgRoot as a sign that this plugin is active */\n            plugin: \"__plugin-port-drag\",\n            /** Suggests that an element that contains it will be the one to snap to */\n            snap: \"__port-drag-snap\",\n            /** Added to svgRoot while dragging is in progress */\n            dragging: \"__port-drag-dragging\",\n            /** Will be added to suggested ports and their parent nodes */\n            suggestion: \"__port-drag-suggestion\",\n        };\n        _this.detachDragListenerFn = undefined;\n        _this.wheelPrevent = function (ev) { return ev.stopPropagation(); };\n        _this.ghostX = 0;\n        _this.ghostY = 0;\n        return _this;\n    }\n    SVGPortDragPlugin.prototype.registerWorkflow = function (workflow) {\n        _super.prototype.registerWorkflow.call(this, workflow);\n        this.panner = new edge_panning_1.EdgePanner(this.workflow);\n        this.workflow.svgRoot.classList.add(this.css.plugin);\n    };\n    SVGPortDragPlugin.prototype.afterRender = function () {\n        if (this.workflow.editingEnabled) {\n            this.attachPortDrag();\n        }\n    };\n    SVGPortDragPlugin.prototype.onEditableStateChange = function (enabled) {\n        if (enabled) {\n            this.attachPortDrag();\n        }\n        else {\n            this.detachPortDrag();\n        }\n    };\n    SVGPortDragPlugin.prototype.destroy = function () {\n        this.detachPortDrag();\n    };\n    SVGPortDragPlugin.prototype.detachPortDrag = function () {\n        if (typeof this.detachDragListenerFn === \"function\") {\n            this.detachDragListenerFn();\n        }\n        this.detachDragListenerFn = undefined;\n    };\n    SVGPortDragPlugin.prototype.attachPortDrag = function () {\n        this.detachPortDrag();\n        this.detachDragListenerFn = this.workflow.domEvents.drag(\".port\", this.onMove.bind(this), this.onMoveStart.bind(this), this.onMoveEnd.bind(this));\n    };\n    SVGPortDragPlugin.prototype.onMove = function (dx, dy, ev, portElement) {\n        var _this = this;\n        document.addEventListener(\"mousewheel\", this.wheelPrevent, true);\n        var mouseOnSVG = this.workflow.transformScreenCTMtoCanvas(ev.clientX, ev.clientY);\n        var scale = this.workflow.scale;\n        var sdx = (dx - this.lastMouseMove.x) / scale;\n        var sdy = (dy - this.lastMouseMove.y) / scale;\n        /** We might have hit the boundary and need to start panning */\n        this.panner.triggerCollisionDetection(ev.clientX, ev.clientY, function (sdx, sdy) {\n            _this.ghostX += sdx;\n            _this.ghostY += sdy;\n            _this.translateGhostNode(_this.ghostX, _this.ghostY);\n            _this.updateEdge(_this.portOnCanvas.x, _this.portOnCanvas.y, _this.ghostX, _this.ghostY);\n        });\n        var nodeToMouseDistance = geometry_1.Geometry.distance(this.nodeCoords.x, this.nodeCoords.y, mouseOnSVG.x, mouseOnSVG.y);\n        var closestPort = this.findClosestPort(mouseOnSVG.x, mouseOnSVG.y);\n        this.updateSnapPort(closestPort.portEl, closestPort.distance);\n        this.ghostX += sdx;\n        this.ghostY += sdy;\n        this.translateGhostNode(this.ghostX, this.ghostY);\n        this.updateGhostNodeVisibility(nodeToMouseDistance, closestPort.distance);\n        this.updateEdge(this.portOnCanvas.x, this.portOnCanvas.y, this.ghostX, this.ghostY);\n        this.lastMouseMove = { x: dx, y: dy };\n    };\n    /**\n     * @FIXME: Add panning\n     * @param {MouseEvent} ev\n     * @param {SVGGElement} portEl\n     */\n    SVGPortDragPlugin.prototype.onMoveStart = function (ev, portEl) {\n        this.lastMouseMove = { x: 0, y: 0 };\n        this.originPort = portEl;\n        var portCTM = portEl.getScreenCTM();\n        this.portOnCanvas = this.workflow.transformScreenCTMtoCanvas(portCTM.e, portCTM.f);\n        this.ghostX = this.portOnCanvas.x;\n        this.ghostY = this.portOnCanvas.y;\n        // Needed for collision detection\n        this.boundingClientRect = this.workflow.svgRoot.getBoundingClientRect();\n        var nodeMatrix = this.workflow.findParent(portEl).transform.baseVal.getItem(0).matrix;\n        this.nodeCoords = {\n            x: nodeMatrix.e,\n            y: nodeMatrix.f\n        };\n        var workflowGroup = this.workflow.workflow;\n        this.portType = portEl.classList.contains(\"input-port\") ? \"input\" : \"output\";\n        this.ghostNode = this.createGhostNode(this.portType);\n        workflowGroup.appendChild(this.ghostNode);\n        /** @FIXME: this should come from workflow */\n        this.edgeGroup = edge_1.Edge.spawn();\n        this.edgeGroup.classList.add(this.css.dragging);\n        workflowGroup.appendChild(this.edgeGroup);\n        this.workflow.svgRoot.classList.add(this.css.dragging);\n        this.portOrigins = this.getPortCandidateTransformations(portEl);\n        this.highlightSuggestedPorts(portEl.getAttribute(\"data-connection-id\"));\n    };\n    SVGPortDragPlugin.prototype.onMoveEnd = function (ev) {\n        document.removeEventListener(\"mousewheel\", this.wheelPrevent, true);\n        this.panner.stop();\n        var ghostType = this.ghostNode.getAttribute(\"data-type\");\n        var ghostIsVisible = !this.ghostNode.classList.contains(\"hidden\");\n        var shouldSnap = this.snapPort !== undefined;\n        var shouldCreateInput = ghostIsVisible && ghostType === \"input\";\n        var shouldCreateOutput = ghostIsVisible && ghostType === \"output\";\n        var portID = this.originPort.getAttribute(\"data-connection-id\");\n        if (shouldSnap) {\n            this.createEdgeBetweenPorts(this.originPort, this.snapPort);\n        }\n        else if (shouldCreateInput || shouldCreateOutput) {\n            var svgCoordsUnderMouse = this.workflow.transformScreenCTMtoCanvas(ev.clientX, ev.clientY);\n            var customProps = {\n                \"sbg:x\": svgCoordsUnderMouse.x,\n                \"sbg:y\": svgCoordsUnderMouse.y\n            };\n            if (shouldCreateInput) {\n                this.workflow.model.createInputFromPort(portID, { customProps: customProps });\n            }\n            else {\n                this.workflow.model.createOutputFromPort(portID, { customProps: customProps });\n            }\n        }\n        this.cleanMemory();\n        this.cleanStyles();\n    };\n    SVGPortDragPlugin.prototype.updateSnapPort = function (closestPort, closestPortDistance) {\n        var closestPortChanged = closestPort !== this.snapPort;\n        var closestPortIsOutOfRange = closestPortDistance > this.snapRadius;\n        // We might need to remove old class for snapping if we are closer to some other port now\n        if (this.snapPort && (closestPortChanged || closestPortIsOutOfRange)) {\n            var node_1 = this.workflow.findParent(this.snapPort);\n            this.snapPort.classList.remove(this.css.snap);\n            node_1.classList.remove(this.css.snap);\n            delete this.snapPort;\n        }\n        // If closest port is further away than our snapRadius, no highlighting should be done\n        if (closestPortDistance > this.snapRadius) {\n            return;\n        }\n        var originID = this.originPort.getAttribute(\"data-connection-id\");\n        var targetID = closestPort.getAttribute(\"data-connection-id\");\n        if (this.findEdge(originID, targetID)) {\n            delete this.snapPort;\n            return;\n        }\n        this.snapPort = closestPort;\n        var node = this.workflow.findParent(closestPort);\n        var oppositePortType = this.portType === \"input\" ? \"output\" : \"input\";\n        closestPort.classList.add(this.css.snap);\n        node.classList.add(this.css.snap);\n        node.classList.add(this.css.snap + \"-\" + oppositePortType);\n    };\n    SVGPortDragPlugin.prototype.updateEdge = function (fromX, fromY, toX, toY) {\n        var subEdges = this.edgeGroup.children;\n        try {\n            for (var _a = __values(subEdges), _b = _a.next(); !_b.done; _b = _a.next()) {\n                var subEdge = _b.value;\n                var path = _1.Workflow.makeConnectionPath(fromX, fromY, toX, toY, this.portType === \"input\" ? \"left\" : \"right\");\n                subEdge.setAttribute(\"d\", path);\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        var e_1, _c;\n    };\n    SVGPortDragPlugin.prototype.updateGhostNodeVisibility = function (distanceToMouse, distanceToClosestPort) {\n        var isHidden = this.ghostNode.classList.contains(\"hidden\");\n        var shouldBeVisible = distanceToMouse > this.snapRadius && distanceToClosestPort > this.snapRadius;\n        if (shouldBeVisible && isHidden) {\n            this.ghostNode.classList.remove(\"hidden\");\n        }\n        else if (!shouldBeVisible && !isHidden) {\n            this.ghostNode.classList.add(\"hidden\");\n        }\n    };\n    SVGPortDragPlugin.prototype.translateGhostNode = function (x, y) {\n        this.ghostNode.transform.baseVal.getItem(0).setTranslate(x, y);\n    };\n    SVGPortDragPlugin.prototype.getPortCandidateTransformations = function (portEl) {\n        var nodeEl = this.workflow.findParent(portEl);\n        var nodeConnectionID = nodeEl.getAttribute(\"data-connection-id\");\n        var otherPortType = this.portType === \"input\" ? \"output\" : \"input\";\n        var portQuery = \".node:not([data-connection-id=\\\"\" + nodeConnectionID + \"\\\"]) .port.\" + otherPortType + \"-port\";\n        var candidates = this.workflow.workflow.querySelectorAll(portQuery);\n        var matrices = new Map();\n        try {\n            for (var candidates_1 = __values(candidates), candidates_1_1 = candidates_1.next(); !candidates_1_1.done; candidates_1_1 = candidates_1.next()) {\n                var port = candidates_1_1.value;\n                matrices.set(port, geometry_1.Geometry.getTransformToElement(port, this.workflow.workflow));\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (candidates_1_1 && !candidates_1_1.done && (_a = candidates_1.return)) _a.call(candidates_1);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n        return matrices;\n        var e_2, _a;\n    };\n    /**\n     * Highlights ports that are model says are suggested.\n     * Also marks their parent nodes as highlighted.\n     *\n     * @param {string} targetConnectionID ConnectionID of the origin port\n     */\n    SVGPortDragPlugin.prototype.highlightSuggestedPorts = function (targetConnectionID) {\n        // Find all ports that we can validly connect to\n        // Note that we can connect to any port, but some of them are suggested based on hypothetical validity.\n        var portModels = this.workflow.model.gatherValidConnectionPoints(targetConnectionID);\n        for (var i = 0; i < portModels.length; i++) {\n            var portModel = portModels[i];\n            if (!portModel.isVisible)\n                continue;\n            // Find port element by this connectionID and it's parent node element\n            var portQuery = \".port[data-connection-id=\\\"\" + portModel.connectionId + \"\\\"]\";\n            var portElement = this.workflow.workflow.querySelector(portQuery);\n            var parentNode = this.workflow.findParent(portElement);\n            // Add highlighting classes to port and it's parent node\n            parentNode.classList.add(this.css.suggestion);\n            portElement.classList.add(this.css.suggestion);\n        }\n    };\n    /**\n     * @FIXME: GraphNode.radius should somehow come through Workflow,\n     */\n    SVGPortDragPlugin.prototype.createGhostNode = function (type) {\n        var namespace = \"http://www.w3.org/2000/svg\";\n        var node = document.createElementNS(namespace, \"g\");\n        node.setAttribute(\"transform\", \"matrix(1,0,0,1,0,0)\");\n        node.setAttribute(\"data-type\", type);\n        node.classList.add(\"ghost\");\n        node.classList.add(\"node\");\n        node.innerHTML = \"<circle class=\\\"ghost-circle\\\" cx=\\\"0\\\" cy=\\\"0\\\" r=\\\"\" + graph_node_1.GraphNode.radius / 1.5 + \"\\\"></circle>\";\n        return node;\n    };\n    /**\n     * Finds a port closest to given SVG coordinates.\n     */\n    SVGPortDragPlugin.prototype.findClosestPort = function (x, y) {\n        var closestPort = undefined;\n        var closestDistance = Infinity;\n        this.portOrigins.forEach(function (matrix, port) {\n            var distance = geometry_1.Geometry.distance(x, y, matrix.e, matrix.f);\n            if (distance < closestDistance) {\n                closestPort = port;\n                closestDistance = distance;\n            }\n        });\n        return {\n            portEl: closestPort,\n            distance: closestDistance\n        };\n    };\n    /**\n     * Removes all dom elements and objects cached in-memory during dragging that are no longer needed.\n     */\n    SVGPortDragPlugin.prototype.cleanMemory = function () {\n        this.edgeGroup.remove();\n        this.ghostNode.remove();\n        this.snapPort = undefined;\n        this.edgeGroup = undefined;\n        this.nodeCoords = undefined;\n        this.originPort = undefined;\n        this.portOrigins = undefined;\n        this.boundingClientRect = undefined;\n    };\n    /**\n     * Removes all css classes attached by this plugin\n     */\n    SVGPortDragPlugin.prototype.cleanStyles = function () {\n        this.workflow.svgRoot.classList.remove(this.css.dragging);\n        for (var cls in this.css) {\n            var query = this.workflow.svgRoot.querySelectorAll(\".\" + this.css[cls]);\n            try {\n                for (var query_1 = __values(query), query_1_1 = query_1.next(); !query_1_1.done; query_1_1 = query_1.next()) {\n                    var el = query_1_1.value;\n                    el.classList.remove(this.css[cls]);\n                }\n            }\n            catch (e_3_1) { e_3 = { error: e_3_1 }; }\n            finally {\n                try {\n                    if (query_1_1 && !query_1_1.done && (_a = query_1.return)) _a.call(query_1);\n                }\n                finally { if (e_3) throw e_3.error; }\n            }\n        }\n        var e_3, _a;\n    };\n    /**\n     * Creates an edge (connection) between two elements determined by their connection IDs\n     * This edge is created on the model, and not rendered directly on graph, as main workflow\n     * is supposed to catch the creation event and draw it.\n     */\n    SVGPortDragPlugin.prototype.createEdgeBetweenPorts = function (source, destination) {\n        // Find the connection ids of origin port and the highlighted port\n        var sourceID = source.getAttribute(\"data-connection-id\");\n        var destinationID = destination.getAttribute(\"data-connection-id\");\n        // Swap their places in case you dragged out from input to output, since they have to be ordered output->input\n        if (sourceID.startsWith(\"in\")) {\n            var tmp = sourceID;\n            sourceID = destinationID;\n            destinationID = tmp;\n        }\n        this.workflow.model.connect(sourceID, destinationID);\n    };\n    SVGPortDragPlugin.prototype.findEdge = function (sourceID, destinationID) {\n        var ltrQuery = \"[data-source-connection=\\\"\" + sourceID + \"\\\"][data-destination-connection=\\\"\" + destinationID + \"\\\"]\";\n        var rtlQuery = \"[data-source-connection=\\\"\" + destinationID + \"\\\"][data-destination-connection=\\\"\" + sourceID + \"\\\"]\";\n        return this.workflow.workflow.querySelector(ltrQuery + \",\" + rtlQuery);\n    };\n    return SVGPortDragPlugin;\n}(plugin_base_1.PluginBase));\nexports.SVGPortDragPlugin = SVGPortDragPlugin;\n//# sourceMappingURL=port-drag.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwl-svg/compiled/src/plugins/port-drag/port-drag.js\n// module id = 57\n// module chunks = 0","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./graph/workflow\"));\n__export(require(\"./plugins/zoom/zoom\"));\n__export(require(\"./plugins/arrange/arrange\"));\n__export(require(\"./plugins/validate/validate\"));\n__export(require(\"./plugins/node-move/node-move\"));\n__export(require(\"./plugins/port-drag/port-drag\"));\n__export(require(\"./plugins/selection/selection\"));\n__export(require(\"./plugins/edge-hover/edge-hover\"));\n__export(require(\"./plugins/deletion/deletion\"));\n//# sourceMappingURL=index.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwl-svg/compiled/src/index.js\n// module id = 58\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar plugin_base_1 = require(\"../plugin-base\");\nvar ZoomPlugin = /** @class */ (function (_super) {\n    __extends(ZoomPlugin, _super);\n    function ZoomPlugin() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ZoomPlugin.prototype.registerWorkflow = function (workflow) {\n        _super.prototype.registerWorkflow.call(this, workflow);\n        this.svg = workflow.svgRoot;\n        this.dispose = this.attachWheelListener();\n    };\n    ZoomPlugin.prototype.attachWheelListener = function () {\n        var _this = this;\n        var handler = this.onMouseWheel.bind(this);\n        this.svg.addEventListener(\"mousewheel\", handler, true);\n        return function () { return _this.svg.removeEventListener(\"mousewheel\", handler, true); };\n    };\n    ZoomPlugin.prototype.onMouseWheel = function (event) {\n        var scale = this.workflow.scale;\n        var scaleUpdate = scale - event.deltaY / 500;\n        var zoominOut = scaleUpdate < scale;\n        var zoomingIn = scaleUpdate > scale;\n        if (zoomingIn && this.workflow.maxScale < scaleUpdate) {\n            return;\n        }\n        if (zoominOut && this.workflow.minScale > scaleUpdate) {\n            return;\n        }\n        this.workflow.scaleAtPoint(scaleUpdate, event.clientX, event.clientY);\n        event.stopPropagation();\n    };\n    ZoomPlugin.prototype.destroy = function () {\n        this.dispose();\n        this.dispose = undefined;\n    };\n    return ZoomPlugin;\n}(plugin_base_1.PluginBase));\nexports.ZoomPlugin = ZoomPlugin;\n//# sourceMappingURL=zoom.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwl-svg/compiled/src/plugins/zoom/zoom.js\n// module id = 59\n// module chunks = 0","\"use strict\";\nvar __values = (this && this.__values) || function (o) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\n    if (m) return m.call(o);\n    return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar graph_node_1 = require(\"../../graph/graph-node\");\nvar svg_utils_1 = require(\"../../utils/svg-utils\");\nvar SVGArrangePlugin = /** @class */ (function () {\n    function SVGArrangePlugin() {\n    }\n    SVGArrangePlugin.prototype.registerWorkflow = function (workflow) {\n        this.workflow = workflow;\n        this.svgRoot = workflow.svgRoot;\n    };\n    SVGArrangePlugin.prototype.registerOnBeforeChange = function (fn) {\n        this.onBeforeChange = function () { return fn({ type: \"arrange\" }); };\n    };\n    SVGArrangePlugin.prototype.registerOnAfterChange = function (fn) {\n        this.onAfterChange = function () { return fn({ type: \"arrange\" }); };\n    };\n    SVGArrangePlugin.prototype.registerOnAfterRender = function (fn) {\n        this.triggerAfterRender = function () { return fn({ type: \"arrange\" }); };\n    };\n    SVGArrangePlugin.prototype.afterRender = function () {\n        try {\n            for (var _a = __values(this.workflow.model.steps), _b = _a.next(); !_b.done; _b = _a.next()) {\n                var step = _b.value;\n                if (step.isVisible) {\n                    var missingCoordinate = isNaN(parseInt(step.customProps[\"sbg:x\"]));\n                    if (missingCoordinate) {\n                        this.arrange();\n                    }\n                    return;\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        var e_1, _c;\n    };\n    SVGArrangePlugin.prototype.arrange = function () {\n        this.onBeforeChange();\n        // We need to reset all transformations on the workflow for now.\n        // @TODO Make arranging work without this\n        this.workflow.resetTransform();\n        // We need main graph and dangling nodes separately, they will be distributed differently\n        var _a = this.makeNodeGraphs(), mainGraph = _a.mainGraph, danglingNodes = _a.danglingNodes;\n        // Create an array of columns, each containing a list of NodeIOs\n        var columns = this.distributeNodesIntoColumns(mainGraph);\n        // Get total area in which we will fit the graph, and per-column dimensions\n        var _b = this.calculateColumnSizes(columns), distributionArea = _b.distributionArea, columnDimensions = _b.columnDimensions;\n        // This will be the vertical middle around which the graph should be centered\n        var verticalBaseline = distributionArea.height / 2;\n        var xOffset = 0;\n        var maxYOffset = 0;\n        // Here we will store positions for each node that is to be updated.\n        // This should then be emitted as an afterChange event.\n        var nodePositionUpdates = {};\n        columns.forEach(function (column, index) {\n            var colSize = columnDimensions[index];\n            var yOffset = verticalBaseline - (colSize.height / 2) - column[0].rect.height / 2;\n            column.forEach(function (node) {\n                yOffset += node.rect.height / 2;\n                var matrix = svg_utils_1.SVGUtils.createMatrix().translate(xOffset, yOffset);\n                yOffset += node.rect.height / 2;\n                if (yOffset > maxYOffset) {\n                    maxYOffset = yOffset;\n                }\n                node.el.setAttribute(\"transform\", svg_utils_1.SVGUtils.matrixToTransformAttr(matrix));\n                nodePositionUpdates[node.connectionID] = {\n                    x: matrix.e,\n                    y: matrix.f\n                };\n            });\n            xOffset += colSize.width;\n        });\n        var danglingNodeKeys = Object.keys(danglingNodes).sort(function (a, b) {\n            var aIsInput = a.startsWith(\"out/\");\n            var aIsOutput = a.startsWith(\"in/\");\n            var bIsInput = b.startsWith(\"out/\");\n            var bIsOutput = b.startsWith(\"in/\");\n            var lowerA = a.toLowerCase();\n            var lowerB = b.toLowerCase();\n            if (aIsOutput) {\n                if (bIsOutput) {\n                    return lowerB.localeCompare(lowerA);\n                }\n                else {\n                    return 1;\n                }\n            }\n            else if (aIsInput) {\n                if (bIsOutput) {\n                    return -1;\n                }\n                if (bIsInput) {\n                    return lowerB.localeCompare(lowerA);\n                }\n                else {\n                    return 1;\n                }\n            }\n            else {\n                if (!bIsOutput && !bIsInput) {\n                    return lowerB.localeCompare(lowerA);\n                }\n                else {\n                    return -1;\n                }\n            }\n        });\n        var danglingNodeMarginOffset = 30;\n        var danglingNodeSideLength = graph_node_1.GraphNode.radius * 5;\n        var maxNodeHeightInRow = 0;\n        var row = 0;\n        var indexWidthMap = new Map();\n        var rowMaxHeightMap = new Map();\n        xOffset = 0;\n        var danglingRowAreaWidth = Math.max(distributionArea.width, danglingNodeSideLength * 3);\n        danglingNodeKeys.forEach(function (connectionID, index) {\n            var el = danglingNodes[connectionID];\n            var rect = el.firstElementChild.getBoundingClientRect();\n            indexWidthMap.set(index, rect.width);\n            if (xOffset === 0) {\n                xOffset -= rect.width / 2;\n            }\n            if (rect.height > maxNodeHeightInRow) {\n                maxNodeHeightInRow = rect.height;\n            }\n            xOffset += rect.width + danglingNodeMarginOffset + Math.max(150 - rect.width, 0);\n            if (xOffset >= danglingRowAreaWidth && index < danglingNodeKeys.length - 1) {\n                rowMaxHeightMap.set(row++, maxNodeHeightInRow);\n                maxNodeHeightInRow = 0;\n                xOffset = 0;\n            }\n        });\n        rowMaxHeightMap.set(row, maxNodeHeightInRow);\n        var colYOffset = maxYOffset;\n        xOffset = 0;\n        row = 0;\n        danglingNodeKeys.forEach(function (connectionID, index) {\n            var el = danglingNodes[connectionID];\n            var width = indexWidthMap.get(index);\n            var rowHeight = rowMaxHeightMap.get(row);\n            var left = xOffset + width / 2;\n            var top = colYOffset\n                + danglingNodeMarginOffset\n                + Math.ceil(rowHeight / 2)\n                + ((xOffset === 0 ? 0 : left) / danglingRowAreaWidth) * danglingNodeSideLength;\n            if (xOffset === 0) {\n                left -= width / 2;\n                xOffset -= width / 2;\n            }\n            xOffset += width + danglingNodeMarginOffset + Math.max(150 - width, 0);\n            var matrix = svg_utils_1.SVGUtils.createMatrix().translate(left, top);\n            el.setAttribute(\"transform\", svg_utils_1.SVGUtils.matrixToTransformAttr(matrix));\n            nodePositionUpdates[connectionID] = { x: matrix.e, y: matrix.f };\n            if (xOffset >= danglingRowAreaWidth) {\n                colYOffset += Math.ceil(rowHeight) + danglingNodeMarginOffset;\n                xOffset = 0;\n                maxNodeHeightInRow = 0;\n                row++;\n            }\n        });\n        this.workflow.redrawEdges();\n        this.workflow.fitToViewport();\n        this.onAfterChange(nodePositionUpdates);\n        this.triggerAfterRender();\n        for (var id in nodePositionUpdates) {\n            var pos = nodePositionUpdates[id];\n            var nodeModel = this.workflow.model.findById(id);\n            if (!nodeModel.customProps) {\n                nodeModel.customProps = {};\n            }\n            Object.assign(nodeModel.customProps, {\n                \"sbg:x\": pos.x,\n                \"sbg:y\": pos.y\n            });\n        }\n        return nodePositionUpdates;\n    };\n    /**\n     * Calculates column dimensions and total graph area\n     * @param {NodeIO[][]} columns\n     */\n    SVGArrangePlugin.prototype.calculateColumnSizes = function (columns) {\n        var distributionArea = { width: 0, height: 0 };\n        var columnDimensions = [];\n        for (var i = 1; i < columns.length; i++) {\n            var width = 0;\n            var height = 0;\n            for (var j = 0; j < columns[i].length; j++) {\n                var entry = columns[i][j];\n                height += entry.rect.height;\n                if (width < entry.rect.width) {\n                    width = entry.rect.width;\n                }\n            }\n            columnDimensions[i] = { height: height, width: width };\n            distributionArea.width += width;\n            if (height > distributionArea.height) {\n                distributionArea.height = height;\n            }\n        }\n        return {\n            columnDimensions: columnDimensions,\n            distributionArea: distributionArea\n        };\n    };\n    /**\n     * Maps node's connectionID to a 1-indexed column number\n     */\n    SVGArrangePlugin.prototype.distributeNodesIntoColumns = function (graph) {\n        var idToZoneMap = {};\n        var sortedNodeIDs = Object.keys(graph).sort(function (a, b) { return b.localeCompare(a); });\n        var zones = [];\n        for (var i = 0; i < sortedNodeIDs.length; i++) {\n            var nodeID = sortedNodeIDs[i];\n            var node = graph[nodeID];\n            // For outputs and steps, we calculate the zone as a longest path you can take to them\n            if (node.type !== \"input\") {\n                idToZoneMap[nodeID] = this.traceLongestNodePathLength(node, graph);\n            }\n            else {\n                //\n                // Longest trace methods would put all inputs in the first column,\n                // but we want it just behind the leftmost step that it is connected to\n                // So instead of:\n                //\n                // (input)<----------------->(step)---\n                // (input)<---------->(step)----------\n                //\n                // It should be:\n                //\n                // ---------------(input)<--->(step)---\n                // --------(input)<-->(step)-----------\n                //\n                var closestNodeZone = Infinity;\n                for (var i_1 = 0; i_1 < node.outputs.length; i_1++) {\n                    var successorNodeZone = idToZoneMap[node.outputs[i_1]];\n                    if (successorNodeZone < closestNodeZone) {\n                        closestNodeZone = successorNodeZone;\n                    }\n                }\n                if (closestNodeZone === Infinity) {\n                    idToZoneMap[nodeID] = 1;\n                }\n                else {\n                    idToZoneMap[nodeID] = closestNodeZone - 1;\n                }\n            }\n            var zone = idToZoneMap[nodeID];\n            zones[zone] || (zones[zone] = []);\n            zones[zone].push(graph[nodeID]);\n        }\n        return zones;\n    };\n    /**\n     * Finds all nodes in the graph, and indexes them by their \"data-connection-id\" attribute\n     */\n    SVGArrangePlugin.prototype.indexNodesByID = function () {\n        var indexed = {};\n        var nodes = this.svgRoot.querySelectorAll(\".node\");\n        for (var i = 0; i < nodes.length; i++) {\n            indexed[nodes[i].getAttribute(\"data-connection-id\")] = nodes[i];\n        }\n        return indexed;\n    };\n    /**\n     * Finds length of the longest possible path from the graph root to a node.\n     * Lengths are 1-indexed. When a node has no predecessors, it will have length of 1.\n     */\n    SVGArrangePlugin.prototype.traceLongestNodePathLength = function (node, nodeGraph, visited) {\n        if (visited === void 0) { visited = new Set(); }\n        visited.add(node);\n        if (node.inputs.length === 0) {\n            return 1;\n        }\n        var inputPathLengths = [];\n        for (var i = 0; i < node.inputs.length; i++) {\n            var el = nodeGraph[node.inputs[i]];\n            if (visited.has(el)) {\n                continue;\n            }\n            inputPathLengths.push(this.traceLongestNodePathLength(el, nodeGraph, visited));\n        }\n        return Math.max.apply(Math, __spread(inputPathLengths)) + 1;\n    };\n    SVGArrangePlugin.prototype.makeNodeGraphs = function () {\n        // We need all nodes in order to find the dangling ones, those will be sorted separately\n        var allNodes = this.indexNodesByID();\n        // Make a graph representation where you can trace inputs and outputs from/to connection ids\n        var nodeGraph = {};\n        // Edges are the main source of information from which we will distribute nodes\n        var edges = this.svgRoot.querySelectorAll(\".edge\");\n        for (var i = 0; i < edges.length; i++) {\n            var edge = edges[i];\n            var sourceConnectionID = edge.getAttribute(\"data-source-connection\");\n            var destinationConnectionID = edge.getAttribute(\"data-destination-connection\");\n            var _a = __read(sourceConnectionID.split(\"/\"), 3), sourceSide = _a[0], sourceNodeID = _a[1], sourcePortID = _a[2];\n            var _b = __read(destinationConnectionID.split(\"/\"), 3), destinationSide = _b[0], destinationNodeID = _b[1], destinationPortID = _b[2];\n            // Both source and destination are considered to be steps by default\n            var sourceType = \"step\";\n            var destinationType = \"step\";\n            // Ports have the same node and port ids\n            if (sourceNodeID === sourcePortID) {\n                sourceType = sourceSide === \"in\" ? \"output\" : \"input\";\n            }\n            if (destinationNodeID === destinationPortID) {\n                destinationType = destinationSide === \"in\" ? \"output\" : \"input\";\n            }\n            // Initialize keys on graph if they don't exist\n            var sourceNode = this.svgRoot.querySelector(\".node[data-id=\\\"\" + sourceNodeID + \"\\\"]\");\n            var destinationNode = this.svgRoot.querySelector(\".node[data-id=\\\"\" + destinationNodeID + \"\\\"]\");\n            var sourceNodeConnectionID = sourceNode.getAttribute(\"data-connection-id\");\n            var destinationNodeConnectionID = destinationNode.getAttribute(\"data-connection-id\");\n            // Source and destination of this edge are obviously not dangling, so we can remove them\n            // from the set of potentially dangling nodes\n            delete allNodes[sourceNodeConnectionID];\n            delete allNodes[destinationNodeConnectionID];\n            // Ensure that the source node has its entry in the node graph\n            (nodeGraph[sourceNodeID] || (nodeGraph[sourceNodeID] = {\n                inputs: [],\n                outputs: [],\n                type: sourceType,\n                connectionID: sourceNodeConnectionID,\n                el: sourceNode,\n                rect: sourceNode.getBoundingClientRect()\n            }));\n            // Ensure that the source node has its entry in the node graph\n            (nodeGraph[destinationNodeID] || (nodeGraph[destinationNodeID] = {\n                inputs: [],\n                outputs: [],\n                type: destinationType,\n                connectionID: destinationNodeConnectionID,\n                el: destinationNode,\n                rect: destinationNode.getBoundingClientRect()\n            }));\n            nodeGraph[sourceNodeID].outputs.push(destinationNodeID);\n            nodeGraph[destinationNodeID].inputs.push(sourceNodeID);\n        }\n        return {\n            mainGraph: nodeGraph,\n            danglingNodes: allNodes\n        };\n    };\n    return SVGArrangePlugin;\n}());\nexports.SVGArrangePlugin = SVGArrangePlugin;\n//# sourceMappingURL=arrange.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwl-svg/compiled/src/plugins/arrange/arrange.js\n// module id = 60\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __values = (this && this.__values) || function (o) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\n    if (m) return m.call(o);\n    return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar plugin_base_1 = require(\"../plugin-base\");\nvar SVGValidatePlugin = /** @class */ (function (_super) {\n    __extends(SVGValidatePlugin, _super);\n    function SVGValidatePlugin() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.modelDisposers = [];\n        /** Map of CSS classes attached by this plugin */\n        _this.css = {\n            plugin: \"__plugin-validate\",\n            invalid: \"__validate-invalid\"\n        };\n        return _this;\n    }\n    SVGValidatePlugin.prototype.registerWorkflow = function (workflow) {\n        _super.prototype.registerWorkflow.call(this, workflow);\n        // add plugin specific class to the svgRoot for scoping\n        this.workflow.svgRoot.classList.add(this.css.plugin);\n    };\n    SVGValidatePlugin.prototype.afterModelChange = function () {\n        this.disposeModelListeners();\n        // add listener for all subsequent edge validation\n        var update = this.workflow.model.on(\"connections.updated\", this.renderEdgeValidation.bind(this));\n        var create = this.workflow.model.on(\"connection.create\", this.renderEdgeValidation.bind(this));\n        this.modelDisposers.concat([update.dispose, create.dispose]);\n    };\n    SVGValidatePlugin.prototype.destroy = function () {\n        this.disposeModelListeners();\n    };\n    SVGValidatePlugin.prototype.afterRender = function () {\n        // do initial validation rendering for edges\n        this.renderEdgeValidation();\n    };\n    SVGValidatePlugin.prototype.onEditableStateChange = function (enabled) {\n        if (enabled) {\n            // only show validation if workflow is editable\n            this.renderEdgeValidation();\n        }\n        else {\n            this.removeClasses(this.workflow.workflow.querySelectorAll(\".edge\"));\n        }\n    };\n    SVGValidatePlugin.prototype.disposeModelListeners = function () {\n        try {\n            for (var _a = __values(this.modelDisposers), _b = _a.next(); !_b.done; _b = _a.next()) {\n                var disposeListener = _b.value;\n                disposeListener();\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        this.modelDisposers = [];\n        var e_1, _c;\n    };\n    SVGValidatePlugin.prototype.removeClasses = function (edges) {\n        try {\n            // remove validity class on all edges\n            for (var edges_1 = __values(edges), edges_1_1 = edges_1.next(); !edges_1_1.done; edges_1_1 = edges_1.next()) {\n                var e = edges_1_1.value;\n                e.classList.remove(this.css.invalid);\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (edges_1_1 && !edges_1_1.done && (_a = edges_1.return)) _a.call(edges_1);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n        var e_2, _a;\n    };\n    SVGValidatePlugin.prototype.renderEdgeValidation = function () {\n        var _this = this;\n        var graphEdges = this.workflow.workflow.querySelectorAll(\".edge\");\n        this.removeClasses(graphEdges);\n        // iterate through all modal connections\n        this.workflow.model.connections.forEach(function (e) {\n            // if the connection isn't valid (should be colored on graph)\n            if (!e.isValid) {\n                try {\n                    // iterate through edges on the svg\n                    for (var graphEdges_1 = __values(graphEdges), graphEdges_1_1 = graphEdges_1.next(); !graphEdges_1_1.done; graphEdges_1_1 = graphEdges_1.next()) {\n                        var ge = graphEdges_1_1.value;\n                        var sourceNodeID = ge.getAttribute(\"data-source-connection\");\n                        var destinationNodeID = ge.getAttribute(\"data-destination-connection\");\n                        // compare invalid edge source/destination with svg edge\n                        if (e.source.id === sourceNodeID && e.destination.id === destinationNodeID) {\n                            // if its a match, tag it with the appropriate class and break from the loop\n                            ge.classList.add(_this.css.invalid);\n                            break;\n                        }\n                    }\n                }\n                catch (e_3_1) { e_3 = { error: e_3_1 }; }\n                finally {\n                    try {\n                        if (graphEdges_1_1 && !graphEdges_1_1.done && (_a = graphEdges_1.return)) _a.call(graphEdges_1);\n                    }\n                    finally { if (e_3) throw e_3.error; }\n                }\n            }\n            var e_3, _a;\n        });\n    };\n    return SVGValidatePlugin;\n}(plugin_base_1.PluginBase));\nexports.SVGValidatePlugin = SVGValidatePlugin;\n//# sourceMappingURL=validate.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwl-svg/compiled/src/plugins/validate/validate.js\n// module id = 61\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __values = (this && this.__values) || function (o) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\n    if (m) return m.call(o);\n    return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _1 = require(\"../../\");\nvar plugin_base_1 = require(\"../plugin-base\");\nvar edge_panning_1 = require(\"../../behaviors/edge-panning\");\n/**\n * This plugin makes node dragging and movement possible.\n *\n * @FIXME: attach events for before and after change\n */\nvar SVGNodeMovePlugin = /** @class */ (function (_super) {\n    __extends(SVGNodeMovePlugin, _super);\n    function SVGNodeMovePlugin(parameters) {\n        if (parameters === void 0) { parameters = {}; }\n        var _this = _super.call(this) || this;\n        /** How far from the edge of the viewport does mouse need to be before panning is triggered */\n        _this.scrollMargin = 50;\n        /** How fast does workflow move while panning */\n        _this.movementSpeed = 10;\n        _this.wheelPrevent = function (ev) { return ev.stopPropagation(); };\n        _this.boundMoveHandler = _this.onMove.bind(_this);\n        _this.boundMoveStartHandler = _this.onMoveStart.bind(_this);\n        _this.boundMoveEndHandler = _this.onMoveEnd.bind(_this);\n        _this.detachDragListenerFn = undefined;\n        Object.assign(_this, parameters);\n        return _this;\n    }\n    SVGNodeMovePlugin.prototype.onEditableStateChange = function (enabled) {\n        if (enabled) {\n            this.attachDrag();\n        }\n        else {\n            this.detachDrag();\n        }\n    };\n    SVGNodeMovePlugin.prototype.afterRender = function () {\n        if (this.workflow.editingEnabled) {\n            this.attachDrag();\n        }\n    };\n    SVGNodeMovePlugin.prototype.destroy = function () {\n        this.detachDrag();\n    };\n    SVGNodeMovePlugin.prototype.registerWorkflow = function (workflow) {\n        _super.prototype.registerWorkflow.call(this, workflow);\n        this.edgePanner = new edge_panning_1.EdgePanner(this.workflow, {\n            scrollMargin: this.scrollMargin,\n            movementSpeed: this.movementSpeed\n        });\n    };\n    SVGNodeMovePlugin.prototype.detachDrag = function () {\n        if (typeof this.detachDragListenerFn === \"function\") {\n            this.detachDragListenerFn();\n        }\n        this.detachDragListenerFn = undefined;\n    };\n    SVGNodeMovePlugin.prototype.attachDrag = function () {\n        this.detachDrag();\n        this.detachDragListenerFn = this.workflow.domEvents.drag(\".node .core\", this.boundMoveHandler, this.boundMoveStartHandler, this.boundMoveEndHandler);\n    };\n    SVGNodeMovePlugin.prototype.getWorkflowMatrix = function () {\n        return this.workflow.workflow.transform.baseVal.getItem(0).matrix;\n    };\n    SVGNodeMovePlugin.prototype.onMove = function (dx, dy, ev) {\n        var _this = this;\n        /** We will use workflow scale to determine how our mouse movement translate to svg proportions */\n        var scale = this.workflow.scale;\n        /** Need to know how far did the workflow itself move since when we started dragging */\n        var matrixMovement = {\n            x: this.getWorkflowMatrix().e - this.startWorkflowTranslation.x,\n            y: this.getWorkflowMatrix().f - this.startWorkflowTranslation.y\n        };\n        /** We might have hit the boundary and need to start panning */\n        this.edgePanner.triggerCollisionDetection(ev.clientX, ev.clientY, function (sdx, sdy) {\n            _this.sdx += sdx;\n            _this.sdy += sdy;\n            _this.translateNodeBy(_this.movingNode, sdx, sdy);\n            _this.redrawEdges(_this.sdx, _this.sdy);\n        });\n        /**\n         * We need to store scaled x and y because this is not the only place from which node is being moved.\n         * If mouse is outside the viewport, and the workflow is panning, startScroll will continue moving\n         * this node, so it needs to know where to start from and update it, so this method can take\n         * over when mouse gets back to the viewport.\n         *\n         * If there was no handoff, node would jump back and forth to\n         * last positions for each movement initiator separately.\n         */\n        this.sdx = (dx - matrixMovement.x) / scale;\n        this.sdy = (dy - matrixMovement.y) / scale;\n        var moveX = this.sdx + this.startX;\n        var moveY = this.sdy + this.startY;\n        this.translateNodeTo(this.movingNode, moveX, moveY);\n        this.redrawEdges(this.sdx, this.sdy);\n    };\n    /**\n     * Triggered from {@link attachDrag} when drag starts.\n     * This method initializes properties that are needed for calculations during movement.\n     */\n    SVGNodeMovePlugin.prototype.onMoveStart = function (event, handle) {\n        /** We will query the SVG dom for edges that we need to move, so store svg element for easy access */\n        var svg = this.workflow.svgRoot;\n        document.addEventListener(\"mousewheel\", this.wheelPrevent, true);\n        /** Our drag handle is not the whole node because that would include ports and labels, but a child of it*/\n        var node = handle.parentNode;\n        /** Store initial transform values so we know how much we've moved relative from the starting position */\n        var nodeMatrix = node.transform.baseVal.getItem(0).matrix;\n        this.startX = nodeMatrix.e;\n        this.startY = nodeMatrix.f;\n        /** We have to query for edges that are attached to this node because we will move them as well */\n        var nodeID = node.getAttribute(\"data-id\");\n        /**\n         * When user drags the node to the edge and waits while workflow pans to the side,\n         * mouse movement stops, but workflow movement starts.\n         * We then utilize this to get movement  of the workflow, and use that for translation instead.\n         */\n        this.startWorkflowTranslation = {\n            x: this.getWorkflowMatrix().e,\n            y: this.getWorkflowMatrix().f\n        };\n        /** Used to determine whether dragged node is hitting the edge, so we can pan the Workflow*/\n        this.boundingClientRect = svg.getBoundingClientRect();\n        /** Node movement can be initiated from both mouse events and animationFrame, so make it accessible */\n        this.movingNode = handle.parentNode;\n        /**\n         * While node is being moved, incoming and outgoing edges also need to be moved in order to stay attached.\n         * We don't want to query them all the time, so we cache them in maps that point from their dom elements\n         * to an array of numbers that represent their bezier curves, since we will update those curves.\n         */\n        this.inputEdges = new Map();\n        this.outputEdges = new Map();\n        var outputsSelector = \".edge[data-source-node='\" + nodeID + \"'] .sub-edge\";\n        var inputsSelector = \".edge[data-destination-node='\" + nodeID + \"'] .sub-edge\";\n        var query = svg.querySelectorAll([inputsSelector, outputsSelector].join(\", \"));\n        try {\n            for (var query_1 = __values(query), query_1_1 = query_1.next(); !query_1_1.done; query_1_1 = query_1.next()) {\n                var subEdge = query_1_1.value;\n                var isInput = subEdge.parentElement.getAttribute(\"data-destination-node\") === nodeID;\n                var path = subEdge.getAttribute(\"d\").split(\" \").map(Number).filter(function (e) { return !isNaN(e); });\n                isInput ? this.inputEdges.set(subEdge, path) : this.outputEdges.set(subEdge, path);\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (query_1_1 && !query_1_1.done && (_a = query_1.return)) _a.call(query_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        var e_1, _a;\n    };\n    SVGNodeMovePlugin.prototype.translateNodeBy = function (node, x, y) {\n        var matrix = node.transform.baseVal.getItem(0).matrix;\n        this.translateNodeTo(node, matrix.e + x, matrix.f + y);\n    };\n    SVGNodeMovePlugin.prototype.translateNodeTo = function (node, x, y) {\n        node.transform.baseVal.getItem(0).setTranslate(x, y);\n    };\n    /**\n     * Redraws stored input and output edges so as to transform them with respect to\n     * scaled transformation differences, sdx and sdy.\n     */\n    SVGNodeMovePlugin.prototype.redrawEdges = function (sdx, sdy) {\n        this.inputEdges.forEach(function (p, el) {\n            var path = _1.Workflow.makeConnectionPath(p[0], p[1], p[6] + sdx, p[7] + sdy);\n            el.setAttribute(\"d\", path);\n        });\n        this.outputEdges.forEach(function (p, el) {\n            var path = _1.Workflow.makeConnectionPath(p[0] + sdx, p[1] + sdy, p[6], p[7]);\n            el.setAttribute(\"d\", path);\n        });\n    };\n    /**\n     * Triggered from {@link attachDrag} after move event ends\n     */\n    SVGNodeMovePlugin.prototype.onMoveEnd = function () {\n        this.edgePanner.stop();\n        var id = this.movingNode.getAttribute(\"data-connection-id\");\n        var nodeModel = this.workflow.model.findById(id);\n        if (!nodeModel.customProps) {\n            nodeModel.customProps = {};\n        }\n        var matrix = this.movingNode.transform.baseVal.getItem(0).matrix;\n        Object.assign(nodeModel.customProps, {\n            \"sbg:x\": matrix.e,\n            \"sbg:y\": matrix.f,\n        });\n        this.onAfterChange({ type: \"node-move\" });\n        document.removeEventListener(\"mousewheel\", this.wheelPrevent, true);\n        delete this.startX;\n        delete this.startY;\n        delete this.movingNode;\n        delete this.inputEdges;\n        delete this.outputEdges;\n        delete this.boundingClientRect;\n        delete this.startWorkflowTranslation;\n    };\n    return SVGNodeMovePlugin;\n}(plugin_base_1.PluginBase));\nexports.SVGNodeMovePlugin = SVGNodeMovePlugin;\n//# sourceMappingURL=node-move.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwl-svg/compiled/src/plugins/node-move/node-move.js\n// module id = 62\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EdgePanner = /** @class */ (function () {\n    function EdgePanner(workflow, config) {\n        if (config === void 0) { config = {\n            scrollMargin: 100,\n            movementSpeed: 10\n        }; }\n        this.movementSpeed = 10;\n        this.scrollMargin = 100;\n        /**\n         * Current state of collision on both axes, each negative if beyond top/left border,\n         * positive if beyond right/bottom, zero if inside the viewport\n         */\n        this.collision = { x: 0, y: 0 };\n        this.panningCallback = function (sdx, sdy) { return void 0; };\n        var options = Object.assign({\n            scrollMargin: 100,\n            movementSpeed: 10\n        }, config);\n        this.workflow = workflow;\n        this.scrollMargin = options.scrollMargin;\n        this.movementSpeed = options.movementSpeed;\n        this.viewportClientRect = this.workflow.svgRoot.getBoundingClientRect();\n    }\n    /**\n     * Calculates if dragged node is at or beyond the point beyond which workflow panning should be triggered.\n     * If collision state has changed, {@link onBoundaryCollisionChange} will be triggered.\n     */\n    EdgePanner.prototype.triggerCollisionDetection = function (x, y, callback) {\n        var collision = { x: 0, y: 0 };\n        this.panningCallback = callback;\n        var _a = this.viewportClientRect, left = _a.left, right = _a.right, top = _a.top, bottom = _a.bottom;\n        left = left + this.scrollMargin;\n        right = right - this.scrollMargin;\n        top = top + this.scrollMargin;\n        bottom = bottom - this.scrollMargin;\n        if (x < left) {\n            collision.x = x - left;\n        }\n        else if (x > right) {\n            collision.x = x - right;\n        }\n        if (y < top) {\n            collision.y = y - top;\n        }\n        else if (y > bottom) {\n            collision.y = y - bottom;\n        }\n        if (Math.sign(collision.x) !== Math.sign(this.collision.x)\n            || Math.sign(collision.y) !== Math.sign(this.collision.y)) {\n            var previous = this.collision;\n            this.collision = collision;\n            this.onBoundaryCollisionChange(collision, previous);\n        }\n    };\n    /**\n     * Triggered when {@link triggerCollisionDetection} determines that collision properties have changed.\n     */\n    EdgePanner.prototype.onBoundaryCollisionChange = function (current, previous) {\n        this.stop();\n        if (current.x === 0 && current.y === 0) {\n            return;\n        }\n        this.start(this.collision);\n    };\n    EdgePanner.prototype.start = function (direction) {\n        var _this = this;\n        var startTimestamp;\n        var scale = this.workflow.scale;\n        var matrix = this.workflow.workflow.transform.baseVal.getItem(0).matrix;\n        var sixtyFPS = 16.6666;\n        var onFrame = function (timestamp) {\n            var frameDeltaTime = timestamp - (startTimestamp || timestamp);\n            startTimestamp = timestamp;\n            // We need to stop the animation at some point\n            // It should be stopped when there is no animation frame ID anymore,\n            // which means that stopScroll() was called\n            // However, don't do that if we haven't made the first move yet, which is a situation when t is 0\n            if (frameDeltaTime !== 0 && !_this.panAnimationFrame) {\n                startTimestamp = undefined;\n                return;\n            }\n            var moveX = Math.sign(direction.x) * _this.movementSpeed * frameDeltaTime / sixtyFPS;\n            var moveY = Math.sign(direction.y) * _this.movementSpeed * frameDeltaTime / sixtyFPS;\n            matrix.e -= moveX;\n            matrix.f -= moveY;\n            var frameDiffX = moveX / scale;\n            var frameDiffY = moveY / scale;\n            _this.panningCallback(frameDiffX, frameDiffY);\n            _this.panAnimationFrame = window.requestAnimationFrame(onFrame);\n        };\n        this.panAnimationFrame = window.requestAnimationFrame(onFrame);\n    };\n    EdgePanner.prototype.stop = function () {\n        window.cancelAnimationFrame(this.panAnimationFrame);\n        this.panAnimationFrame = undefined;\n    };\n    return EdgePanner;\n}());\nexports.EdgePanner = EdgePanner;\n//# sourceMappingURL=edge-panning.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwl-svg/compiled/src/behaviors/edge-panning.js\n// module id = 63\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar plugin_base_1 = require(\"../plugin-base\");\nvar SVGEdgeHoverPlugin = /** @class */ (function (_super) {\n    __extends(SVGEdgeHoverPlugin, _super);\n    function SVGEdgeHoverPlugin() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.boundEdgeEnterFunction = _this.onEdgeEnter.bind(_this);\n        _this.modelListener = {\n            dispose: function () { return void 0; }\n        };\n        return _this;\n    }\n    SVGEdgeHoverPlugin.prototype.afterRender = function () {\n        this.attachEdgeHoverBehavior();\n    };\n    SVGEdgeHoverPlugin.prototype.destroy = function () {\n        this.detachEdgeHoverBehavior();\n        this.modelListener.dispose();\n    };\n    SVGEdgeHoverPlugin.prototype.attachEdgeHoverBehavior = function () {\n        this.detachEdgeHoverBehavior();\n        this.workflow.workflow.addEventListener(\"mouseenter\", this.boundEdgeEnterFunction, true);\n    };\n    SVGEdgeHoverPlugin.prototype.detachEdgeHoverBehavior = function () {\n        this.workflow.workflow.removeEventListener(\"mouseenter\", this.boundEdgeEnterFunction, true);\n    };\n    SVGEdgeHoverPlugin.prototype.onEdgeEnter = function (ev) {\n        var _this = this;\n        // Ignore if we did not enter an edge\n        if (!ev.srcElement.classList.contains(\"edge\"))\n            return;\n        var target = ev.srcElement;\n        var tipEl;\n        var onMouseMove = (function (ev) {\n            var coords = _this.workflow.transformScreenCTMtoCanvas(ev.clientX, ev.clientY);\n            tipEl.setAttribute(\"x\", String(coords.x));\n            tipEl.setAttribute(\"y\", String(coords.y - 16));\n        }).bind(this);\n        var onMouseLeave = (function (ev) {\n            tipEl.remove();\n            target.removeEventListener(\"mousemove\", onMouseMove);\n            target.removeEventListener(\"mouseleave\", onMouseLeave);\n        }).bind(this);\n        this.modelListener = this.workflow.model.on(\"connection.remove\", function (source, destination) {\n            if (!tipEl)\n                return;\n            var _a = __read(tipEl.getAttribute(\"data-source-destination\").split(\"$!$\"), 2), tipS = _a[0], tipD = _a[1];\n            if (tipS === source.connectionId && tipD === destination.connectionId) {\n                tipEl.remove();\n            }\n        });\n        var sourceNode = target.getAttribute(\"data-source-node\");\n        var destNode = target.getAttribute(\"data-destination-node\");\n        var sourcePort = target.getAttribute(\"data-source-port\");\n        var destPort = target.getAttribute(\"data-destination-port\");\n        var sourceConnect = target.getAttribute(\"data-source-connection\");\n        var destConnect = target.getAttribute(\"data-destination-connection\");\n        var sourceLabel = sourceNode === sourcePort ? sourceNode : sourceNode + \" (\" + sourcePort + \")\";\n        var destLabel = destNode === destPort ? destNode : destNode + \" (\" + destPort + \")\";\n        var coords = this.workflow.transformScreenCTMtoCanvas(ev.clientX, ev.clientY);\n        var ns = \"http://www.w3.org/2000/svg\";\n        tipEl = document.createElementNS(ns, \"text\");\n        tipEl.classList.add(\"label\");\n        tipEl.classList.add(\"label-edge\");\n        tipEl.setAttribute(\"x\", String(coords.x));\n        tipEl.setAttribute(\"y\", String(coords.y));\n        tipEl.setAttribute(\"data-source-destination\", sourceConnect + \"$!$\" + destConnect);\n        tipEl.innerHTML = sourceLabel + \"  \" + destLabel;\n        this.workflow.workflow.appendChild(tipEl);\n        target.addEventListener(\"mousemove\", onMouseMove);\n        target.addEventListener(\"mouseleave\", onMouseLeave);\n    };\n    return SVGEdgeHoverPlugin;\n}(plugin_base_1.PluginBase));\nexports.SVGEdgeHoverPlugin = SVGEdgeHoverPlugin;\n//# sourceMappingURL=edge-hover.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwl-svg/compiled/src/plugins/edge-hover/edge-hover.js\n// module id = 64\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar plugin_base_1 = require(\"../plugin-base\");\nvar selection_1 = require(\"../selection/selection\");\nvar models_1 = require(\"cwlts/models\");\nvar DeletionPlugin = /** @class */ (function (_super) {\n    __extends(DeletionPlugin, _super);\n    function DeletionPlugin() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.boundDeleteFunction = _this.onDelete.bind(_this);\n        return _this;\n    }\n    DeletionPlugin.prototype.afterRender = function () {\n        this.attachDeleteBehavior();\n    };\n    DeletionPlugin.prototype.onEditableStateChange = function (enable) {\n        if (enable) {\n            this.attachDeleteBehavior();\n        }\n        else {\n            this.detachDeleteBehavior();\n        }\n    };\n    DeletionPlugin.prototype.attachDeleteBehavior = function () {\n        this.detachDeleteBehavior();\n        window.addEventListener(\"keyup\", this.boundDeleteFunction, true);\n    };\n    DeletionPlugin.prototype.detachDeleteBehavior = function () {\n        window.removeEventListener(\"keyup\", this.boundDeleteFunction, true);\n    };\n    DeletionPlugin.prototype.onDelete = function (ev) {\n        if (ev.which !== 8 && ev.which !== 46 || !(ev.target instanceof SVGElement)) {\n            return;\n        }\n        this.deleteSelection();\n    };\n    DeletionPlugin.prototype.deleteSelection = function () {\n        var _this = this;\n        var selection = this.workflow.getPlugin(selection_1.SelectionPlugin);\n        if (!selection || !this.workflow.editingEnabled) {\n            return;\n        }\n        var selected = selection.getSelection();\n        selected.forEach(function (type, id) {\n            if (type === \"node\") {\n                var model = _this.workflow.model.findById(id);\n                if (model instanceof models_1.StepModel) {\n                    _this.workflow.model.removeStep(model);\n                    selection.clearSelection();\n                }\n                else if (model instanceof models_1.WorkflowInputParameterModel) {\n                    _this.workflow.model.removeInput(model);\n                    selection.clearSelection();\n                }\n                else if (model instanceof models_1.WorkflowOutputParameterModel) {\n                    _this.workflow.model.removeOutput(model);\n                    selection.clearSelection();\n                }\n            }\n            else {\n                var _a = __read(id.split(selection_1.SelectionPlugin.edgePortsDelimiter), 2), source = _a[0], destination = _a[1];\n                _this.workflow.model.disconnect(source, destination);\n                selection.clearSelection();\n            }\n        });\n    };\n    DeletionPlugin.prototype.destroy = function () {\n        this.detachDeleteBehavior();\n    };\n    return DeletionPlugin;\n}(plugin_base_1.PluginBase));\nexports.DeletionPlugin = DeletionPlugin;\n//# sourceMappingURL=deletion.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwl-svg/compiled/src/plugins/deletion/deletion.js\n// module id = 65\n// module chunks = 0","import \"./assets/styles/themes/rabix-dark/theme\";\nimport \"./plugins/port-drag/theme.dark.scss\";\nimport \"./plugins/selection/theme.dark.scss\";\n\nimport {WorkflowFactory} from \"cwlts/models\";\nimport {Workflow} from \"cwl-svg\";\nconst sample = \"cwl-svg/cwl-samples/rna-seq-alignment.json\";\n\nimport ExpansionPlugin from 'expand';\n\nconst wf = WorkflowFactory.from(sample);\nconst svgRoot = document.getElementById(\"svg\") as any;\nconst workflow = new Workflow({\n    model: wf,\n    svgRoot: svgRoot,\n    plugins: [new ExpansionPlugin()]\n});\n\n\n\n// WEBPACK FOOTER //\n// ./index.ts","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Workflow\n__export(require(\"./WorkflowFactory\"));\n__export(require(\"./WorkflowModel\"));\n__export(require(\"./StepModel\"));\n__export(require(\"./WorkflowInputParameterModel\"));\n__export(require(\"./WorkflowOutputParameterModel\"));\n__export(require(\"./WorkflowStepInputModel\"));\n__export(require(\"./WorkflowStepOutputModel\"));\n// Command Line Tool\n__export(require(\"./CommandLineToolFactory\"));\n__export(require(\"./CommandLineToolModel\"));\n__export(require(\"./CommandInputParameterModel\"));\n__export(require(\"./CommandLineBindingModel\"));\n__export(require(\"./CommandOutputParameterModel\"));\n__export(require(\"./CommandOutputBindingModel\"));\n__export(require(\"./CommandArgumentModel\"));\n__export(require(\"./ExpressionModel\"));\n// Common\n__export(require(\"./ParameterTypeModel\"));\n__export(require(\"./DockerRequirementModel\"));\n__export(require(\"./ProcessRequirementModel\"));\n__export(require(\"./RequirementBaseModel\"));\n__export(require(\"./CreateFileRequirementModel\"));\n__export(require(\"./DirentModel\"));\n__export(require(\"./ResourceRequirementModel\"));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/generic/index.js\n// module id = 67\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar WorkflowModel_1 = require(\"../generic/WorkflowModel\");\nvar V1StepModel_1 = require(\"./V1StepModel\");\nvar V1WorkflowInputParameterModel_1 = require(\"./V1WorkflowInputParameterModel\");\nvar V1WorkflowOutputParameterModel_1 = require(\"./V1WorkflowOutputParameterModel\");\nvar utils_1 = require(\"../helpers/utils\");\nvar constants_1 = require(\"../helpers/constants\");\nvar V1ExpressionModel_1 = require(\"./V1ExpressionModel\");\nvar V1WorkflowModel = /** @class */ (function (_super) {\n    __extends(V1WorkflowModel, _super);\n    function V1WorkflowModel(workflow, loc) {\n        var _this = _super.call(this, loc || \"document\") || this;\n        _this.cwlVersion = \"v1.0\";\n        _this.steps = [];\n        _this.inputs = [];\n        _this.outputs = [];\n        _this.requirements = [];\n        _this.customProps = {};\n        if (workflow)\n            _this.deserialize(workflow);\n        _this.graph = _this.constructGraph();\n        _this.validateGraph();\n        return _this;\n    }\n    V1WorkflowModel.prototype.addStepFromProcess = function (proc) {\n        var _this = this;\n        var loc = this.loc + \".steps[\" + this.steps.length + \"]\";\n        var step = new V1StepModel_1.V1StepModel({\n            in: [],\n            out: [],\n            run: proc\n        }, loc, this.eventHub);\n        step.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        this.steps.push(step);\n        step.id = this.getNextAvailableId(step.id);\n        this.addStepToGraph(step);\n        this.eventHub.emit(\"step.create\", step);\n        return step;\n    };\n    /**\n     * Adds Input, Output, or Step to workflow. Does not add them to the graph.\n     */\n    V1WorkflowModel.prototype.addEntry = function (entry, type) {\n        var _this = this;\n        entry.loc = this.loc + \".\" + type + \"[\" + this[type].length + \"]\";\n        this[type].push(entry);\n        entry.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        return entry;\n    };\n    V1WorkflowModel.prototype.createInputFromPort = function (inPort, data) {\n        if (data === void 0) { data = {}; }\n        return _super.prototype._createInputFromPort.call(this, inPort, V1WorkflowInputParameterModel_1.V1WorkflowInputParameterModel, undefined, undefined, data);\n    };\n    V1WorkflowModel.prototype.createOutputFromPort = function (outPort, data) {\n        if (data === void 0) { data = {}; }\n        return _super.prototype._createOutputFromPort.call(this, outPort, V1WorkflowOutputParameterModel_1.V1WorkflowOutputParameterModel, undefined, undefined, data);\n    };\n    V1WorkflowModel.prototype.exposePort = function (inPort) {\n        var port = _super.prototype._exposePort.call(this, inPort, V1WorkflowInputParameterModel_1.V1WorkflowInputParameterModel);\n        port.customProps[\"sbg:exposed\"] = true;\n        port.isVisible = false;\n    };\n    V1WorkflowModel.prototype.getSourceConnectionId = function (source) {\n        if (/[\\/]+/.test(source)) {\n            return constants_1.STEP_OUTPUT_CONNECTION_PREFIX + source;\n        }\n        else {\n            return \"\" + constants_1.STEP_OUTPUT_CONNECTION_PREFIX + source + \"/\" + source;\n        }\n    };\n    /**\n     * Checks if source contains stepId.\n     * If it does, returns id of step.out, else null;\n     * @param source\n     * @param stepId\n     */\n    V1WorkflowModel.prototype.isSourceFromStep = function (source, stepId) {\n        if (/[\\/]+/.test(source)) {\n            var split = source.split('/');\n            if (split[0] === stepId)\n                return split[1];\n            return null;\n        }\n        return null;\n    };\n    V1WorkflowModel.prototype.addHint = function (hint) {\n        return this.createReq(hint, V1ExpressionModel_1.V1ExpressionModel, undefined, true);\n    };\n    V1WorkflowModel.prototype.serializeEmbedded = function (retainSource) {\n        if (retainSource === void 0) { retainSource = false; }\n        return this._serialize(true, retainSource);\n    };\n    V1WorkflowModel.prototype.serialize = function () {\n        return this._serialize(false);\n    };\n    V1WorkflowModel.prototype._serialize = function (embed, retainSource) {\n        if (retainSource === void 0) { retainSource = false; }\n        var base = {};\n        base.class = \"Workflow\";\n        base.cwlVersion = \"v1.0\";\n        if (this.sbgId || this.id) {\n            base.id = this.sbgId || this.id;\n        }\n        if (this.description)\n            base.doc = this.description;\n        if (this.label)\n            base.label = this.label;\n        //@todo SERIALIZING HINTS AND REQUIREMENTS\n        base.inputs = this.inputs.map(function (input) { return input.serialize(); });\n        base.outputs = this.outputs.map(function (output) { return output.serialize(); });\n        base.steps = this.steps.map(function (step) {\n            if (embed) {\n                return step.serializeEmbedded(retainSource);\n            }\n            else {\n                return step.serialize();\n            }\n        });\n        if (this.hints.length) {\n            base.hints = this.hints.map(function (hint) { return hint.serialize(); });\n        }\n        // adding the proper requirements based on the features of the workflow\n        var requirements = utils_1.ensureArray(this.customProps.requirements, \"class\", \"value\") || [];\n        var allStepsHaveRun = true;\n        var reqMap = {\n            SubworkflowFeatureRequirement: false,\n            ScatterFeatureRequirement: false,\n            MultipleInputFeatureRequirement: false\n        };\n        // feature detection\n        for (var i = 0; i < this.steps.length; i++) {\n            var step = this.steps[i];\n            if (step.run && step.run instanceof WorkflowModel_1.WorkflowModel) {\n                reqMap.SubworkflowFeatureRequirement = true;\n            }\n            else if (!step.run) {\n                allStepsHaveRun = false;\n            }\n            if (step.scatter.length) {\n                reqMap.ScatterFeatureRequirement = true;\n            }\n            for (var j = 0; j < step.in.length; j++) {\n                var inPort = step.in[j];\n                if (inPort.source && inPort.source.length > 1) {\n                    reqMap.MultipleInputFeatureRequirement = true;\n                }\n            }\n        }\n        var _loop_1 = function (req) {\n            // only remove SubworkflowFeatureRequirement if we know the run type of all steps\n            if (allStepsHaveRun || req !== \"SubworkflowFeatureRequirement\") {\n                // remove each requirement first\n                requirements = requirements.filter(function (r) { return r.class !== req; });\n            }\n            // re-add it only if it's needed\n            if (reqMap[req]) {\n                requirements.push({\n                    class: req\n                });\n            }\n        };\n        // requirement setting\n        for (var req in reqMap) {\n            _loop_1(req);\n        }\n        base.requirements = requirements;\n        delete this.customProps.requirements;\n        return utils_1.spreadAllProps(base, this.customProps);\n    };\n    V1WorkflowModel.prototype.deserialize = function (workflow) {\n        var _this = this;\n        var serializedKeys = [\n            \"class\",\n            \"id\",\n            \"inputs\",\n            \"outputs\",\n            \"steps\",\n            \"cwlVersion\",\n            \"doc\",\n            \"label\",\n            \"hints\"\n        ];\n        //@todo DESERIALIZING HINTS AND REQUIREMENTS\n        this.id = this.id = workflow[\"sbg:id\"] && workflow[\"sbg:id\"].split(\"/\").length > 2 ?\n            workflow[\"sbg:id\"].split(\"/\")[2] :\n            utils_1.snakeCase(workflow.id);\n        this.sbgId = workflow[\"sbg:id\"];\n        this.label = workflow.label;\n        this.description = workflow.doc;\n        utils_1.ensureArray(workflow.inputs, \"id\", \"type\").forEach(function (input, i) {\n            _this.addEntry(new V1WorkflowInputParameterModel_1.V1WorkflowInputParameterModel(input, _this.loc + \".inputs[\" + i + \"]\", _this.eventHub), \"inputs\");\n        });\n        utils_1.ensureArray(workflow.outputs, \"id\", \"type\").forEach(function (output, i) {\n            _this.addEntry(new V1WorkflowOutputParameterModel_1.V1WorkflowOutputParameterModel(output, _this.loc + \".outputs[\" + i + \"]\", _this.eventHub), \"outputs\");\n        });\n        utils_1.ensureArray(workflow.steps, \"id\").forEach(function (step, i) {\n            if (step.run && typeof step.run !== \"string\") {\n                step.run.cwlVersion = step.run.cwlVersion || \"v1.0\";\n            }\n            _this.addEntry(new V1StepModel_1.V1StepModel(step, _this.loc + \".steps[\" + i + \"]\", _this.eventHub), \"steps\");\n        });\n        this.hints = utils_1.ensureArray(workflow.hints).map(function (hint, i) {\n            return _this.createReq(hint, V1ExpressionModel_1.V1ExpressionModel, _this.loc + \".hints[\" + i + \"]\", true);\n        });\n        // populates object with all custom attributes not covered in model\n        utils_1.spreadSelectProps(workflow, this.customProps, serializedKeys);\n    };\n    return V1WorkflowModel;\n}(WorkflowModel_1.WorkflowModel));\nexports.V1WorkflowModel = V1WorkflowModel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/v1.0/V1WorkflowModel.js\n// module id = 68\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CommandLineToolFactory_1 = require(\"../generic/CommandLineToolFactory\");\nvar ExpressionToolModel_1 = require(\"../generic/ExpressionToolModel\");\nvar StepModel_1 = require(\"../generic/StepModel\");\nvar WorkflowFactory_1 = require(\"../generic/WorkflowFactory\");\nvar WorkflowModel_1 = require(\"../generic/WorkflowModel\");\nvar utils_1 = require(\"../helpers/utils\");\nvar V1ExpressionModel_1 = require(\"./V1ExpressionModel\");\nvar V1WorkflowStepInputModel_1 = require(\"./V1WorkflowStepInputModel\");\nvar V1WorkflowStepOutputModel_1 = require(\"./V1WorkflowStepOutputModel\");\nvar V1StepModel = /** @class */ (function (_super) {\n    __extends(V1StepModel, _super);\n    function V1StepModel(step, loc, eventHub) {\n        var _this = _super.call(this, loc, eventHub) || this;\n        _this[\"in\"] = [];\n        _this.out = [];\n        _this.hasMultipleScatter = true;\n        _this.hasScatterMethod = true;\n        if (step)\n            _this.deserialize(step);\n        return _this;\n    }\n    V1StepModel.prototype.addHint = function (hint) {\n        return this.createReq(hint, V1ExpressionModel_1.V1ExpressionModel, undefined, true);\n    };\n    V1StepModel.prototype.serializeEmbedded = function (retainSource) {\n        if (retainSource === void 0) { retainSource = false; }\n        return this._serialize(true, retainSource);\n    };\n    V1StepModel.prototype.serialize = function () {\n        return this._serialize(false);\n    };\n    V1StepModel.prototype._serialize = function (embed, retainSource) {\n        if (retainSource === void 0) { retainSource = false; }\n        var base = {};\n        base.id = this.id;\n        base.in = this.in.map(function (i) { return i.serialize(); }).filter(function (i) {\n            var keys = Object.keys(i);\n            return !(keys.length === 1 && keys[0] === \"id\");\n        });\n        base.out = this.out.map(function (o) { return o.serialize(); });\n        if (this.customProps[\"sbg:rdfId\"] && !embed) {\n            base.run = this.customProps[\"sbg:rdfId\"];\n        }\n        else if (embed && this.run && this.run instanceof WorkflowModel_1.WorkflowModel) {\n            base.run = this.run.serializeEmbedded();\n        }\n        else if (this.run && typeof this.run.serialize === \"function\") {\n            base.run = this.run.serialize();\n        }\n        else {\n            base.run = this.runPath;\n        }\n        // to preserve rdfId and rdfSource in the model\n        var temp = __assign({}, this.customProps);\n        if (!retainSource) {\n            delete temp[\"sbg:rdfId\"];\n            delete temp[\"sbg:rdfSource\"];\n        }\n        if (this._label)\n            base.label = this.label;\n        if (this.description)\n            base.doc = this.description;\n        if (this.scatter.length)\n            base.scatter = this.scatter;\n        if (this.scatterMethod)\n            base.scatterMethod = this.scatterMethod;\n        if (this.hints.length) {\n            base.hints = this.hints.map(function (hint) { return hint.serialize(); });\n        }\n        return utils_1.spreadAllProps(base, temp);\n    };\n    V1StepModel.prototype.deserialize = function (step) {\n        var _this = this;\n        var serializedKeys = [\n            \"id\",\n            \"doc\",\n            \"label\",\n            \"run\",\n            \"scatter\",\n            \"scatterMethod\",\n            \"in\",\n            \"out\",\n            \"hints\"\n        ];\n        this.id = step.id || \"\";\n        this.description = step.doc;\n        this._label = step.label;\n        var hasRun = step.run && step.run.class;\n        if (typeof step.run === \"string\") {\n            console.warn(\"Expected to get json for step.run at \" + this.loc + \", reading in and out from step\");\n            this.runPath = step.run;\n        }\n        else if (hasRun) {\n            this.createRun(step.run);\n        }\n        this.in = utils_1.ensureArray(step.in, \"id\", \"source\")\n            .map(function (i, index) { return new V1WorkflowStepInputModel_1.V1WorkflowStepInputModel(i, _this, _this.loc + \".in[\" + index + \"]\"); });\n        this.out = utils_1.ensureArray(step.out, \"id\")\n            .map(function (o, index) { return new V1WorkflowStepOutputModel_1.V1WorkflowStepOutputModel(o, _this, _this.loc + \".out[\" + index + \"]\"); });\n        if (hasRun) {\n            this.compareInPorts();\n            this.compareOutPorts();\n        }\n        this.in.forEach(function (i) {\n            // if in type is a required file/directory or required array of files/directories\n            // include it by default\n            if (i.type &&\n                !i.type.isNullable &&\n                (i.type.type === \"File\" ||\n                    i.type.items === \"File\" ||\n                    i.type.type === \"Directory\" ||\n                    i.type.items === \"Directory\")) {\n                i.isVisible = true;\n            }\n        });\n        //@todo: generalize and parse requirements and hints\n        this.requirements = utils_1.ensureArray(step.requirements, \"class\");\n        this.hints = utils_1.ensureArray(step.hints).map(function (hint, i) {\n            return _this.createReq(hint, V1ExpressionModel_1.V1ExpressionModel, _this.loc + \".hints[\" + i + \"]\", true);\n        });\n        this.scatter = utils_1.ensureArray(step.scatter);\n        this.scatterMethod = step.scatterMethod;\n        utils_1.spreadSelectProps(step, this.customProps, serializedKeys);\n    };\n    V1StepModel.prototype.setRunProcess = function (process) {\n        if (process && process.class) {\n            this.createRun(process);\n            this.compareInPorts(true);\n            this.compareOutPorts(true);\n            this.eventHub.emit(\"step.update\", this);\n        }\n    };\n    V1StepModel.prototype.createRun = function (process) {\n        switch (process.class) {\n            case \"Workflow\":\n                this.run = WorkflowFactory_1.WorkflowFactory.from(process, this.loc + \".run\");\n                break;\n            case \"CommandLineTool\":\n                this.run = CommandLineToolFactory_1.CommandLineToolFactory.from(process, this.loc + \".run\");\n                break;\n            case \"ExpressionTool\":\n                this.run = new ExpressionToolModel_1.ExpressionToolModel(process);\n                break;\n            default:\n                throw new Error(\"Unknown process class \\\"\" + process.class + \"\\\" at \" + this.loc + \".step. Expected \\\"CommandLineTool\\\", \\\"Workflow\\\", or \\\"ExpressionTool\\\"\");\n        }\n        // when the step is being updated, the ID will not change\n        this.id = this.id || utils_1.snakeCase(this.run.id) || utils_1.snakeCase(this.loc);\n        this._label = this._label || this.run.label || \"\";\n    };\n    V1StepModel.prototype.compareInPorts = function (isUpdate) {\n        var _this = this;\n        if (isUpdate === void 0) { isUpdate = false; }\n        var runInputs = this.run.inputs;\n        var inserted = [], removed, remaining;\n        remaining = this.in;\n        // only send events for creating, removing and updating ports if the run is being updated\n        // when the workflow is initialized the first time, all this will happen automatically\n        if (isUpdate) {\n            _a = StepModel_1.StepModel.portDifference(this.in, this.run.inputs), inserted = _a[0], remaining = _a[1], removed = _a[2];\n            // emit an event about the in port being removed so the workflow can remove it from the graph\n            removed.forEach(function (r) { return _this.eventHub.emit(\"step.inPort.remove\", r); });\n            // fyi: inserted and remaining nodes are updated in the graph after the model is created because\n            // 1. inserted array is of InputParamModel and doesn't have connectionId (can't be added to graph)\n            // 2. remaining array doesn't have now info yet (changed type, fileTypes, etc)\n        }\n        // because type cannot be check on the level of the step\n        // (step.in is just the id of the incoming port),\n        // type and fileTypes from the app's inputs are spliced into the in ports.\n        // Type validation is done for connections based on this information\n        this.in = runInputs.map(function (input, index) {\n            var match = remaining.find(function (port) { return input.id === port.id; });\n            // serialize the match to create a new input from it\n            var serialized = match ? match.serialize() : { id: input.id };\n            // here will set source and default if they exist\n            var model = new V1WorkflowStepInputModel_1.V1WorkflowStepInputModel(__assign({ type: input.type, fileTypes: input.fileTypes || [], doc: input.description, label: input.label, \"sbg:toolDefaultValue\": input.customProps[\"sbg:toolDefaultValue\"], \"sbg:category\": input.customProps[\"sbg:category\"], \"sbg:altPrefix\": input.customProps[\"sbg:altPrefix\"] }, serialized // serialized match goes last so changed properties are overwritten\n            ), _this, _this.loc + \".in[\" + index + \"]\");\n            model.setValidationCallback(function (err) { return _this.updateValidity(err); });\n            // in case the port was inserted, signify to parent workflow that\n            // it should be added to the graph\n            if (inserted.find(function (i) { return i.id === model.id; })) {\n                _this.eventHub.emit(\"step.inPort.create\", model);\n            }\n            // in case there is a match and the step is being updated, signify to parent workflow\n            // to update node info in graph\n            if (match && isUpdate) {\n                _this.eventHub.emit(\"step.port.change\", model);\n            }\n            // maintain the same visibility of the port\n            // if the match was found, set to old visibility. If not, show if it's a required file\n            model.isVisible = match ? (match.isVisible || utils_1.isFileType(model, true)) : utils_1.isFileType(model, true);\n            var matchExistedAndWasChanged = (match ? match.isVisible !== model.isVisible : true);\n            // notify the canvas that it should display this port but only if its visibility has changed\n            if (model.isVisible && isUpdate && matchExistedAndWasChanged) {\n                // wrapping this in a setTimeout so it will execute in the next tick\n                // the svg relies on model.parentStep being correct, which can only happen\n                // after this.in is set, so after all iterations\n                setTimeout(function () {\n                    _this.eventHub.emit(\"step.inPort.show\", model);\n                });\n            }\n            return model;\n        }).filter(function (port) { return port !== undefined; });\n        var _a;\n    };\n    V1StepModel.prototype.compareOutPorts = function (isUpdate) {\n        var _this = this;\n        if (isUpdate === void 0) { isUpdate = false; }\n        var runOutputs = this.run.outputs;\n        var inserted = [], removed, remaining;\n        // only send events for creating, removing, and updating ports if the run is being updated\n        // when the workflow is initialized the first time, all this will happen automatically\n        if (isUpdate) {\n            _a = StepModel_1.StepModel.portDifference(this.out, this.run.outputs), inserted = _a[0], remaining = _a[1], removed = _a[2];\n            // emit an event about the in port being removed so the workflow can remove it from the graph\n            removed.forEach(function (r) { return _this.eventHub.emit(\"step.outPort.remove\", r); });\n        }\n        this.out = runOutputs.map(function (output, index) {\n            var match = _this.out.find(function (port) { return port.id === output.id; });\n            match = match ? match.serialize() : { id: output.id };\n            var model = new V1WorkflowStepOutputModel_1.V1WorkflowStepOutputModel(__assign({ type: output.type, format: output.fileTypes || [], doc: output.description, label: output.label }, match), _this, _this.loc + \".out[\" + index + \"]\");\n            if (inserted.find(function (i) { return i.id === model.id; })) {\n                _this.eventHub.emit(\"step.outPort.create\", model);\n            }\n            if (match && isUpdate) {\n                _this.eventHub.emit(\"step.port.change\", model);\n            }\n            return model;\n        }).filter(function (port) { return port !== undefined; });\n        var _a;\n    };\n    return V1StepModel;\n}(StepModel_1.StepModel));\nexports.V1StepModel = V1StepModel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/v1.0/V1StepModel.js\n// module id = 69\n// module chunks = 0","\"use strict\";\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CommandLinePart_1 = require(\"./CommandLinePart\");\nvar CommandLinePrepare_1 = require(\"./CommandLinePrepare\");\nvar utils_1 = require(\"./utils\");\nvar JobHelper_1 = require(\"./JobHelper\");\nexports.generateCommandLineParts = function (tool, jobInputs, runtime) {\n    var flatInputs = CommandLinePrepare_1.CommandLinePrepare.flattenInputsAndArgs([].concat(tool.arguments).concat(tool.inputs));\n    var job = utils_1.isEmpty(jobInputs) ? // if job has not been populated\n     __assign({ inputs: JobHelper_1.JobHelper.getJobInputs(tool) }, { runtime: runtime }) : // supply dummy values\n        tool.getContext(); // otherwise use job\n    var flatJobInputs = CommandLinePrepare_1.CommandLinePrepare.flattenJob(job.inputs || job, {});\n    var baseCmdPromise = tool.baseCommand.map(function (cmd, index) {\n        var loc = tool.loc + \".baseCommand[\" + index + \"]\";\n        return CommandLinePrepare_1.CommandLinePrepare.prepare(cmd, flatJobInputs, tool.getContext(), loc, \"baseCommand\").then(function (suc) {\n            if (suc instanceof CommandLinePart_1.CommandLinePart)\n                return suc;\n            return new CommandLinePart_1.CommandLinePart(suc, \"baseCommand\", loc);\n        }, function (err) {\n            return new CommandLinePart_1.CommandLinePart(\"<\" + err.type + \" at \" + err.loc + \">\", err.type, loc);\n        });\n    });\n    var inputPromise = flatInputs.map(function (input) {\n        return CommandLinePrepare_1.CommandLinePrepare.prepare(input, flatJobInputs, tool.getContext(input), input.loc);\n    }).filter(function (i) { return i instanceof Promise; }).map(function (promise) {\n        return promise.then(function (succ) { return succ; }, function (err) {\n            return new CommandLinePart_1.CommandLinePart(\"<\" + err.type + \" at \" + err.loc + \">\", err.type);\n        });\n    });\n    var stdOutPromise = CommandLinePrepare_1.CommandLinePrepare.prepare(tool.stdout, flatJobInputs, tool.getContext(), tool.stdout.loc, \"stdout\");\n    var stdInPromise = CommandLinePrepare_1.CommandLinePrepare.prepare(tool.stdin, flatJobInputs, tool.getContext(), tool.stdin.loc, \"stdin\");\n    return Promise.all([].concat(baseCmdPromise, inputPromise, stdOutPromise, stdInPromise)).then(function (parts) {\n        return parts.filter(function (part) { return part !== null; });\n    });\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/helpers/CommandLineUtils.js\n// module id = 70\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ExpressionModel_1 = require(\"../generic/ExpressionModel\");\nvar CommandLinePart_1 = require(\"./CommandLinePart\");\nvar CommandLinePrepare_1 = require(\"./CommandLinePrepare\");\nvar TypeResolver_1 = require(\"./TypeResolver\");\nvar V1CommandArgumentModel_1 = require(\"../v1.0/V1CommandArgumentModel\");\nvar V1ExpressionModel_1 = require(\"../v1.0/V1ExpressionModel\");\nvar CommandLineParsers = /** @class */ (function () {\n    function CommandLineParsers() {\n    }\n    CommandLineParsers.primitive = function (input, job, value, context, cmdType, loc) {\n        CommandLineParsers.checkMismatch(input, job, value);\n        var prefix = input.inputBinding.prefix || \"\";\n        var separator = input.inputBinding.separate !== false ? \" \" : \"\";\n        var valueExists = value !== undefined && value !== null;\n        var checkedValue = valueExists ? value : job[input.id];\n        if (checkedValue !== null && checkedValue !== undefined) {\n            if (checkedValue.hasOwnProperty(\"path\")) {\n                checkedValue = checkedValue.path;\n            }\n            else if (checkedValue.hasOwnProperty(\"location\")) {\n                checkedValue = checkedValue.location;\n            }\n        }\n        if (input.inputBinding.valueFrom && input.inputBinding.valueFrom.serialize() !== undefined) {\n            return input.inputBinding.valueFrom.evaluate(context)\n                .then(function (res) {\n                return new CommandLinePart_1.CommandLinePart(prefix + separator + res, cmdType, loc);\n            }, function (err) {\n                return new CommandLinePart_1.CommandLinePart(\"<\" + err.type + \" at \" + err.loc + \">\", err.type, loc);\n            });\n        }\n        return new Promise(function (res) {\n            res(new CommandLinePart_1.CommandLinePart(prefix + separator + checkedValue, cmdType, loc));\n        });\n    };\n    CommandLineParsers.string = function (input, job, value, context, type, loc) {\n        return new Promise(function (res, rej) {\n            res(new CommandLinePart_1.CommandLinePart(input, type, loc));\n        });\n    };\n    CommandLineParsers.boolean = function (input, job, value, context, type, loc) {\n        CommandLineParsers.checkMismatch(input, job, value);\n        var result = \"\";\n        var prefix = input.inputBinding.prefix || \"\";\n        var itemsPrefix = (input.type.typeBinding && input.type.typeBinding.prefix)\n            ? input.type.typeBinding.prefix : '';\n        var separator = input.inputBinding.separate !== false ? \" \" : \"\";\n        value = value || job[input.id];\n        if (value) {\n            prefix = input.type.items === \"boolean\" ? itemsPrefix : prefix;\n            if (input.inputBinding.valueFrom && input.inputBinding.valueFrom.serialize() !== undefined) {\n                return input.inputBinding.valueFrom.evaluate(context)\n                    .then(function (res) {\n                    return new CommandLinePart_1.CommandLinePart(prefix + separator + res, type, loc);\n                }, function (err) {\n                    return new CommandLinePart_1.CommandLinePart(\"<\" + err.type + \" at \" + err.loc + \">\", err.type, loc);\n                });\n            }\n            result = prefix;\n        }\n        return new Promise(function (res) {\n            res(new CommandLinePart_1.CommandLinePart(result, type, loc));\n        });\n    };\n    CommandLineParsers.record = function (input, job, value, context, cmdType, loc) {\n        CommandLineParsers.checkMismatch(input, job, value);\n        var prefix = input.inputBinding.prefix || \"\";\n        var separator = input.inputBinding.separate !== false ? \" \" : \"\";\n        return new Promise(function (res) {\n            res(new CommandLinePart_1.CommandLinePart(prefix + separator, cmdType, loc));\n        });\n    };\n    CommandLineParsers.array = function (input, job, value, context, cmdType, loc) {\n        CommandLineParsers.checkMismatch(input, job, value);\n        value = value || job[input.id] || [];\n        value = value.map(function (val) { return val && val.hasOwnProperty(\"path\") ? val.path : val; });\n        var prefix = input.inputBinding.prefix || \"\";\n        var separator = input.inputBinding.separate !== false ? \" \" : \"\";\n        var itemSeparator = typeof input.inputBinding.itemSeparator === \"string\" ?\n            input.inputBinding.itemSeparator : \" \";\n        return Promise.all(value.map(function (val, index) {\n            return Object.assign({}, input, {\n                id: index,\n                type: input.type.items,\n                inputBinding: input.type.typeBinding || {}\n            }, { items: undefined });\n        }).map(function (item) {\n            return CommandLinePrepare_1.CommandLinePrepare.prepare(item, value, value[item.id]);\n        })).then(function (res) {\n            return new CommandLinePart_1.CommandLinePart(prefix + separator + res.map(function (part) { return part.value; }).join(itemSeparator), cmdType, loc);\n        });\n    };\n    CommandLineParsers.expression = function (expr, job, value, context, cmdType, loc) {\n        return expr.evaluate(context).then(function (res) {\n            return res === undefined ? \"\" : res;\n        }, function (err) {\n            return new CommandLinePart_1.CommandLinePart(\"<\" + err.type + \" at \" + err.loc + \">\", err.type, loc);\n        });\n    };\n    CommandLineParsers.argument = function (arg, job, value, context, cmdType, loc) {\n        if (arg.primitive) {\n            if (arg instanceof V1CommandArgumentModel_1.V1CommandArgumentModel) {\n                var expr = new V1ExpressionModel_1.V1ExpressionModel(arg.primitive, arg.loc);\n                if (expr.isExpression) {\n                    return CommandLineParsers.expression(expr, job, value, context, cmdType, loc).then(function (res) {\n                        if (res instanceof CommandLinePart_1.CommandLinePart)\n                            return res;\n                        return new CommandLinePart_1.CommandLinePart(res, \"argument\", loc);\n                    });\n                }\n            }\n            return new Promise(function (res) {\n                res(new CommandLinePart_1.CommandLinePart(arg.primitive, \"argument\", loc));\n            });\n        }\n        var prefix = arg.prefix || \"\";\n        var separator = arg.separate !== false ? \" \" : \"\";\n        if (arg.valueFrom) {\n            return CommandLinePrepare_1.CommandLinePrepare.prepare(arg.valueFrom, job, context, loc).then(function (res) {\n                if (res instanceof CommandLinePart_1.CommandLinePart) {\n                    return res;\n                }\n                return new CommandLinePart_1.CommandLinePart(prefix + separator + res, cmdType, loc);\n            });\n        }\n        return new Promise(function (res) {\n            res(new CommandLinePart_1.CommandLinePart(prefix, \"input\", loc));\n        });\n    };\n    CommandLineParsers.stream = function (stream, job, value, context, cmdType, loc) {\n        if (stream instanceof ExpressionModel_1.ExpressionModel) {\n            return CommandLineParsers.expression(stream, job, value, context, cmdType, loc).then(function (res) {\n                if (res instanceof CommandLinePart_1.CommandLinePart) {\n                    return res;\n                }\n                else {\n                    var prefix = res ? (cmdType === \"stdin\" ? \"< \" : \"> \") : \"\";\n                    return new CommandLinePart_1.CommandLinePart(prefix + res, cmdType, loc);\n                }\n            });\n        }\n    };\n    CommandLineParsers.nullValue = function () {\n        return new Promise(function (res) {\n            res(null);\n        });\n    };\n    CommandLineParsers.checkMismatch = function (input, job, value) {\n        value = value || job[input.id];\n        if (input === null || input.type === null) {\n            return;\n        }\n        // If type declared does not match type of value, throw error\n        if (!TypeResolver_1.TypeResolver.doesTypeMatch(input.type.type, value)) {\n            // If there are items, only throw exception if items don't match either\n            if (!input.type.items || !TypeResolver_1.TypeResolver.doesTypeMatch(input.type.items, value)) {\n                // should be warning on input, not throw an exception\n                // throw(`Mismatched value and type definition expected for ${input.id}. ${input.type.type}\n                // or ${input.type.items}, but instead got ${typeof value}`);\n            }\n        }\n    };\n    return CommandLineParsers;\n}());\nexports.CommandLineParsers = CommandLineParsers;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/helpers/CommandLineParsers.js\n// module id = 71\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CommandLineToolModel_1 = require(\"../generic/CommandLineToolModel\");\nvar DockerRequirementModel_1 = require(\"../generic/DockerRequirementModel\");\nvar RequirementBaseModel_1 = require(\"../generic/RequirementBaseModel\");\nvar JobHelper_1 = require(\"../helpers/JobHelper\");\nvar utils_1 = require(\"../helpers/utils\");\nvar V1CommandArgumentModel_1 = require(\"./V1CommandArgumentModel\");\nvar V1CommandInputParameterModel_1 = require(\"./V1CommandInputParameterModel\");\nvar V1CommandOutputParameterModel_1 = require(\"./V1CommandOutputParameterModel\");\nvar V1ExpressionModel_1 = require(\"./V1ExpressionModel\");\nvar V1InitialWorkDirRequirementModel_1 = require(\"./V1InitialWorkDirRequirementModel\");\nvar V1InlineJavascriptRequirementModel_1 = require(\"./V1InlineJavascriptRequirementModel\");\nvar V1ResourceRequirementModel_1 = require(\"./V1ResourceRequirementModel\");\nvar CommandInputParameterModel_1 = require(\"../generic/CommandInputParameterModel\");\nvar CommandOutputParameterModel_1 = require(\"../generic/CommandOutputParameterModel\");\nvar sbg_expression_lib_1 = require(\"../helpers/sbg-expression-lib\");\nvar ExpressionEvaluator_1 = require(\"../helpers/ExpressionEvaluator\");\nvar V1CommandOutputBindingModel_1 = require(\"./V1CommandOutputBindingModel\");\nvar V1CommandLineToolModel = /** @class */ (function (_super) {\n    __extends(V1CommandLineToolModel, _super);\n    function V1CommandLineToolModel(json, loc) {\n        var _this = _super.call(this, loc) || this;\n        _this.cwlVersion = \"v1.0\";\n        _this.inputs = [];\n        _this.outputs = [];\n        _this.baseCommand = [];\n        _this.arguments = [];\n        _this.hasStdErr = true;\n        // Context for JavaScript execution\n        _this.runtime = {};\n        _this.initializeExprWatchers();\n        if (json)\n            _this.deserialize(json);\n        _this.constructed = true;\n        _this.validateAllExpressions();\n        _this.initializeJobWatchers();\n        _this.initializeInlineJSWatchers();\n        return _this;\n    }\n    V1CommandLineToolModel.prototype.initializeInlineJSWatchers = function () {\n        var _this = this;\n        this.eventHub.on(\"output.metadata.inherit\", function () {\n            _this.inlineJavascriptRequirement.addExpressionLib(sbg_expression_lib_1.sbgHelperLibrary);\n        });\n    };\n    // EXPRESSION CONTEXT //\n    V1CommandLineToolModel.prototype.setRuntime = function (runtime) {\n        if (runtime === void 0) { runtime = {}; }\n        this.runtime.cores = runtime.cores !== undefined ? runtime.cores : this.runtime.cores;\n        this.runtime.ram = runtime.ram !== undefined ? runtime.ram : this.runtime.ram;\n    };\n    V1CommandLineToolModel.prototype.resetJobDefaults = function () {\n        this.jobInputs = JobHelper_1.JobHelper.getJobInputs(this);\n        this.updateCommandLine();\n    };\n    V1CommandLineToolModel.prototype.getContext = function (port) {\n        var context = {\n            runtime: this.runtime,\n            inputs: this.jobInputs\n        };\n        ExpressionEvaluator_1.ExpressionEvaluator.libraries = this.inlineJavascriptRequirement.expressionLib;\n        if (port && port instanceof CommandInputParameterModel_1.CommandInputParameterModel) {\n            if (port.isField) {\n                var root = this.findFieldRoot(port, this.jobInputs);\n                context.self = root ? root[port.id] : null;\n            }\n            else {\n                context.self = this.jobInputs ? this.jobInputs[port.id] : null;\n            }\n        }\n        if (port && port instanceof CommandOutputParameterModel_1.CommandOutputParameterModel) {\n            context.self = JobHelper_1.JobHelper.generateMockJobData({\n                type: {\n                    type: \"array\",\n                    items: \"File\"\n                }\n            });\n        }\n        return context;\n    };\n    ;\n    V1CommandLineToolModel.prototype.addHint = function (hint) {\n        var _this = this;\n        var h = new RequirementBaseModel_1.RequirementBaseModel(hint, V1ExpressionModel_1.V1ExpressionModel, this.loc + \".hints[\" + this.hints.length + \"]\", this.eventHub);\n        h.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        this.hints.push(h);\n        return h;\n    };\n    V1CommandLineToolModel.prototype.addOutput = function (output) {\n        return _super.prototype._addOutput.call(this, V1CommandOutputParameterModel_1.V1CommandOutputParameterModel, output);\n    };\n    V1CommandLineToolModel.prototype.addInput = function (input) {\n        return _super.prototype._addInput.call(this, V1CommandInputParameterModel_1.V1CommandInputParameterModel, input);\n    };\n    V1CommandLineToolModel.prototype.addArgument = function (arg) {\n        var _this = this;\n        var loc = utils_1.incrementLastLoc(this.arguments, this.loc + \".arguments\");\n        var a = new V1CommandArgumentModel_1.V1CommandArgumentModel(arg, loc, this.eventHub);\n        this.arguments.push(a);\n        a.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        this.eventHub.emit(\"argument.create\", arg);\n        return a;\n    };\n    V1CommandLineToolModel.prototype.addBaseCommand = function (cmd) {\n        this.baseCommand.push(cmd);\n    };\n    V1CommandLineToolModel.prototype.setRequirement = function (req, hint) {\n        this.createReq(req, null, hint);\n    };\n    V1CommandLineToolModel.prototype.createReq = function (req, loc, hint) {\n        var _this = this;\n        if (hint === void 0) { hint = false; }\n        var reqModel;\n        var property = hint ? \"hints\" : \"requirements\";\n        loc = loc || this.loc + \".\" + property + \"[\" + this[property].length + \"]\";\n        switch (req.class) {\n            case \"DockerRequirement\":\n                this.docker = new DockerRequirementModel_1.DockerRequirementModel(req, this.docker ? this.docker.loc || loc : loc);\n                this.docker.isHint = hint;\n                this.docker.setValidationCallback(function (err) { return _this.updateValidity(err); });\n                return;\n            case \"InitialWorkDirRequirement\":\n                loc = this.fileRequirement ? this.fileRequirement.loc || loc : loc;\n                this.fileRequirement = new V1InitialWorkDirRequirementModel_1.V1InitialWorkDirRequirementModel(req, loc, this.eventHub);\n                this.fileRequirement.setValidationCallback(function (err) { return _this.updateValidity(err); });\n                this.fileRequirement.isHint = hint;\n                return;\n            case \"ResourceRequirement\":\n                loc = this.resources ? this.resources.loc || loc : loc;\n                this.resources = new V1ResourceRequirementModel_1.V1ResourceRequirementModel(req, loc, this.eventHub);\n                this.resources.setValidationCallback(function (err) { return _this.updateValidity(err); });\n                this.resources.isHint = hint;\n                return;\n            case \"InlineJavascriptRequirement\":\n                loc = this.inlineJavascriptRequirement ? this.inlineJavascriptRequirement.loc || loc : loc;\n                this.inlineJavascriptRequirement = new V1InlineJavascriptRequirementModel_1.V1InlineJavascriptRequirementModel(req, loc);\n                this.inlineJavascriptRequirement.setValidationCallback(function (err) { return _this.updateValidity(err); });\n                this.inlineJavascriptRequirement.isHint = hint;\n                this.inlineJavascriptRequirement.wasPresent = true;\n                return;\n            default:\n                reqModel = new RequirementBaseModel_1.RequirementBaseModel(req, V1ExpressionModel_1.V1ExpressionModel, loc, this.eventHub);\n                reqModel.isHint = hint;\n        }\n        if (reqModel) {\n            this[property].push(reqModel);\n            reqModel.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        }\n    };\n    V1CommandLineToolModel.prototype.updateStream = function (stream, type) {\n        var _this = this;\n        this[type] = stream;\n        stream.loc = this.loc + \".\" + type;\n        stream.setValidationCallback(function (err) { return _this.updateValidity(err); });\n    };\n    // SERIALIZATION //\n    V1CommandLineToolModel.prototype.deserialize = function (tool) {\n        var _this = this;\n        var serializedKeys = [\n            \"baseCommand\",\n            \"stdout\",\n            \"stdin\",\n            \"stderr\",\n            \"successCodes\",\n            \"temporaryFailCodes\",\n            \"permanentFailCodes\",\n            \"inputs\",\n            \"outputs\",\n            \"id\",\n            \"class\",\n            \"cwlVersion\",\n            \"doc\",\n            \"label\",\n            \"arguments\",\n            \"hints\",\n            \"requirements\"\n        ];\n        this.id = this.id = tool[\"sbg:id\"] && tool[\"sbg:id\"].split(\"/\").length > 2 ?\n            tool[\"sbg:id\"].split(\"/\")[2] :\n            utils_1.snakeCase(tool.id);\n        this.description = tool.doc;\n        this.label = tool.label;\n        this.baseCommand = utils_1.charSeparatedToArray(tool.baseCommand, /\\s+/);\n        utils_1.ensureArray(tool.inputs, \"id\", \"type\").map(function (inp) { return _this.addInput(inp); });\n        utils_1.ensureArray(tool.outputs, \"id\", \"type\").map(function (out) { return _this.addOutput(out); });\n        this.arguments = utils_1.ensureArray(tool.arguments).map(function (arg) { return _this.addArgument(arg); });\n        utils_1.ensureArray(tool.hints, \"class\", \"value\").map(function (h, i) { return _this.createReq(h, null, true); });\n        utils_1.ensureArray(tool.requirements, \"class\", \"value\").map(function (r, i) { return _this.createReq(r); });\n        var counter = this.requirements.length;\n        // create DockerRequirement for manipulation\n        if (!this.docker) {\n            this.docker = new DockerRequirementModel_1.DockerRequirementModel({}, this.loc + \".requirements[\" + ++counter + \"]\");\n        }\n        this.docker.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        // create InitialWorkDirRequirement for manipulation\n        if (!this.fileRequirement) {\n            this.fileRequirement = new V1InitialWorkDirRequirementModel_1.V1InitialWorkDirRequirementModel({}, this.loc + \".requirements[\" + ++counter + \"]\", this.eventHub);\n        }\n        this.fileRequirement.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        // create ResourceRequirement for manipulation\n        if (!this.resources) {\n            this.resources = new V1ResourceRequirementModel_1.V1ResourceRequirementModel({}, this.loc + \".requirements[\" + ++counter + \"]\", this.eventHub);\n        }\n        this.resources.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        // create InlineJavascriptRequirement for manipulation\n        if (!this.inlineJavascriptRequirement) {\n            this.inlineJavascriptRequirement = new V1InlineJavascriptRequirementModel_1.V1InlineJavascriptRequirementModel({}, this.loc + \".requirements[\" + ++counter + \"]\");\n        }\n        this.stdin = new V1ExpressionModel_1.V1ExpressionModel(tool.stdin, this.loc + \".stdin\", this.eventHub);\n        this.stdin.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        this.stdout = new V1ExpressionModel_1.V1ExpressionModel(tool.stdout, this.loc + \".stdout\", this.eventHub);\n        this.stdout.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        this.stderr = new V1ExpressionModel_1.V1ExpressionModel(tool.stderr, this.loc + \".stderr\", this.eventHub);\n        this.stderr.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        this.runtime = { cores: 1, ram: 1000 };\n        if (tool[\"sbg:job\"]) {\n            this.jobInputs = __assign({}, JobHelper_1.JobHelper.getNullJobInputs(this), tool[\"sbg:job\"].inputs);\n            this.runtime = __assign({}, this.runtime, tool[\"sbg:job\"].runtime);\n        }\n        else {\n            this.jobInputs = JobHelper_1.JobHelper.getJobInputs(this);\n        }\n        this.sbgId = tool[\"sbg:id\"];\n        this.successCodes = utils_1.ensureArray(tool.successCodes);\n        this.temporaryFailCodes = utils_1.ensureArray(tool.temporaryFailCodes);\n        this.permanentFailCodes = utils_1.ensureArray(tool.permanentFailCodes);\n        utils_1.spreadSelectProps(tool, this.customProps, serializedKeys);\n    };\n    V1CommandLineToolModel.prototype.serialize = function () {\n        var base = {};\n        var hasShellQuote = false;\n        var hasExpression = false;\n        var shellWatcherDispose = this.eventHub.on(\"binding.shellQuote\", function (data) {\n            hasShellQuote = data;\n        });\n        var expressionWatcherDispose = this.eventHub.on(\"expression.serialize\", function (data) {\n            hasExpression = data;\n        });\n        base.class = \"CommandLineTool\";\n        base.cwlVersion = \"v1.0\";\n        if (this.sbgId || this.id) {\n            base.id = this.sbgId || this.id;\n        }\n        base.baseCommand = this.baseCommand.filter(function (b) { return !!b; });\n        base.inputs = this.inputs.map(function (i) { return i.serialize(); });\n        base.outputs = this.outputs.map(function (o) { return o.serialize(); });\n        if (this.description)\n            base.doc = this.description;\n        if (this.label)\n            base.label = this.label;\n        if (this.arguments.length) {\n            base.arguments = this.arguments.map(function (a) { return a.serialize(); }).filter(function (a) { return !!a; });\n        }\n        // Add ShellCommandRequirement if any CommandLineBinding has shellQuote\n        // remove requirement if no CommandLineBinding has shellQuote\n        var shellReqIndex = this.requirements.findIndex((function (req) { return req.class === \"ShellCommandRequirement\"; }));\n        if (hasShellQuote) {\n            base.requirements = [];\n            if (shellReqIndex === -1) {\n                base.requirements.push({\n                    \"class\": \"ShellCommandRequirement\"\n                });\n            }\n        }\n        else if (shellReqIndex > -1) {\n            this.requirements.splice(shellReqIndex, 1);\n        }\n        shellWatcherDispose();\n        // REQUIREMENTS && HINTS\n        base.requirements = base.requirements || [];\n        base.hints = [];\n        if (this.requirements.length) {\n            this.requirements.filter(function (r) { return !!r; }).forEach(function (r) { return base.requirements.push(r.serialize()); });\n        }\n        if (this.hints.length) {\n            this.hints.forEach(function (h) { return base.hints.push(h.serialize()); });\n        }\n        if (this.resources.serialize()) {\n            var dest = this.resources.isHint ? \"hints\" : \"requirements\";\n            base[dest].push(this.resources.serialize());\n        }\n        if (this.docker.serialize()) {\n            var dest = this.docker.isHint ? \"hints\" : \"requirements\";\n            base[dest].push(this.docker.serialize());\n        }\n        if (this.fileRequirement.serialize()) {\n            var dest = this.fileRequirement.isHint ? \"hints\" : \"requirements\";\n            base[dest].push(this.fileRequirement.serialize());\n        }\n        if (!base.requirements.length)\n            delete base.requirements;\n        if (!base.hints.length)\n            delete base.hints;\n        if (this.stdin.serialize() !== undefined)\n            base.stdin = this.stdin.serialize();\n        if (this.stdout.serialize() !== undefined)\n            base.stdout = this.stdout.serialize();\n        if (this.stderr.serialize() !== undefined)\n            base.stderr = this.stderr.serialize();\n        if (this.successCodes.length) {\n            base.successCodes = this.successCodes;\n        }\n        if (this.temporaryFailCodes.length) {\n            base.temporaryFailCodes = this.temporaryFailCodes;\n        }\n        if (this.permanentFailCodes.length) {\n            base.permanentFailCodes = this.permanentFailCodes;\n        }\n        // remove expression lib if it is no longer necessary (no output inherits metadata)\n        var hasMetadataScript = false;\n        for (var i = 0; i < base.outputs.length; i++) {\n            var out = base.outputs[i];\n            if (out.outputBinding && new RegExp(V1CommandOutputBindingModel_1.V1CommandOutputBindingModel.INHERIT_REGEX).test(out.outputBinding.outputEval)) {\n                hasMetadataScript = true;\n                break;\n            }\n        }\n        if (!hasMetadataScript) {\n            this.inlineJavascriptRequirement.removeExpressionLib(sbg_expression_lib_1.sbgHelperLibrary);\n        }\n        // for the InlineJavascriptRequirement,\n        // serialize it if there are expression libs so they aren't lost\n        if (this.inlineJavascriptRequirement.expressionLib.length > 0 || this.inlineJavascriptRequirement.wasPresent) {\n            base.requirements = base.requirements || [];\n            base.requirements.push(this.inlineJavascriptRequirement.serialize());\n            // if there are no expression libs,\n            // create requirement only if there are expressions\n        }\n        else if (hasExpression) {\n            base.requirements = base.requirements || [];\n            base.requirements.push({\n                \"class\": \"InlineJavascriptRequirement\"\n            });\n        }\n        expressionWatcherDispose();\n        return utils_1.spreadAllProps(base, this.customProps);\n    };\n    return V1CommandLineToolModel;\n}(CommandLineToolModel_1.CommandLineToolModel));\nexports.V1CommandLineToolModel = V1CommandLineToolModel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/v1.0/V1CommandLineToolModel.js\n// module id = 72\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CreateFileRequirementModel_1 = require(\"../generic/CreateFileRequirementModel\");\nvar V1DirentModel_1 = require(\"./V1DirentModel\");\nvar utils_1 = require(\"../helpers/utils\");\nvar ExpressionModel_1 = require(\"../generic/ExpressionModel\");\nvar V1ExpressionModel_1 = require(\"./V1ExpressionModel\");\nvar V1InitialWorkDirRequirementModel = /** @class */ (function (_super) {\n    __extends(V1InitialWorkDirRequirementModel, _super);\n    function V1InitialWorkDirRequirementModel(req, loc, eventHub) {\n        var _this = _super.call(this, loc, eventHub) || this;\n        _this['class'] = \"InitialWorkDirRequirement\";\n        _this.listing = [];\n        if (req)\n            _this.deserialize(req);\n        return _this;\n    }\n    V1InitialWorkDirRequirementModel.prototype.addDirent = function (d) {\n        var _this = this;\n        var dirent = new V1DirentModel_1.V1DirentModel(d, this.loc + \".listing[\" + this.listing.length + \"]\", this.eventHub);\n        dirent.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        this.listing.push(dirent);\n        return dirent;\n    };\n    V1InitialWorkDirRequirementModel.prototype.addExpression = function (e) {\n        var _this = this;\n        if (e === void 0) { e = \"\"; }\n        var expression = new V1ExpressionModel_1.V1ExpressionModel(e, this.loc + \".listing[\" + this.listing.length + \"]\", this.eventHub);\n        expression.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        this.listing.push(expression);\n        return expression;\n    };\n    V1InitialWorkDirRequirementModel.prototype.serialize = function () {\n        var base = {\n            'class': \"InitialWorkDirRequirement\",\n            listing: this.listing.reduce(function (acc, item) {\n                var serialized = item.serialize();\n                if (serialized && ((item instanceof ExpressionModel_1.ExpressionModel) || serialized.entryname || serialized.entry)) {\n                    acc.push(serialized);\n                }\n                return acc;\n            }, [])\n        };\n        if (this.customProps.listing) {\n            base.listing = base.listing.concat(this.customProps.listing);\n            var c = __assign({}, this.customProps);\n            delete c.listing;\n            return utils_1.spreadAllProps(base, c);\n        }\n        // don't serialize if the only property that is being serialized is the class\n        var keys = Object.keys(base);\n        var customPropsKeys = Object.keys(this.customProps);\n        if (keys.length === 2 &&\n            keys[0] === \"class\" &&\n            keys[1] === \"listing\" &&\n            !base.listing.length &&\n            customPropsKeys.length === 0) {\n            return undefined;\n        }\n        return utils_1.spreadAllProps(base, this.customProps);\n    };\n    V1InitialWorkDirRequirementModel.prototype.deserialize = function (attr) {\n        var _this = this;\n        var listings = [];\n        var customProperties = [];\n        var serializedKeys = [\"class\"];\n        if (Array.isArray(attr.listing)) {\n            attr.listing.forEach(function (listing) {\n                if (listing) {\n                    if (listing.entryname || listing.entry) {\n                        var any = _this.addDirent(listing);\n                        listings.push(any);\n                    }\n                    else if (typeof listing === \"string\") {\n                        listings.push(_this.addExpression(listing));\n                    }\n                    else {\n                        customProperties.push(listing);\n                    }\n                }\n            });\n        }\n        if (listings.length) {\n            serializedKeys.push(\"listing\");\n        }\n        if (customProperties.length) {\n            this.customProps.listing = customProperties;\n        }\n        this.listing = listings;\n        utils_1.spreadSelectProps(attr, this.customProps, serializedKeys);\n    };\n    return V1InitialWorkDirRequirementModel;\n}(CreateFileRequirementModel_1.CreateFileRequirementModel));\nexports.V1InitialWorkDirRequirementModel = V1InitialWorkDirRequirementModel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/v1.0/V1InitialWorkDirRequirementModel.js\n// module id = 73\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar DirentModel_1 = require(\"../generic/DirentModel\");\nvar V1ExpressionModel_1 = require(\"./V1ExpressionModel\");\nvar utils_1 = require(\"../helpers/utils\");\nvar V1DirentModel = /** @class */ (function (_super) {\n    __extends(V1DirentModel, _super);\n    function V1DirentModel(dirent, loc, eventHub) {\n        var _this = _super.call(this, loc, eventHub) || this;\n        if (dirent)\n            _this.deserialize(dirent);\n        return _this;\n    }\n    V1DirentModel.prototype.serialize = function () {\n        var base = {};\n        if (this.entryName.serialize() !== undefined) {\n            base.entryname = this.entryName.serialize();\n        }\n        if (this.entry.serialize() !== undefined) {\n            base.entry = this.entry.serialize();\n        }\n        return utils_1.spreadAllProps(base, this.customProps);\n    };\n    V1DirentModel.prototype.deserialize = function (attr) {\n        var _this = this;\n        this.entryName = new V1ExpressionModel_1.V1ExpressionModel(attr.entryname, this.loc + \".entryname\", this.eventHub);\n        this.entryName.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        this.entry = new V1ExpressionModel_1.V1ExpressionModel(attr.entry, this.loc + \".entry\", this.eventHub);\n        this.entry.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        utils_1.spreadSelectProps(attr, this.customProps, [\"entry\", \"entryname\"]);\n    };\n    return V1DirentModel;\n}(DirentModel_1.DirentModel));\nexports.V1DirentModel = V1DirentModel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/v1.0/V1DirentModel.js\n// module id = 74\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ProcessRequirementModel_1 = require(\"../generic/ProcessRequirementModel\");\nvar utils_1 = require(\"../helpers/utils\");\nvar V1InlineJavascriptRequirementModel = /** @class */ (function (_super) {\n    __extends(V1InlineJavascriptRequirementModel, _super);\n    function V1InlineJavascriptRequirementModel(req, loc) {\n        var _this = _super.call(this, loc) || this;\n        _this.class = \"InlineJavascriptRequirement\";\n        _this.wasPresent = false;\n        _this.expressionLib = [];\n        if (req)\n            _this.deserialize(req);\n        return _this;\n    }\n    V1InlineJavascriptRequirementModel.prototype.addExpressionLib = function (lib) {\n        if (this.expressionLib.indexOf(lib) === -1) {\n            this.expressionLib.push(lib);\n        }\n    };\n    V1InlineJavascriptRequirementModel.prototype.removeExpressionLib = function (lib) {\n        var index = this.expressionLib.indexOf(lib);\n        if (index !== -1) {\n            this.expressionLib.splice(index, 1);\n        }\n    };\n    V1InlineJavascriptRequirementModel.prototype.deserialize = function (attr) {\n        this.expressionLib = attr.expressionLib || [];\n        utils_1.spreadSelectProps(attr, this.customProps, [\"expressionLib\", \"class\"]);\n    };\n    V1InlineJavascriptRequirementModel.prototype.serialize = function () {\n        var base = {};\n        base.class = this.class;\n        if (this.expressionLib.length)\n            base.expressionLib = this.expressionLib;\n        return utils_1.spreadAllProps(base, this.customProps);\n    };\n    return V1InlineJavascriptRequirementModel;\n}(ProcessRequirementModel_1.ProcessRequirementModel));\nexports.V1InlineJavascriptRequirementModel = V1InlineJavascriptRequirementModel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/v1.0/V1InlineJavascriptRequirementModel.js\n// module id = 75\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ResourceRequirementModel_1 = require(\"../generic/ResourceRequirementModel\");\nvar V1ExpressionModel_1 = require(\"./V1ExpressionModel\");\nvar utils_1 = require(\"../helpers/utils\");\nvar V1ResourceRequirementModel = /** @class */ (function (_super) {\n    __extends(V1ResourceRequirementModel, _super);\n    function V1ResourceRequirementModel(req, loc, eventHub) {\n        var _this = _super.call(this, loc, eventHub) || this;\n        _this.class = \"ResourceRequirement\";\n        _this.mem = new V1ExpressionModel_1.V1ExpressionModel(\"\", _this.loc + \".ramMin\", _this.eventHub);\n        _this.mem.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        _this.cores = new V1ExpressionModel_1.V1ExpressionModel(\"\", _this.loc + \".coresMin\", _this.eventHub);\n        _this.cores.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        if (req)\n            _this.deserialize(req);\n        return _this;\n    }\n    V1ResourceRequirementModel.prototype.serialize = function () {\n        var mem = this.mem.serialize();\n        var cores = this.cores.serialize();\n        // in case neither mem nor cores have been defined, and no custom props were specified\n        if (mem === undefined && cores === undefined && !Object.keys(this.customProps).length) {\n            // indicate that there is nothing to serialize\n            return undefined;\n        }\n        // mem and cores were cast to string during serialization, turn back to numbers if applicable\n        mem = utils_1.returnNumIfNum(mem);\n        cores = utils_1.returnNumIfNum(cores);\n        var base = {\n            \"class\": \"ResourceRequirement\"\n        };\n        if (mem !== undefined)\n            base.ramMin = mem;\n        if (cores !== undefined)\n            base.coresMin = cores;\n        return utils_1.spreadAllProps(base, this.customProps);\n    };\n    V1ResourceRequirementModel.prototype.deserialize = function (attr) {\n        //@todo cover maximum values\n        var _this = this;\n        if (attr.ramMin !== undefined && attr.ramMin !== null) {\n            this.mem = new V1ExpressionModel_1.V1ExpressionModel(attr.ramMin.toString(), this.loc + \".ramMin\", this.eventHub);\n            this.mem.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        }\n        if (attr.coresMin !== undefined && attr.coresMin !== null) {\n            this.cores = new V1ExpressionModel_1.V1ExpressionModel(attr.coresMin.toString(), this.loc + \".coresMin\", this.eventHub);\n            this.cores.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        }\n        utils_1.spreadSelectProps(attr, this.customProps, [\"class\", \"ramMin\", \"coresMin\"]);\n    };\n    V1ResourceRequirementModel.prototype.validate = function (context) {\n        return Promise.all([this.mem.validate(context), this.cores.validate(context)]);\n    };\n    return V1ResourceRequirementModel;\n}(ResourceRequirementModel_1.ResourceRequirementModel));\nexports.V1ResourceRequirementModel = V1ResourceRequirementModel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/v1.0/V1ResourceRequirementModel.js\n// module id = 76\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.sbgHelperLibrary = \"\\nvar setMetadata = function(file, metadata) {\\n    if (!('metadata' in file))\\n        file['metadata'] = metadata;\\n    else {\\n        for (var key in metadata) {\\n            file['metadata'][key] = metadata[key];\\n        }\\n    }\\n    return file\\n};\\n\\nvar inheritMetadata = function(o1, o2) {\\n    var commonMetadata = {};\\n    if (!Array.isArray(o2)) {\\n        o2 = [o2]\\n    }\\n    for (var i = 0; i < o2.length; i++) {\\n        var example = o2[i]['metadata'];\\n        for (var key in example) {\\n            if (i == 0)\\n                commonMetadata[key] = example[key];\\n            else {\\n                if (!(commonMetadata[key] == example[key])) {\\n                    delete commonMetadata[key]\\n                }\\n            }\\n        }\\n    }\\n    if (!Array.isArray(o1)) {\\n        o1 = setMetadata(o1, commonMetadata)\\n    } else {\\n        for (var i = 0; i < o1.length; i++) {\\n            o1[i] = setMetadata(o1[i], commonMetadata)\\n        }\\n    }\\n    return o1;\\n};\";\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/helpers/sbg-expression-lib.js\n// module id = 77\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CommandLineToolModel_1 = require(\"../generic/CommandLineToolModel\");\nvar DockerRequirementModel_1 = require(\"../generic/DockerRequirementModel\");\nvar RequirementBaseModel_1 = require(\"../generic/RequirementBaseModel\");\nvar JobHelper_1 = require(\"../helpers/JobHelper\");\nvar utils_1 = require(\"../helpers/utils\");\nvar SBDraft2CommandArgumentModel_1 = require(\"./SBDraft2CommandArgumentModel\");\nvar SBDraft2CommandInputParameterModel_1 = require(\"./SBDraft2CommandInputParameterModel\");\nvar SBDraft2CommandOutputParameterModel_1 = require(\"./SBDraft2CommandOutputParameterModel\");\nvar SBDraft2CreateFileRequirementModel_1 = require(\"./SBDraft2CreateFileRequirementModel\");\nvar SBDraft2ExpressionModel_1 = require(\"./SBDraft2ExpressionModel\");\nvar SBDraft2ResourceRequirementModel_1 = require(\"./SBDraft2ResourceRequirementModel\");\nvar CommandInputParameterModel_1 = require(\"../generic/CommandInputParameterModel\");\nvar CommandOutputParameterModel_1 = require(\"../generic/CommandOutputParameterModel\");\nvar ErrorCode_1 = require(\"../helpers/validation/ErrorCode\");\nvar SBDraft2CommandLineToolModel = /** @class */ (function (_super) {\n    __extends(SBDraft2CommandLineToolModel, _super);\n    function SBDraft2CommandLineToolModel(json, loc) {\n        var _this = _super.call(this, loc) || this;\n        _this.cwlVersion = \"sbg:draft-2\";\n        _this.baseCommand = [];\n        _this.inputs = [];\n        _this.outputs = [];\n        _this.requirements = [];\n        _this.hints = [];\n        _this.arguments = [];\n        _this.hasStdErr = false;\n        _this.initializeExprWatchers();\n        if (json)\n            _this.deserialize(json);\n        _this.constructed = true;\n        _this.validateAllExpressions();\n        _this.initializeJobWatchers();\n        return _this;\n    }\n    // EXPRESSION CONTEXT //\n    SBDraft2CommandLineToolModel.prototype.setRuntime = function (runtime) {\n        if (runtime === void 0) { runtime = {}; }\n        this.runtime.cpu = runtime.cpu !== undefined ? runtime.cpu : this.runtime.cpu;\n        this.runtime.mem = runtime.mem !== undefined ? runtime.mem : this.runtime.mem;\n    };\n    /**\n     * Returns the context object for expressions in supplied port\n     * @param port\n     * @returns {{$job?: {inputs?: any; allocatedResources?: any}; $self?: any}}\n     */\n    SBDraft2CommandLineToolModel.prototype.getContext = function (port) {\n        var context = {\n            $job: {\n                inputs: this.jobInputs,\n                allocatedResources: this.runtime\n            }\n        };\n        if (port && port instanceof CommandInputParameterModel_1.CommandInputParameterModel) {\n            if (port.isField) {\n                var root = this.findFieldRoot(port, this.jobInputs);\n                context.$self = root ? root[port.id] : null;\n            }\n            else {\n                context.$self = this.jobInputs ? this.jobInputs[port.id] : null;\n            }\n        }\n        if (port && port instanceof CommandOutputParameterModel_1.CommandOutputParameterModel) {\n            context.$self = JobHelper_1.JobHelper.generateMockJobData({ type: { type: \"array\", items: \"File\" } });\n        }\n        return context;\n    };\n    /**\n     * Resets job value to dummy values\n     */\n    SBDraft2CommandLineToolModel.prototype.resetJobDefaults = function () {\n        this.jobInputs = JobHelper_1.JobHelper.getJobInputs(this);\n        this.updateCommandLine();\n    };\n    // CRUD HELPER METHODS //\n    SBDraft2CommandLineToolModel.prototype.addHint = function (hint) {\n        var _this = this;\n        var h = new RequirementBaseModel_1.RequirementBaseModel(hint, SBDraft2ExpressionModel_1.SBDraft2ExpressionModel, this.loc + \".hints[\" + this.hints.length + \"]\", this.eventHub);\n        h.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        this.hints.push(h);\n        return h;\n    };\n    SBDraft2CommandLineToolModel.prototype.addBaseCommand = function (cmd) {\n        var _this = this;\n        if (cmd === void 0) { cmd = \"\"; }\n        var loc = utils_1.incrementLastLoc(this.baseCommand, this.loc + \".baseCommand\");\n        var c = new SBDraft2ExpressionModel_1.SBDraft2ExpressionModel(cmd, loc, this.eventHub);\n        this.baseCommand.push(c);\n        c.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        return c;\n    };\n    SBDraft2CommandLineToolModel.prototype.updateBaseCommand = function (cmd) {\n        var _this = this;\n        this.baseCommand.forEach(function (c) { return c.clearIssue(ErrorCode_1.ErrorCode.EXPR_ALL); });\n        this.baseCommand = [];\n        cmd.forEach(function (c) { return _this.addBaseCommand(c.serialize()); });\n    };\n    SBDraft2CommandLineToolModel.prototype.addArgument = function (arg) {\n        var _this = this;\n        var loc = utils_1.incrementLastLoc(this.arguments, this.loc + \".arguments\");\n        var argument = new SBDraft2CommandArgumentModel_1.SBDraft2CommandArgumentModel(arg, loc, this.eventHub);\n        this.arguments.push(argument);\n        argument.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        return argument;\n    };\n    SBDraft2CommandLineToolModel.prototype.addInput = function (input) {\n        return _super.prototype._addInput.call(this, SBDraft2CommandInputParameterModel_1.SBDraft2CommandInputParameterModel, input);\n    };\n    SBDraft2CommandLineToolModel.prototype.addOutput = function (output) {\n        return _super.prototype._addOutput.call(this, SBDraft2CommandOutputParameterModel_1.SBDraft2CommandOutputParameterModel, output);\n    };\n    SBDraft2CommandLineToolModel.prototype.setRequirement = function (req, hint) {\n        var prop = hint ? \"hints\" : \"requirements\";\n        this.createReq(req, this.loc + \".\" + prop + \"[\" + this[prop].length + \"]\", hint);\n    };\n    SBDraft2CommandLineToolModel.prototype.updateStream = function (stream, type) {\n        var _this = this;\n        this[type] = stream;\n        stream.loc = this.loc + \".\" + type;\n        stream.setValidationCallback(function (err) { return _this.updateValidity(err); });\n    };\n    SBDraft2CommandLineToolModel.prototype.createReq = function (req, loc, hint) {\n        var _this = this;\n        var reqModel;\n        var property = hint ? \"hints\" : \"requirements\";\n        switch (req.class) {\n            case \"DockerRequirement\":\n                this.docker = new DockerRequirementModel_1.DockerRequirementModel(req, loc);\n                this.docker.setValidationCallback(function (err) { return _this.updateValidity(err); });\n                return;\n            case \"CreateFileRequirement\":\n                reqModel = new SBDraft2CreateFileRequirementModel_1.SBDraft2CreateFileRequirementModel(req, loc, this.eventHub);\n                this.fileRequirement = reqModel;\n                reqModel.setValidationCallback(function (err) { return _this.updateValidity(err); });\n                return;\n            case \"sbg:CPURequirement\":\n                this.resources.cores = new SBDraft2ExpressionModel_1.SBDraft2ExpressionModel(req.value, loc + \".value\", this.eventHub);\n                this.resources.cores.setValidationCallback(function (err) { return _this.updateValidity(err); });\n                return;\n            case \"sbg:MemRequirement\":\n                this.resources.mem = new SBDraft2ExpressionModel_1.SBDraft2ExpressionModel(req.value, loc + \".value\", this.eventHub);\n                this.resources.mem.setValidationCallback(function (err) { return _this.updateValidity(err); });\n                return;\n            default:\n                reqModel = new RequirementBaseModel_1.RequirementBaseModel(req, SBDraft2ExpressionModel_1.SBDraft2ExpressionModel, loc);\n        }\n        if (reqModel) {\n            this[property].push(reqModel);\n            reqModel.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        }\n    };\n    // SERIALIZATION //\n    SBDraft2CommandLineToolModel.prototype.deserialize = function (tool) {\n        var _this = this;\n        var serializedAttr = [\n            \"baseCommand\",\n            \"class\",\n            \"id\",\n            \"label\",\n            \"description\",\n            \"inputs\",\n            \"hints\",\n            \"requirements\",\n            \"arguments\",\n            \"outputs\",\n            \"stdin\",\n            \"stdout\",\n            \"successCodes\",\n            \"temporaryFailCodes\",\n            \"permanentFailCodes\",\n            \"cwlVersion\"\n        ];\n        this.id = tool[\"sbg:id\"] && tool[\"sbg:id\"].split(\"/\").length > 2 ?\n            tool[\"sbg:id\"].split(\"/\")[2] :\n            utils_1.snakeCase(tool.id);\n        this.sbgId = tool[\"sbg:id\"];\n        this.label = tool.label;\n        this.description = tool.description;\n        utils_1.ensureArray(tool.inputs).forEach(function (i) { return _this.addInput(i); });\n        utils_1.ensureArray(tool.outputs).forEach(function (o) { return _this.addOutput(o); });\n        // Validate inputs and output uniqueness\n        // this method sets an error on the second input/output with a repeat identifier\n        utils_1.checkPortIdUniqueness(this.inputs.concat(this.outputs));\n        if (tool.arguments) {\n            tool.arguments.forEach(function (arg) {\n                _this.addArgument(arg);\n            });\n        }\n        this.resources = this.resources || new SBDraft2ResourceRequirementModel_1.SBDraft2ResourceRequirementModel(this.loc + \".hints[\" + this.hints.length + \"]\", this.eventHub);\n        this.resources.setValidationCallback(function (ev) { return _this.updateValidity(ev); });\n        if (tool.requirements) {\n            tool.requirements.forEach(function (req, index) {\n                _this.createReq(req, _this.loc + \".requirements[\" + index + \"]\");\n            });\n        }\n        if (tool.hints) {\n            tool.hints.forEach(function (hint, index) {\n                _this.createReq(hint, _this.loc + \".hints[\" + index + \"]\", true);\n            });\n        }\n        this.docker = this.docker || new DockerRequirementModel_1.DockerRequirementModel({}, this.loc + \".hints[\" + this.hints.length + \"]\");\n        this.docker.isHint = true;\n        this.docker.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        this.fileRequirement = this.fileRequirement || new SBDraft2CreateFileRequirementModel_1.SBDraft2CreateFileRequirementModel({}, this.loc + \".requirements[\" + this.requirements.length + \"]\", this.eventHub);\n        this.fileRequirement.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        this.updateStream(new SBDraft2ExpressionModel_1.SBDraft2ExpressionModel(tool.stdin, this.loc + \".stdin\", this.eventHub), \"stdin\");\n        this.updateStream(new SBDraft2ExpressionModel_1.SBDraft2ExpressionModel(tool.stdout, this.loc + \".stdout\", this.eventHub), \"stdout\");\n        this.successCodes = utils_1.ensureArray(tool.successCodes);\n        this.temporaryFailCodes = utils_1.ensureArray(tool.temporaryFailCodes);\n        this.permanentFailCodes = utils_1.ensureArray(tool.permanentFailCodes);\n        tool.baseCommand = tool.baseCommand || [''];\n        // wrap to array\n        tool.baseCommand = !Array.isArray(tool.baseCommand)\n            ? [tool.baseCommand]\n            : tool.baseCommand;\n        this.baseCommand = [];\n        tool.baseCommand.reduce(function (acc, curr) {\n            if (typeof curr === \"string\") {\n                if (typeof acc[acc.length - 1] === \"string\") {\n                    acc[acc.length - 1] += \" \" + curr;\n                    return acc;\n                }\n                else {\n                    return acc.concat([curr]);\n                }\n            }\n            else {\n                return acc.concat([curr]);\n            }\n        }, []).forEach(function (cmd) {\n            _this.addBaseCommand(cmd);\n        });\n        this.runtime = { mem: 1000, cpu: 1 };\n        if (tool[\"sbg:job\"]) {\n            this.jobInputs = __assign({}, JobHelper_1.JobHelper.getNullJobInputs(this), tool[\"sbg:job\"].inputs);\n            this.runtime = __assign({}, this.runtime, tool[\"sbg:job\"].allocatedResources);\n        }\n        else {\n            this.jobInputs = JobHelper_1.JobHelper.getJobInputs(this);\n        }\n        // populates object with all custom attributes not covered in model\n        utils_1.spreadSelectProps(tool, this.customProps, serializedAttr);\n    };\n    SBDraft2CommandLineToolModel.prototype.serialize = function () {\n        var base = {};\n        var hasExpression = false;\n        base.cwlVersion = \"sbg:draft-2\";\n        base.class = \"CommandLineTool\";\n        if (this.sbgId || this.id) {\n            base.id = this.sbgId || this.id;\n        }\n        if (this.label)\n            base.label = this.label;\n        if (this.description)\n            base.description = this.description;\n        var expressionWatcherDispose = this.eventHub.on(\"expression.serialize\", function (data) {\n            hasExpression = data;\n        });\n        // BASECOMMAND\n        base.baseCommand = this.baseCommand\n            .map(function (cmd) { return cmd.serialize(); })\n            .filter(function (cmd) { return !!cmd; })\n            .reduce(function (acc, curr) {\n            if (typeof curr === \"string\") {\n                //@todo implement not splitting quoted text\n                return acc.concat(curr.split(/\\s+/));\n            }\n            else {\n                return acc.concat([curr]);\n            }\n        }, []);\n        // INPUTS\n        base.inputs = this.inputs\n            .map(function (input) { return input.serialize(); });\n        // OUTPUTS\n        base.outputs = this.outputs\n            .map(function (output) { return output.serialize(); });\n        // REQUIREMENTS\n        base.requirements = [];\n        if (this.requirements.length) {\n            base.requirements = this.requirements.map(function (req) { return req.serialize(); });\n        }\n        if (this.fileRequirement.serialize())\n            base.requirements.push(this.fileRequirement.serialize());\n        if (!base.requirements.length)\n            delete base.requirements;\n        // HINTS\n        base.hints = [];\n        if (this.hints.length) {\n            base.hints = this.hints.map(function (hint) { return hint.serialize(); });\n        }\n        if (this.resources.cores.serialize() !== undefined) {\n            base.hints.push({\n                \"class\": \"sbg:CPURequirement\",\n                value: utils_1.returnNumIfNum(this.resources.cores.serialize())\n            });\n        }\n        if (this.resources.mem.serialize() !== undefined) {\n            base.hints.push({\n                \"class\": \"sbg:MemRequirement\",\n                value: utils_1.returnNumIfNum(this.resources.mem.serialize())\n            });\n        }\n        if (this.docker.serialize())\n            base.hints.push(this.docker.serialize());\n        if (!base.hints.length)\n            delete base.hints;\n        // ARGUMENTS\n        if (this.arguments.length) {\n            base.arguments = this.arguments.map(function (arg) { return arg.serialize(); }).filter(function (arg) { return !!arg; });\n        }\n        // STREAM\n        if (this.stdin.serialize()) {\n            base.stdin = this.stdin.serialize();\n        }\n        if (this.stdout.serialize()) {\n            base.stdout = this.stdout.serialize();\n        }\n        if (this.successCodes.length) {\n            base.successCodes = this.successCodes;\n        }\n        if (this.temporaryFailCodes.length) {\n            base.temporaryFailCodes = this.temporaryFailCodes;\n        }\n        if (this.permanentFailCodes.length) {\n            base.permanentFailCodes = this.permanentFailCodes;\n        }\n        var exprReqIndex = this.requirements.findIndex((function (req) { return req.class === \"ExpressionEngineRequirement\"; }));\n        if (hasExpression) {\n            base.requirements = base.requirements || [];\n            if (exprReqIndex === -1) {\n                base.requirements.push({\n                    id: \"#cwl-js-engine\",\n                    \"class\": \"ExpressionEngineRequirement\",\n                    requirements: [\n                        {\n                            dockerPull: \"rabix/js-engine\",\n                            \"class\": \"DockerRequirement\"\n                        }\n                    ]\n                });\n            }\n        }\n        expressionWatcherDispose();\n        base = Object.assign({}, base, this.customProps);\n        return base;\n    };\n    return SBDraft2CommandLineToolModel;\n}(CommandLineToolModel_1.CommandLineToolModel));\nexports.SBDraft2CommandLineToolModel = SBDraft2CommandLineToolModel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/d2sb/SBDraft2CommandLineToolModel.js\n// module id = 78\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CommandArgumentModel_1 = require(\"../generic/CommandArgumentModel\");\nvar SBDraft2CommandLineBindingModel_1 = require(\"./SBDraft2CommandLineBindingModel\");\nvar ErrorCode_1 = require(\"../helpers/validation/ErrorCode\");\nvar SBDraft2CommandArgumentModel = /** @class */ (function (_super) {\n    __extends(SBDraft2CommandArgumentModel, _super);\n    function SBDraft2CommandArgumentModel(arg, loc, eventHub) {\n        var _this = _super.call(this, loc, eventHub) || this;\n        _this.hasExprPrimitive = false;\n        _this.hasShellQuote = false;\n        _this.deserialize(arg || {});\n        return _this;\n    }\n    SBDraft2CommandArgumentModel.prototype.updateBinding = function (binding) {\n        this.hasBinding = true;\n        this.primitive = undefined;\n        this.binding.prefix = binding.prefix;\n        this.binding.position = binding.position;\n        this.binding.separate = binding.separate;\n        this.binding.itemSeparator = binding.itemSeparator;\n    };\n    SBDraft2CommandArgumentModel.prototype.updatePrimitive = function (str) {\n        this.hasBinding = false;\n        this.binding = undefined;\n        this.primitive = str;\n    };\n    SBDraft2CommandArgumentModel.prototype.toggleBinding = function (state) {\n        var _this = this;\n        if (state) {\n            this.binding = new SBDraft2CommandLineBindingModel_1.SBDraft2CommandLineBindingModel({}, this.loc, this.eventHub);\n            this.binding.setValidationCallback(function (ev) { return _this.updateValidity(ev); });\n            this.primitive = undefined;\n        }\n        else {\n            this.primitive = \"\";\n            this.binding.clearIssue(ErrorCode_1.ErrorCode.ALL);\n            this.binding = undefined;\n        }\n        this.hasBinding = state;\n    };\n    Object.defineProperty(SBDraft2CommandArgumentModel.prototype, \"arg\", {\n        get: function () {\n            return this.primitive || this.binding;\n        },\n        set: function (value) {\n            this.deserialize(value);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SBDraft2CommandArgumentModel.prototype.toString = function () {\n        if (this.primitive)\n            return this.primitive;\n        if (this.binding) {\n            return this.binding.valueFrom.toString();\n        }\n        return \"\";\n    };\n    SBDraft2CommandArgumentModel.prototype.serialize = function () {\n        if (this.primitive) {\n            return this.primitive;\n        }\n        else if (this.binding) {\n            return this.binding.serialize();\n        }\n    };\n    SBDraft2CommandArgumentModel.prototype.deserialize = function (attr) {\n        var _this = this;\n        if (typeof attr === \"string\") {\n            this.hasBinding = false;\n            this.primitive = attr;\n        }\n        else if (attr instanceof SBDraft2CommandLineBindingModel_1.SBDraft2CommandLineBindingModel) {\n            this.hasBinding = true;\n            this.binding = new SBDraft2CommandLineBindingModel_1.SBDraft2CommandLineBindingModel(attr.serialize(), this.loc, this.eventHub);\n            this.binding.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        }\n        else {\n            this.hasBinding = true;\n            this.binding = new SBDraft2CommandLineBindingModel_1.SBDraft2CommandLineBindingModel(attr, this.loc, this.eventHub);\n            this.binding.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        }\n    };\n    return SBDraft2CommandArgumentModel;\n}(CommandArgumentModel_1.CommandArgumentModel));\nexports.SBDraft2CommandArgumentModel = SBDraft2CommandArgumentModel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/d2sb/SBDraft2CommandArgumentModel.js\n// module id = 79\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CommandInputParameterModel_1 = require(\"../generic/CommandInputParameterModel\");\nvar ParameterTypeModel_1 = require(\"../generic/ParameterTypeModel\");\nvar utils_1 = require(\"../helpers/utils\");\nvar SBDraft2CommandLineBindingModel_1 = require(\"./SBDraft2CommandLineBindingModel\");\nvar SBDraft2ExpressionModel_1 = require(\"./SBDraft2ExpressionModel\");\nvar SBDraft2CommandInputParameterModel = /** @class */ (function (_super) {\n    __extends(SBDraft2CommandInputParameterModel, _super);\n    function SBDraft2CommandInputParameterModel(input, loc, eventHub) {\n        var _this = _super.call(this, loc, eventHub) || this;\n        /** Binding for inclusion in command line */\n        _this.inputBinding = null;\n        _this.hasSecondaryFiles = false;\n        _this.hasSecondaryFilesInRoot = false;\n        _this.hasStageInput = true;\n        _this.secondaryFiles = [];\n        _this.deserialize(input);\n        return _this;\n    }\n    SBDraft2CommandInputParameterModel.prototype.serialize = function () {\n        var base = __assign({}, this.customProps);\n        base.type = this.type.serialize();\n        if (this.inputBinding) {\n            base.inputBinding = this.inputBinding.serialize();\n            if (this.type.type === \"File\" || this.type.items === \"File\" && this.secondaryFiles.length) {\n                base.inputBinding.secondaryFiles = this.secondaryFiles.map(function (f) { return f.serialize(); }).filter(function (f) { return !!f; });\n            }\n        }\n        if (this.label)\n            base.label = this.label;\n        if (this.description)\n            base.description = this.description;\n        if (this.fileTypes.length)\n            base[\"sbg:fileTypes\"] = this.fileTypes.join(\", \");\n        if (this.isField) {\n            base.name = this.id;\n            return base;\n        }\n        else {\n            base.id = this.id ? \"#\" + this.id : \"\";\n            return base;\n        }\n    };\n    SBDraft2CommandInputParameterModel.prototype.deserialize = function (input) {\n        var _this = this;\n        var serializedAttr = [\"label\", \"description\", \"inputBinding\", \"type\", \"sbg:fileTypes\"];\n        input = input || {};\n        this.isField = !!input.name; // record fields don't have ids\n        this.isField ? serializedAttr.push(\"name\") : serializedAttr.push(\"id\");\n        if (input.id && input.id.charAt(0) === \"#\") {\n            this.id = input.id.substr(1);\n        }\n        else {\n            this.id = input.id\n                || input.name || \"\"; // for record fields\n        }\n        try {\n            utils_1.validateID(this.id);\n        }\n        catch (ex) {\n            this.setIssue((_a = {},\n                _a[this.loc + \".id\"] = {\n                    type: \"error\",\n                    code: ex.code,\n                    message: ex.message\n                },\n                _a));\n        }\n        this.label = input.label;\n        this.description = input.description;\n        this.fileTypes = utils_1.commaSeparatedToArray(input[\"sbg:fileTypes\"]);\n        // if inputBinding isn't defined in input, it shouldn't exist as an object in model\n        if (input.inputBinding !== undefined) {\n            this.inputBinding = new SBDraft2CommandLineBindingModel_1.SBDraft2CommandLineBindingModel(input.inputBinding, this.loc + \".inputBinding\", this.eventHub);\n            this.inputBinding.setValidationCallback(function (err) { return _this.updateValidity(err); });\n            if (input.inputBinding.secondaryFiles) {\n                this.secondaryFiles = utils_1.ensureArray(input.inputBinding.secondaryFiles).map(function (f) { return _this.addSecondaryFile(f); });\n            }\n        }\n        this.type = new ParameterTypeModel_1.ParameterTypeModel(input.type, SBDraft2CommandInputParameterModel, this.id + \"_field\", this.loc + \".type\", this.eventHub);\n        this.type.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        if (utils_1.isType(this, [\"record\", \"enum\"]) && !this.type.name) {\n            this.type.name = this.id;\n        }\n        this.attachFileTypeListeners();\n        // populates object with all custom attributes not covered in model\n        utils_1.spreadSelectProps(input, this.customProps, serializedAttr);\n        var _a;\n    };\n    SBDraft2CommandInputParameterModel.prototype.updateInputBinding = function (binding) {\n        var _this = this;\n        if (binding instanceof SBDraft2CommandLineBindingModel_1.SBDraft2CommandLineBindingModel) {\n            //@todo breaks here for serialize of undefined\n            this.inputBinding.setValidationCallback(function (err) { return _this.updateValidity(err); });\n            this.inputBinding.cloneStatus(binding);\n        }\n    };\n    SBDraft2CommandInputParameterModel.prototype.createInputBinding = function () {\n        var _this = this;\n        this.inputBinding = new SBDraft2CommandLineBindingModel_1.SBDraft2CommandLineBindingModel({}, this.loc + \".inputBinding\", this.eventHub);\n        this.inputBinding.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        return this.inputBinding;\n    };\n    SBDraft2CommandInputParameterModel.prototype.addSecondaryFile = function (file) {\n        if (this.inputBinding) {\n            return this._addSecondaryFile(file, SBDraft2ExpressionModel_1.SBDraft2ExpressionModel, this.inputBinding.loc);\n        }\n    };\n    SBDraft2CommandInputParameterModel.prototype.updateSecondaryFiles = function (files) {\n        if (this.inputBinding) {\n            this._updateSecondaryFiles(files);\n        }\n    };\n    SBDraft2CommandInputParameterModel.prototype.removeSecondaryFile = function (index) {\n        if (this.inputBinding) {\n            this._removeSecondaryFile(index);\n        }\n    };\n    return SBDraft2CommandInputParameterModel;\n}(CommandInputParameterModel_1.CommandInputParameterModel));\nexports.SBDraft2CommandInputParameterModel = SBDraft2CommandInputParameterModel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/d2sb/SBDraft2CommandInputParameterModel.js\n// module id = 80\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CommandOutputParameterModel_1 = require(\"../generic/CommandOutputParameterModel\");\nvar ParameterTypeModel_1 = require(\"../generic/ParameterTypeModel\");\nvar utils_1 = require(\"../helpers/utils\");\nvar SBDraft2CommandOutputBindingModel_1 = require(\"./SBDraft2CommandOutputBindingModel\");\nvar SBDraft2ExpressionModel_1 = require(\"./SBDraft2ExpressionModel\");\nvar SBDraft2CommandOutputParameterModel = /** @class */ (function (_super) {\n    __extends(SBDraft2CommandOutputParameterModel, _super);\n    function SBDraft2CommandOutputParameterModel(output, loc, eventHub) {\n        var _this = _super.call(this, loc, eventHub) || this;\n        _this.secondaryFiles = [];\n        _this.hasSecondaryFiles = false;\n        _this.hasSecondaryFilesInRoot = false;\n        _this.deserialize(output || {});\n        return _this;\n    }\n    SBDraft2CommandOutputParameterModel.prototype.updateSecondaryFiles = function (files) {\n        if (this.outputBinding) {\n            this._updateSecondaryFiles(files);\n        }\n    };\n    SBDraft2CommandOutputParameterModel.prototype.addSecondaryFile = function (file) {\n        if (this.outputBinding) {\n            return this._addSecondaryFile(file, SBDraft2ExpressionModel_1.SBDraft2ExpressionModel, this.outputBinding.loc);\n        }\n    };\n    SBDraft2CommandOutputParameterModel.prototype.removeSecondaryFile = function (index) {\n        if (this.outputBinding) {\n            this._removeSecondaryFile(index);\n        }\n    };\n    SBDraft2CommandOutputParameterModel.prototype.updateOutputBinding = function (binding) {\n        var _this = this;\n        this.outputBinding = new SBDraft2CommandOutputBindingModel_1.SBDraft2CommandOutputBindingModel(binding instanceof SBDraft2CommandOutputBindingModel_1.SBDraft2CommandOutputBindingModel ?\n            binding.serialize() : {}, this.loc + \".outputBinding\", this.eventHub);\n        this.outputBinding.setValidationCallback(function (err) { return _this.updateValidity(err); });\n    };\n    SBDraft2CommandOutputParameterModel.prototype.serialize = function () {\n        var base = {};\n        base.type = this.type.serialize();\n        if (this.label)\n            base.label = this.label;\n        if (this.description)\n            base.description = this.description;\n        if (this.fileTypes && this.fileTypes.length) {\n            base[\"sbg:fileTypes\"] = (this.fileTypes || []).join(\", \");\n        }\n        if (this.outputBinding) {\n            base.outputBinding = this.outputBinding.serialize();\n            // only type File or File[] can have secondaryFiles, loadContents and fileTypes\n            if (!utils_1.isFileType(this)) {\n                delete base.outputBinding.secondaryFiles;\n                delete base.outputBinding.loadContents;\n                delete base[\"sbg:fileTypes\"];\n            }\n            if (utils_1.isFileType(this) && this.secondaryFiles.length > 0) {\n                base.outputBinding.secondaryFiles = this.secondaryFiles.map(function (f) { return f.serialize(); }).filter(function (f) { return !!f; });\n            }\n            if (!Object.keys(base.outputBinding).length) {\n                delete base.outputBinding;\n            }\n        }\n        if (this.isField) {\n            base.name = this.id || \"\";\n        }\n        else {\n            base.id = this.id ? \"#\" + this.id : \"\";\n        }\n        return utils_1.spreadAllProps(base, this.customProps);\n    };\n    SBDraft2CommandOutputParameterModel.prototype.deserialize = function (attr) {\n        var _this = this;\n        var serializedAttr = [\n            \"id\",\n            \"label\",\n            \"description\",\n            \"outputBinding\",\n            \"type\",\n            \"sbg:fileTypes\"\n        ];\n        this.isField = !!attr.name; // record fields don't have ids\n        this.isField ? serializedAttr.push(\"name\") : serializedAttr.push(\"id\");\n        if (attr.id && attr.id.charAt(0) === \"#\") {\n            this.id = attr.id.substr(1);\n        }\n        else {\n            this.id = attr.id\n                || attr.name || \"\"; // for record fields\n        }\n        this.label = attr.label;\n        this.description = attr.description;\n        this.fileTypes = utils_1.commaSeparatedToArray(attr[\"sbg:fileTypes\"]);\n        this.outputBinding = new SBDraft2CommandOutputBindingModel_1.SBDraft2CommandOutputBindingModel(attr.outputBinding, this.loc + \".outputBinding\", this.eventHub);\n        this.outputBinding.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        if (attr.outputBinding && attr.outputBinding.secondaryFiles) {\n            this.secondaryFiles = attr.outputBinding.secondaryFiles.map(function (f) { return _this.addSecondaryFile(f); });\n        }\n        this.type = new ParameterTypeModel_1.ParameterTypeModel(attr.type, SBDraft2CommandOutputParameterModel, this.id + \"_field\", this.loc + \".type\", this.eventHub);\n        this.type.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        if (utils_1.isType(this, [\"record\", \"enum\"]) && !this.type.name) {\n            this.type.name = this.id;\n        }\n        this.attachFileTypeListeners();\n        utils_1.spreadSelectProps(attr, this.customProps, serializedAttr);\n    };\n    return SBDraft2CommandOutputParameterModel;\n}(CommandOutputParameterModel_1.CommandOutputParameterModel));\nexports.SBDraft2CommandOutputParameterModel = SBDraft2CommandOutputParameterModel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/d2sb/SBDraft2CommandOutputParameterModel.js\n// module id = 81\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CommandOutputBindingModel_1 = require(\"../generic/CommandOutputBindingModel\");\nvar SBDraft2ExpressionModel_1 = require(\"./SBDraft2ExpressionModel\");\nvar ErrorCode_1 = require(\"../helpers/validation/ErrorCode\");\nvar SBDraft2CommandOutputBindingModel = /** @class */ (function (_super) {\n    __extends(SBDraft2CommandOutputBindingModel, _super);\n    function SBDraft2CommandOutputBindingModel(binding, loc, eventHub) {\n        var _this = _super.call(this, loc, eventHub) || this;\n        _this.metadata = {};\n        _this.hasSecondaryFiles = true;\n        _this.hasMetadata = true;\n        _this.hasInheritMetadata = true;\n        _this.customProps = {};\n        _this.deserialize(binding || {});\n        return _this;\n    }\n    Object.defineProperty(SBDraft2CommandOutputBindingModel.prototype, \"glob\", {\n        get: function () {\n            return this._glob;\n        },\n        set: function (value) {\n            this.setGlob(value, SBDraft2ExpressionModel_1.SBDraft2ExpressionModel);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SBDraft2CommandOutputBindingModel.prototype, \"outputEval\", {\n        get: function () {\n            return this._outputEval;\n        },\n        set: function (value) {\n            this.setOutputEval(value, SBDraft2ExpressionModel_1.SBDraft2ExpressionModel);\n            this.validateOutputEval();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SBDraft2CommandOutputBindingModel.prototype.validateOutputEval = function () {\n        if (this._outputEval.type !== \"expression\" && this._outputEval.serialize() !== undefined) {\n            this._outputEval.setIssue((_a = {},\n                _a[this.loc + \".outputEval\"] = {\n                    type: \"error\",\n                    message: \"outputEval must be an expression\",\n                    code: ErrorCode_1.ErrorCode.OUTPUT_EVAL_EXPR\n                },\n                _a));\n        }\n        else {\n            this._outputEval.clearIssue(ErrorCode_1.ErrorCode.OUTPUT_EVAL_EXPR);\n        }\n        var _a;\n    };\n    SBDraft2CommandOutputBindingModel.prototype.setInheritMetadataFrom = function (inputId) {\n        this.inheritMetadataFrom = inputId;\n    };\n    SBDraft2CommandOutputBindingModel.prototype.serialize = function () {\n        var _this = this;\n        var base = {};\n        if (this._glob && this._glob.serialize()) {\n            base.glob = this._glob.serialize();\n        }\n        if (Object.keys(this.metadata).length) {\n            base[\"sbg:metadata\"] = {};\n            Object.keys(this.metadata).filter(function (key) { return key; }).forEach(function (key) {\n                var serialized = _this.metadata[key].serialize();\n                if (serialized !== undefined) {\n                    base[\"sbg:metadata\"][key] = serialized;\n                }\n            });\n        }\n        if (this.inheritMetadataFrom) {\n            base[\"sbg:inheritMetadataFrom\"] = this.inheritMetadataFrom.substr(0) === \"#\" ? this.inheritMetadataFrom : \"#\" + this.inheritMetadataFrom;\n        }\n        if (this.loadContents)\n            base.loadContents = true;\n        if (this._outputEval.serialize()) {\n            base.outputEval = this._outputEval.serialize();\n        }\n        return Object.assign({}, this.customProps, base);\n    };\n    SBDraft2CommandOutputBindingModel.prototype.deserialize = function (binding) {\n        var _this = this;\n        var serializedKeys = [\n            \"glob\",\n            \"secondaryFiles\",\n            \"outputEval\",\n            \"loadContents\",\n            \"sbg:metadata\",\n            \"sbg:inheritMetadataFrom\"\n        ];\n        if (binding && binding.constructor === Object) {\n            if (!Array.isArray(binding.glob)) {\n                this._glob = new SBDraft2ExpressionModel_1.SBDraft2ExpressionModel(binding.glob, this.loc + '.glob', this.eventHub);\n                this._glob.setValidationCallback(function (err) { return _this.updateValidity(err); });\n                this.validateGlob();\n            }\n            else {\n                console.warn(\"Not supporting glob which is string[] at \" + this.loc + \". Glob cannot be edited via model\");\n                serializedKeys.splice(0, 1);\n            }\n            this.loadContents = binding.loadContents === true;\n            this.inheritMetadataFrom = null;\n            if (binding[\"sbg:inheritMetadataFrom\"]) {\n                this.inheritMetadataFrom = binding[\"sbg:inheritMetadataFrom\"].charAt(0) === \"#\" ?\n                    binding[\"sbg:inheritMetadataFrom\"].substr(1) :\n                    binding[\"sbg:inheritMetadataFrom\"];\n            }\n            if (this.eventHub) {\n                this.modelListeners.push(this.eventHub.on(\"input.change.id\", function (data) {\n                    if (data.oldId === _this.inheritMetadataFrom) {\n                        _this.inheritMetadataFrom = data.newId;\n                    }\n                }));\n            }\n            this._outputEval = new SBDraft2ExpressionModel_1.SBDraft2ExpressionModel(binding.outputEval, this.loc + \".outputEval\", this.eventHub);\n            this._outputEval.setValidationCallback(function (err) { return _this.updateValidity(err); });\n            this.validateOutputEval();\n            if (binding[\"sbg:metadata\"] && binding[\"sbg:metadata\"].constructor === Object) {\n                Object.keys(binding[\"sbg:metadata\"]).filter(function (key) { return key; }).forEach(function (key) {\n                    var metadata = binding[\"sbg:metadata\"][key];\n                    if (metadata !== undefined) {\n                        _this.metadata[key] = new SBDraft2ExpressionModel_1.SBDraft2ExpressionModel(metadata, _this.loc + \"[\\\"sbg:metadata\\\"].\" + key, _this.eventHub);\n                        _this.metadata[key].setValidationCallback(function (err) { return _this.updateValidity(err); });\n                    }\n                });\n            }\n            Object.keys(binding).forEach(function (key) {\n                if (serializedKeys.indexOf(key) === -1) {\n                    _this.customProps[key] = binding[key];\n                }\n            });\n        }\n    };\n    return SBDraft2CommandOutputBindingModel;\n}(CommandOutputBindingModel_1.CommandOutputBindingModel));\nexports.SBDraft2CommandOutputBindingModel = SBDraft2CommandOutputBindingModel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/d2sb/SBDraft2CommandOutputBindingModel.js\n// module id = 82\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CreateFileRequirementModel_1 = require(\"../generic/CreateFileRequirementModel\");\nvar SBDraft2FileDefModel_1 = require(\"./SBDraft2FileDefModel\");\nvar SBDraft2CreateFileRequirementModel = /** @class */ (function (_super) {\n    __extends(SBDraft2CreateFileRequirementModel, _super);\n    function SBDraft2CreateFileRequirementModel(req, loc, eventHub) {\n        var _this = _super.call(this, loc, eventHub) || this;\n        _this['class'] = \"CreateFileRequirement\";\n        _this._listing = [];\n        _this.deserialize(req);\n        return _this;\n    }\n    Object.defineProperty(SBDraft2CreateFileRequirementModel.prototype, \"listing\", {\n        get: function () {\n            return this._listing;\n        },\n        set: function (value) {\n            var _this = this;\n            this._listing = [];\n            value.forEach(function (def, index) {\n                if (!(def instanceof SBDraft2FileDefModel_1.SBDraft2FileDefModel)) {\n                    def = new SBDraft2FileDefModel_1.SBDraft2FileDefModel(def, _this.loc + \".fileDef[\" + index + \"]\", _this.eventHub);\n                }\n                _this._listing.push(def);\n                def.setValidationCallback(function (err) { return _this.updateValidity(err); });\n            });\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SBDraft2CreateFileRequirementModel.prototype.addDirent = function (def) {\n        var _this = this;\n        if (def instanceof SBDraft2FileDefModel_1.SBDraft2FileDefModel) {\n            //@todo remove this if possible\n            this._listing.push(def);\n            def.setValidationCallback(function (err) { return _this.updateValidity(err); });\n            def.loc = this.loc + \".fileDef[\" + this._listing.length + \"]\";\n            return def;\n        }\n        else {\n            var d = new SBDraft2FileDefModel_1.SBDraft2FileDefModel(def, this.loc + \".fileDef[\" + this._listing.length + \"]\", this.eventHub);\n            d.setValidationCallback(function (err) { return _this.updateValidity(err); });\n            this._listing.push(d);\n            return d;\n        }\n    };\n    SBDraft2CreateFileRequirementModel.prototype.deserialize = function (req) {\n        var _this = this;\n        if (req.fileDef && Array.isArray(req.fileDef)) {\n            this._listing = req.fileDef.map(function (def, index) {\n                var d = new SBDraft2FileDefModel_1.SBDraft2FileDefModel(def, _this.loc + \".fileDef[\" + index + \"]\", _this.eventHub);\n                d.setValidationCallback(function (err) { return _this.updateValidity(err); });\n                return d;\n            });\n        }\n        Object.keys(req).forEach(function (key) {\n            if (key !== \"fileDef\" && key !== \"class\")\n                _this.customProps[key] = req[key];\n        });\n    };\n    SBDraft2CreateFileRequirementModel.prototype.serialize = function () {\n        var base = {};\n        base.class = \"CreateFileRequirement\";\n        base.fileDef = this._listing.map(function (def) { return def.serialize(); });\n        // don't serialize if the only property that is being serialized is the class\n        var customPropsKeys = Object.keys(this.customProps);\n        if (base.fileDef.length === 0 && customPropsKeys.length === 0) {\n            return undefined;\n        }\n        return Object.assign({}, base, this.customProps);\n    };\n    return SBDraft2CreateFileRequirementModel;\n}(CreateFileRequirementModel_1.CreateFileRequirementModel));\nexports.SBDraft2CreateFileRequirementModel = SBDraft2CreateFileRequirementModel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/d2sb/SBDraft2CreateFileRequirementModel.js\n// module id = 83\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar DirentModel_1 = require(\"../generic/DirentModel\");\nvar utils_1 = require(\"../helpers/utils\");\nvar SBDraft2ExpressionModel_1 = require(\"./SBDraft2ExpressionModel\");\nvar SBDraft2FileDefModel = /** @class */ (function (_super) {\n    __extends(SBDraft2FileDefModel, _super);\n    function SBDraft2FileDefModel(fileDef, loc, eventHub) {\n        var _this = _super.call(this, loc, eventHub) || this;\n        _this.entryName = new SBDraft2ExpressionModel_1.SBDraft2ExpressionModel(\"\", _this.loc + \".filename\", _this.eventHub);\n        _this.entry = new SBDraft2ExpressionModel_1.SBDraft2ExpressionModel(\"\", _this.loc + \".fileContent\", _this.eventHub);\n        _this.customProps = {};\n        _this.entryName.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        _this.entry.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        _this.deserialize(fileDef);\n        return _this;\n    }\n    SBDraft2FileDefModel.prototype.serialize = function () {\n        var base = {};\n        if (this.entryName.serialize() !== undefined) {\n            base.filename = this.entryName.serialize();\n        }\n        if (this.entry.serialize() !== undefined) {\n            base.fileContent = this.entry.serialize();\n        }\n        return Object.assign({}, base, this.customProps);\n    };\n    SBDraft2FileDefModel.prototype.deserialize = function (attr) {\n        var _this = this;\n        if (attr) {\n            this.entryName = new SBDraft2ExpressionModel_1.SBDraft2ExpressionModel(attr.filename, this.loc + \".filename\", this.eventHub);\n            this.entryName.setValidationCallback(function (err) { return _this.updateValidity(err); });\n            this.entry = new SBDraft2ExpressionModel_1.SBDraft2ExpressionModel(attr.fileContent, this.loc + \".fileContent\", this.eventHub);\n            this.entry.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        }\n        utils_1.spreadSelectProps(attr, this.customProps, [\"filename\", \"fileContent\"]);\n    };\n    return SBDraft2FileDefModel;\n}(DirentModel_1.DirentModel));\nexports.SBDraft2FileDefModel = SBDraft2FileDefModel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/d2sb/SBDraft2FileDefModel.js\n// module id = 84\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ResourceRequirementModel_1 = require(\"../generic/ResourceRequirementModel\");\nvar utils_1 = require(\"../helpers/utils\");\nvar SBDraft2ExpressionModel_1 = require(\"./SBDraft2ExpressionModel\");\nvar SBDraft2ResourceRequirementModel = /** @class */ (function (_super) {\n    __extends(SBDraft2ResourceRequirementModel, _super);\n    function SBDraft2ResourceRequirementModel(loc, eventHub) {\n        var _this = _super.call(this, loc, eventHub) || this;\n        var locBase = _this.loc.slice(0, -1);\n        _this.mem = new SBDraft2ExpressionModel_1.SBDraft2ExpressionModel(\"\", locBase + \"].value\", _this.eventHub);\n        _this.mem.setValidationCallback(function (ev) { return _this.updateValidity(ev); });\n        _this.cores = new SBDraft2ExpressionModel_1.SBDraft2ExpressionModel(\"\", utils_1.incrementString(locBase) + \"].value\", _this.eventHub);\n        _this.cores.setValidationCallback(function (ev) { return _this.updateValidity(ev); });\n        return _this;\n    }\n    return SBDraft2ResourceRequirementModel;\n}(ResourceRequirementModel_1.ResourceRequirementModel));\nexports.SBDraft2ResourceRequirementModel = SBDraft2ResourceRequirementModel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/d2sb/SBDraft2ResourceRequirementModel.js\n// module id = 85\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar WorkflowStepInputModel_1 = require(\"../generic/WorkflowStepInputModel\");\nvar utils_1 = require(\"../helpers/utils\");\nvar ParameterTypeModel_1 = require(\"../generic/ParameterTypeModel\");\nvar V1ExpressionModel_1 = require(\"./V1ExpressionModel\");\nvar V1WorkflowStepInputModel = /** @class */ (function (_super) {\n    __extends(V1WorkflowStepInputModel, _super);\n    function V1WorkflowStepInputModel(stepInput, step, loc) {\n        var _this = _super.call(this, loc) || this;\n        /**\n         * Should in port be shown on the canvas\n         */\n        _this.isVisible = false;\n        _this.parentStep = step;\n        if (stepInput)\n            _this.deserialize(stepInput);\n        return _this;\n    }\n    V1WorkflowStepInputModel.prototype.serialize = function () {\n        var base = {\n            id: this.id\n        };\n        if (this.default !== undefined && this.default !== null)\n            base.default = this.default;\n        if (this.source.length)\n            base.source = this.source.slice();\n        if (this.valueFrom && this.valueFrom.serialize())\n            base.valueFrom = this.valueFrom.serialize();\n        base = utils_1.spreadAllProps(base, this.customProps);\n        delete base[\"sbg:toolDefaultValue\"];\n        delete base[\"sbg:category\"];\n        delete base[\"sbg:altPrefix\"];\n        return base;\n    };\n    V1WorkflowStepInputModel.prototype.deserialize = function (attr) {\n        var serializedKeys = [\n            \"id\",\n            \"default\",\n            \"source\",\n            \"type\",\n            \"doc\",\n            \"label\",\n            \"fileTypes\"\n        ];\n        this.id = attr.id;\n        this.default = attr.default;\n        this.source = utils_1.ensureArray(attr.source);\n        this.valueFrom = new V1ExpressionModel_1.V1ExpressionModel(attr.valueFrom, this.loc + \".valueFrom\");\n        // properties that will not be serialized on the step.in,\n        // but are necessary for internal functions\n        this.type = attr[\"type\"];\n        if (!this.type)\n            this.type = new ParameterTypeModel_1.ParameterTypeModel(null);\n        this.type.hasDirectoryType = true;\n        this.description = attr[\"doc\"];\n        this.label = attr[\"label\"];\n        this.fileTypes = attr[\"fileTypes\"];\n        utils_1.spreadSelectProps(attr, this.customProps, serializedKeys);\n    };\n    return V1WorkflowStepInputModel;\n}(WorkflowStepInputModel_1.WorkflowStepInputModel));\nexports.V1WorkflowStepInputModel = V1WorkflowStepInputModel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/v1.0/V1WorkflowStepInputModel.js\n// module id = 86\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar WorkflowStepOutputModel_1 = require(\"../generic/WorkflowStepOutputModel\");\nvar ParameterTypeModel_1 = require(\"../generic/ParameterTypeModel\");\nvar V1WorkflowStepOutputModel = /** @class */ (function (_super) {\n    __extends(V1WorkflowStepOutputModel, _super);\n    function V1WorkflowStepOutputModel(output, step, loc) {\n        var _this = _super.call(this, loc) || this;\n        _this.parentStep = step;\n        if (output)\n            _this.deserialize(output);\n        return _this;\n    }\n    V1WorkflowStepOutputModel.prototype.serialize = function () {\n        return {\n            id: this.id\n        };\n    };\n    Object.defineProperty(V1WorkflowStepOutputModel.prototype, \"sourceId\", {\n        get: function () {\n            return this.parentStep.id + \"/\" + this.id;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    V1WorkflowStepOutputModel.prototype.deserialize = function (output) {\n        this.id = output.id;\n        // properties that will not be serialized on the step.out,\n        // but are necessary for internal functions\n        this.type = output[\"type\"];\n        if (!this.type)\n            this.type = new ParameterTypeModel_1.ParameterTypeModel(null);\n        this.type.hasDirectoryType = true;\n        this.description = output[\"doc\"];\n        this.label = output[\"label\"];\n        this.fileTypes = output[\"format\"];\n    };\n    return V1WorkflowStepOutputModel;\n}(WorkflowStepOutputModel_1.WorkflowStepOutputModel));\nexports.V1WorkflowStepOutputModel = V1WorkflowStepOutputModel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/v1.0/V1WorkflowStepOutputModel.js\n// module id = 87\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar WorkflowModel_1 = require(\"../generic/WorkflowModel\");\nvar SBDraft2StepModel_1 = require(\"./SBDraft2StepModel\");\nvar SBDraft2WorkflowInputParameterModel_1 = require(\"./SBDraft2WorkflowInputParameterModel\");\nvar SBDraft2WorkflowOutputParameterModel_1 = require(\"./SBDraft2WorkflowOutputParameterModel\");\nvar utils_1 = require(\"../helpers/utils\");\nvar constants_1 = require(\"../helpers/constants\");\nvar WorkflowInputParameterModel_1 = require(\"../generic/WorkflowInputParameterModel\");\nvar SBDraft2ExpressionModel_1 = require(\"./SBDraft2ExpressionModel\");\nvar SBDraft2WorkflowModel = /** @class */ (function (_super) {\n    __extends(SBDraft2WorkflowModel, _super);\n    function SBDraft2WorkflowModel(workflow, loc) {\n        if (loc === void 0) { loc = \"document\"; }\n        var _this = _super.call(this, loc) || this;\n        _this.cwlVersion = \"sbg:draft-2\";\n        _this.steps = [];\n        _this.inputs = [];\n        _this.outputs = [];\n        _this.hasBatch = true;\n        if (workflow)\n            _this.deserialize(workflow);\n        _this.graph = _this.constructGraph();\n        _this.validateGraph();\n        _this.eventHub.on(\"io.change.id\", function (node, oldId) {\n            if (node instanceof WorkflowInputParameterModel_1.WorkflowInputParameterModel && _this.batchInput === oldId) {\n                _this.batchInput = node.id;\n            }\n        });\n        return _this;\n    }\n    SBDraft2WorkflowModel.prototype.createInputFromPort = function (inPort, data) {\n        if (data === void 0) { data = {}; }\n        var port = _super.prototype._createInputFromPort.call(this, inPort, SBDraft2WorkflowInputParameterModel_1.SBDraft2WorkflowInputParameterModel, undefined, undefined, data);\n        port.customProps[\"sbg:includeInPorts\"] = true;\n        return port;\n    };\n    SBDraft2WorkflowModel.prototype.createOutputFromPort = function (outPort, data) {\n        if (data === void 0) { data = {}; }\n        return _super.prototype._createOutputFromPort.call(this, outPort, SBDraft2WorkflowOutputParameterModel_1.SBDraft2WorkflowOutputParameterModel, undefined, undefined, data);\n    };\n    SBDraft2WorkflowModel.prototype.exposePort = function (inPort) {\n        _super.prototype._exposePort.call(this, inPort, SBDraft2WorkflowInputParameterModel_1.SBDraft2WorkflowInputParameterModel);\n    };\n    SBDraft2WorkflowModel.prototype.getSourceConnectionId = function (source) {\n        // source comes from a step\n        if (/[.]+/.test(source)) {\n            var _a = source.split(\".\"), step = _a[0], id = _a[1];\n            step = step.charAt(0) === \"#\" ? step.substr(1) : step;\n            return \"\" + constants_1.STEP_OUTPUT_CONNECTION_PREFIX + step + \"/\" + id;\n        }\n        else {\n            var s = source.charAt(0) === \"#\" ? source.substr(1) : source;\n            return \"\" + constants_1.STEP_OUTPUT_CONNECTION_PREFIX + s + \"/\" + s;\n        }\n    };\n    /**\n     * Checks if source contains stepId.\n     * If it does, returns id of step.out, else null;\n     * @param source\n     * @param stepId\n     */\n    SBDraft2WorkflowModel.prototype.isSourceFromStep = function (source, stepId) {\n        if (/[.]+/.test(source)) {\n            var split = source.split('.');\n            if (split[0] === \"#\" + stepId)\n                return split[1];\n            return null;\n        }\n        return null;\n    };\n    SBDraft2WorkflowModel.prototype.addStepFromProcess = function (proc) {\n        var _this = this;\n        var loc = this.loc + \".steps[\" + this.steps.length + \"]\";\n        var step = new SBDraft2StepModel_1.SBDraft2StepModel({\n            inputs: [],\n            outputs: [],\n            run: proc\n        }, loc, this.eventHub);\n        step.setValidationCallback(function (err) { return _this.updateValidity(err); });\n        this.steps.push(step);\n        step.id = this.getNextAvailableId(step.id);\n        this.addStepToGraph(step);\n        this.eventHub.emit(\"step.create\", step);\n        return step;\n    };\n    SBDraft2WorkflowModel.prototype.setBatch = function (input, value) {\n        if (!value || value === \"none\") {\n            this.batchByValue = null;\n            this.batchInput = null;\n            return;\n        }\n        this.batchInput = input;\n        this.batchByValue = value;\n    };\n    SBDraft2WorkflowModel.prototype.addHint = function (hint) {\n        return this.createReq(hint, SBDraft2ExpressionModel_1.SBDraft2ExpressionModel, undefined, true);\n    };\n    SBDraft2WorkflowModel.prototype.serializeEmbedded = function (retainSource) {\n        if (retainSource === void 0) { retainSource = false; }\n        return this._serialize(true, retainSource);\n    };\n    SBDraft2WorkflowModel.prototype.serialize = function () {\n        return this._serialize(false);\n    };\n    SBDraft2WorkflowModel.prototype._serialize = function (embed, retainSource) {\n        if (retainSource === void 0) { retainSource = false; }\n        var base = {};\n        base.class = \"Workflow\";\n        base.cwlVersion = \"sbg:draft-2\";\n        if (this.sbgId || this.id) {\n            base.id = this.sbgId || this.id;\n        }\n        if (this.label)\n            base.label = this.label;\n        if (this.description)\n            base.description = this.description;\n        base.inputs = this.inputs.map(function (i) { return i.serialize(); });\n        base.outputs = this.outputs.map(function (o) { return o.serialize(); });\n        base.steps = this.steps.map(function (s) {\n            if (embed) {\n                return s.serializeEmbedded(retainSource);\n            }\n            else {\n                return s.serialize();\n            }\n        });\n        if (this.hints.length) {\n            base.hints = this.hints.map(function (hint) { return hint.serialize(); });\n        }\n        if (this.batchInput)\n            base[\"sbg:batchInput\"] = \"#\" + this.batchInput;\n        if (this.batchByValue) {\n            var valueIsArray = Array.isArray(this.batchByValue);\n            var batchBy = {\n                type: valueIsArray ? \"criteria\" : \"item\"\n            };\n            if (valueIsArray) {\n                batchBy.criteria = this.batchByValue;\n            }\n            base[\"sbg:batchBy\"] = batchBy;\n        }\n        return utils_1.spreadAllProps(base, this.customProps);\n    };\n    SBDraft2WorkflowModel.prototype.deserialize = function (workflow) {\n        var _this = this;\n        var serializedKeys = [\n            \"id\",\n            \"class\",\n            \"cwlVersion\",\n            \"steps\",\n            \"inputs\",\n            \"outputs\",\n            \"label\",\n            \"hints\",\n            \"description\",\n            \"sbg:batchBy\",\n            \"sbg:batchInput\"\n        ];\n        this.label = workflow.label;\n        this.description = workflow.description;\n        this.id = workflow[\"sbg:id\"] && workflow[\"sbg:id\"].split(\"/\").length > 2 ?\n            workflow[\"sbg:id\"].split(\"/\")[2] :\n            utils_1.snakeCase(workflow.id);\n        this.sbgId = workflow[\"sbg:id\"];\n        this.steps = utils_1.ensureArray(workflow.steps).map(function (step, index) {\n            if (step.run && typeof step.run !== \"string\") {\n                step.run.cwlVersion = step.run.cwlVersion || \"sbg:draft-2\";\n            }\n            var stepModel = new SBDraft2StepModel_1.SBDraft2StepModel(step, _this.loc + \".steps[\" + index + \"]\", _this.eventHub);\n            stepModel.setValidationCallback(function (err) { return _this.updateValidity(err); });\n            return stepModel;\n        });\n        this.inputs = utils_1.ensureArray(workflow.inputs).map(function (input, index) {\n            var inputParameterModel = new SBDraft2WorkflowInputParameterModel_1.SBDraft2WorkflowInputParameterModel(input, _this.loc + \".inputs[\" + index + \"]\", _this.eventHub);\n            inputParameterModel.setValidationCallback(function (err) { return _this.updateValidity(err); });\n            return inputParameterModel;\n        });\n        this.outputs = utils_1.ensureArray(workflow.outputs).map(function (output, index) {\n            var outputParameterModel = new SBDraft2WorkflowOutputParameterModel_1.SBDraft2WorkflowOutputParameterModel(output, _this.loc + \".outputs[\" + index + \"]\", _this.eventHub);\n            outputParameterModel.setValidationCallback(function (err) { return _this.updateValidity(err); });\n            return outputParameterModel;\n        });\n        this.hints = utils_1.ensureArray(workflow.hints).map(function (hint, i) {\n            return _this.createReq(hint, SBDraft2ExpressionModel_1.SBDraft2ExpressionModel, _this.loc + \".hints[\" + i + \"]\", true);\n        });\n        if (workflow[\"sbg:batchInput\"]) {\n            // Remove # in front of id\n            if (workflow[\"sbg:batchInput\"].indexOf(\"#\") === 0) {\n                this.batchInput = workflow[\"sbg:batchInput\"].substring(1);\n            }\n            if (workflow[\"sbg:batchBy\"].type === \"item\") {\n                this.batchByValue = \"item\";\n            }\n            else {\n                this.batchByValue = workflow[\"sbg:batchBy\"].criteria;\n            }\n        }\n        else {\n            this.batchByValue = null;\n            this.batchInput = null;\n        }\n        utils_1.spreadSelectProps(workflow, this.customProps, serializedKeys);\n    };\n    return SBDraft2WorkflowModel;\n}(WorkflowModel_1.WorkflowModel));\nexports.SBDraft2WorkflowModel = SBDraft2WorkflowModel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/d2sb/SBDraft2WorkflowModel.js\n// module id = 88\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar StepModel_1 = require(\"../generic/StepModel\");\nvar WorkflowModel_1 = require(\"../generic/WorkflowModel\");\nvar ExpressionToolModel_1 = require(\"../generic/ExpressionToolModel\");\nvar SBDraft2WorkflowStepInputModel_1 = require(\"./SBDraft2WorkflowStepInputModel\");\nvar SBDraft2WorkflowStepOutputModel_1 = require(\"./SBDraft2WorkflowStepOutputModel\");\nvar utils_1 = require(\"../helpers/utils\");\nvar WorkflowFactory_1 = require(\"../generic/WorkflowFactory\");\nvar CommandLineToolFactory_1 = require(\"../generic/CommandLineToolFactory\");\nvar SBDraft2ExpressionModel_1 = require(\"./SBDraft2ExpressionModel\");\nvar SBDraft2StepModel = /** @class */ (function (_super) {\n    __extends(SBDraft2StepModel, _super);\n    function SBDraft2StepModel(step, loc, eventHub) {\n        var _this = _super.call(this, loc, eventHub) || this;\n        _this.hasMultipleScatter = false;\n        _this.hasScatterMethod = false;\n        if (step)\n            _this.deserialize(step);\n        return _this;\n    }\n    SBDraft2StepModel.prototype.setRunProcess = function (process) {\n        if (process && process.class) {\n            this.createRun(process);\n            this.compareInPorts(true);\n            this.compareOutPorts(true);\n            this.eventHub.emit(\"step.update\", this);\n        }\n    };\n    SBDraft2StepModel.prototype.addHint = function (hint) {\n        return this.createReq(hint, SBDraft2ExpressionModel_1.SBDraft2ExpressionModel, undefined, true);\n    };\n    SBDraft2StepModel.prototype.compareInPorts = function (isUpdate) {\n        var _this = this;\n        if (isUpdate === void 0) { isUpdate = false; }\n        var runInputs = this.run.inputs;\n        var inserted = [], removed, remaining;\n        remaining = this.in;\n        if (isUpdate) {\n            _a = StepModel_1.StepModel.portDifference(this.in, this.run.inputs), inserted = _a[0], remaining = _a[1], removed = _a[2];\n            removed.forEach(function (r) { return _this.eventHub.emit(\"step.inPort.remove\", r); });\n        }\n        // because type cannot be check on the level of the step\n        // (step.in is just the id of the incoming port),\n        // type and fileTypes from the app's inputs are spliced into the in ports.\n        // Type validation is done for connections based on this information\n        this.in = runInputs.map(function (input, index) {\n            var match = remaining.find(function (port) { return input.id === port.id; });\n            var serialized = match ? match.serialize() : { id: _this.id + \".\" + input.id };\n            // here will set source and default if they exist\n            var newPort = new SBDraft2WorkflowStepInputModel_1.SBDraft2WorkflowStepInputModel(__assign({ type: input.type, fileTypes: input.fileTypes || [], description: input.description, label: input.label }, serialized, { \"sbg:toolDefaultValue\": input.customProps[\"sbg:toolDefaultValue\"], \"sbg:category\": input.customProps[\"sbg:category\"], \"sbg:altPrefix\": input.customProps[\"sbg:altPrefix\"] }), _this, _this.loc + \".inputs[\" + index + \"]\");\n            newPort.setValidationCallback(function (err) { return _this.updateValidity(err); });\n            // in case the port was inserted, signify to parent workflow that\n            // it should be added to the graph\n            if (inserted.find(function (i) { return i.id === newPort.id; })) {\n                _this.eventHub.emit(\"step.inPort.create\", newPort);\n            }\n            // in case there is a match and the step is being updated, signify to parent workflow\n            // to update node info in graph\n            if (match && isUpdate) {\n                _this.eventHub.emit(\"step.port.change\", newPort);\n            }\n            // for some absurd reason, visibility is kept inside the run property, on the actual input\n            newPort.isVisible = (match ? match.isVisible : !!input[\"customProps\"][\"sbg:includeInPorts\"]) || utils_1.isFileType(input, true);\n            var matchExistedAndWasChanged = (match ? match.isVisible !== newPort.isVisible : true);\n            // notify the canvas that it should display this port but only if its visibility has changed\n            if (newPort.isVisible && isUpdate && matchExistedAndWasChanged) {\n                // wrapping this in a setTimeout so it will execute in the next tick\n                // the svg relies on model.parentStep being correct, which can only happen\n                // after this.in is set, so after all iterations\n                setTimeout(function () {\n                    _this.eventHub.emit(\"step.inPort.show\", newPort);\n                });\n            }\n            return newPort;\n        }).filter(function (port) { return port !== undefined; });\n        var _a;\n    };\n    SBDraft2StepModel.prototype.compareOutPorts = function (isUpdate) {\n        var _this = this;\n        if (isUpdate === void 0) { isUpdate = false; }\n        var runOutputs = this.run.outputs;\n        var inserted = [], removed, remaining;\n        if (isUpdate) {\n            _a = StepModel_1.StepModel.portDifference(this.out, this.run.outputs), inserted = _a[0], remaining = _a[1], removed = _a[2];\n            removed.forEach(function (r) { return _this.eventHub.emit(\"step.outPort.remove\", r); });\n        }\n        this.out = runOutputs.map(function (output, index) {\n            var match = _this.out.find(function (port) { return output.id === port.id; });\n            match = match ? match.serialize() : { id: _this.id + \".\" + output.id };\n            var model = new SBDraft2WorkflowStepOutputModel_1.SBDraft2WorkflowStepOutputModel(__assign({ type: output.type, fileTypes: output.fileTypes, description: output.description, label: output.label }, match), _this, _this.loc + \".outputs[\" + index + \"]\");\n            if (inserted.find(function (i) { return i.id === model.id; })) {\n                _this.eventHub.emit(\"step.outPort.create\", model);\n            }\n            if (match && isUpdate) {\n                _this.eventHub.emit(\"step.port.change\", model);\n            }\n            return model;\n        }).filter(function (port) { return port !== undefined; });\n        var _a;\n    };\n    SBDraft2StepModel.prototype.createRun = function (process) {\n        var _this = this;\n        switch (process.class) {\n            case \"Workflow\":\n                this.run = WorkflowFactory_1.WorkflowFactory.from(process, this.loc + \".run\");\n                this.run.setValidationCallback(function (ev) { return _this.updateValidity(ev); });\n                break;\n            case \"CommandLineTool\":\n                this.run = CommandLineToolFactory_1.CommandLineToolFactory.from(process, this.loc + \".run\");\n                this.run.setValidationCallback(function (ev) { return _this.updateValidity(ev); });\n                break;\n            case \"ExpressionTool\":\n                this.run = new ExpressionToolModel_1.ExpressionToolModel(process);\n                break;\n            default:\n                throw new Error(\"Unknown process class \\\"\" + process.class + \"\\\" at \" + this.loc + \".step. Expected \\\"CommandLineTool\\\", \\\"Workflow\\\", or \\\"ExpressionTool\\\"\");\n        }\n        // when the step is being updated, the ID will not change\n        this.id = this.id || utils_1.snakeCase(this.run.id) || utils_1.snakeCase(this.run.label) || utils_1.snakeCase(this.loc);\n        this.id = this.id.charAt(0) === \"#\" ? this.id.substr(1) : this.id;\n        this._label = this._label || this.run.label || \"\";\n    };\n    SBDraft2StepModel.prototype.serialize = function () {\n        return this._serialize(false);\n    };\n    SBDraft2StepModel.prototype.serializeEmbedded = function (retainSource) {\n        if (retainSource === void 0) { retainSource = false; }\n        return this._serialize(true, retainSource);\n    };\n    SBDraft2StepModel.prototype._serialize = function (embed, retainSource) {\n        var _this = this;\n        if (retainSource === void 0) { retainSource = false; }\n        var base = {};\n        base.id = \"#\" + this.id;\n        base.inputs = this.in.map(function (i) { return i.serialize(); }).filter(function (i) {\n            var keys = Object.keys(i);\n            return !(keys.length === 1 && keys[0] === \"id\");\n        });\n        base.outputs = this.out.map(function (o) { return o.serialize(); });\n        if (this.customProps[\"sbg:rdfId\"] && !embed) {\n            base.run = this.customProps[\"sbg:rdfId\"];\n        }\n        else if (embed && this.run && this.run instanceof WorkflowModel_1.WorkflowModel) {\n            base.run = this.run.serializeEmbedded();\n        }\n        else if (this.run && typeof this.run.serialize === \"function\") {\n            base.run = this.run.serialize();\n        }\n        else {\n            base.run = this.runPath;\n        }\n        if (this.hints.length) {\n            base.hints = this.hints.map(function (hint) { return hint.serialize(); });\n        }\n        var temp = __assign({}, this.customProps);\n        if (!retainSource) {\n            delete temp[\"sbg:rdfId\"];\n            delete temp[\"sbg:rdfSource\"];\n        }\n        if (this._label)\n            base.label = this._label;\n        if (this.description)\n            base.description = this.description;\n        if (this.scatter)\n            base.scatter = this.in.filter(function (i) { return _this.scatter === i.id; })[0].destinationId;\n        return utils_1.spreadAllProps(base, temp);\n    };\n    SBDraft2StepModel.prototype.deserialize = function (step) {\n        var _this = this;\n        var serializedKeys = [\n            \"id\",\n            \"description\",\n            \"label\",\n            \"run\",\n            \"scatter\",\n            \"inputs\",\n            \"outputs\",\n            \"hints\"\n        ];\n        this.id = step.id || \"\";\n        this.description = step.description;\n        this._label = step.label;\n        this.scatter = step.scatter ? step.scatter.split(\".\")[1] : null;\n        this.hints = utils_1.ensureArray(step.hints).map(function (hint, i) {\n            return _this.createReq(hint, SBDraft2ExpressionModel_1.SBDraft2ExpressionModel, _this.loc + \".hints[\" + i + \"]\", true);\n        });\n        if (step.run && typeof step.run === \"string\") {\n            this.runPath = step.run;\n        }\n        else if (step.run && typeof step.run !== \"string\" && step.run.class) {\n            this.createRun(step.run);\n        }\n        this.id = this.id.charAt(0) === \"#\" ? this.id.substr(1) : this.id;\n        this.in = utils_1.ensureArray(step.inputs).map(function (step, index) {\n            return new SBDraft2WorkflowStepInputModel_1.SBDraft2WorkflowStepInputModel(step, _this, _this.loc + \".inputs[\" + index + \"]\");\n        });\n        this.out = utils_1.ensureArray(step.outputs).map(function (step, index) {\n            return new SBDraft2WorkflowStepOutputModel_1.SBDraft2WorkflowStepOutputModel(step, _this, _this.loc + \".outputs[\" + index + \"]\");\n        });\n        if (typeof step.run === \"string\") {\n            console.warn(\"Expected to get json for step.run at \" + this.loc + \", reading in and out from step\");\n        }\n        else {\n            this.compareInPorts();\n            this.compareOutPorts();\n        }\n        this.in.forEach(function (i) {\n            // if in type is a required file or required array of files, include it by default\n            if (utils_1.isFileType(i, true)) {\n                i.isVisible = true;\n            }\n        });\n        utils_1.spreadSelectProps(step, this.customProps, serializedKeys);\n    };\n    return SBDraft2StepModel;\n}(StepModel_1.StepModel));\nexports.SBDraft2StepModel = SBDraft2StepModel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/d2sb/SBDraft2StepModel.js\n// module id = 89\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar WorkflowStepInputModel_1 = require(\"../generic/WorkflowStepInputModel\");\nvar utils_1 = require(\"../helpers/utils\");\nvar constants_1 = require(\"../helpers/constants\");\nvar ParameterTypeModel_1 = require(\"../generic/ParameterTypeModel\");\nvar SBDraft2WorkflowStepInputModel = /** @class */ (function (_super) {\n    __extends(SBDraft2WorkflowStepInputModel, _super);\n    function SBDraft2WorkflowStepInputModel(input, parentStep, loc) {\n        var _this = _super.call(this, loc) || this;\n        _this.parentStep = parentStep || {};\n        if (input)\n            _this.deserialize(input);\n        return _this;\n    }\n    Object.defineProperty(SBDraft2WorkflowStepInputModel.prototype, \"id\", {\n        get: function () {\n            return this._id;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SBDraft2WorkflowStepInputModel.prototype, \"connectionId\", {\n        /**\n         * The connectionId used within the graph, prefix with \"in/\" because it refers to the\n         */\n        get: function () {\n            return \"\" + constants_1.STEP_INPUT_CONNECTION_PREFIX + this.parentStep.id + \"/\" + this._id;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SBDraft2WorkflowStepInputModel.prototype, \"destinationId\", {\n        /**\n         * ID used for scatter\n         * @returns {string}\n         */\n        get: function () {\n            return \"#\" + this.parentStep.id + \".\" + this._id;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SBDraft2WorkflowStepInputModel.prototype.serialize = function () {\n        var base = {};\n        base.id = \"#\" + this.parentStep.id + \".\" + this._id;\n        if (this.source.length)\n            base.source = this.source.slice();\n        if (this.linkMerge)\n            base.linkMerge = this.linkMerge;\n        if (this.default !== undefined && this.default !== null)\n            base.default = this.default;\n        base = utils_1.spreadAllProps(base, this.customProps);\n        delete base[\"sbg:toolDefaultValue\"];\n        delete base[\"sbg:category\"];\n        delete base[\"sbg:altPrefix\"];\n        return base;\n    };\n    SBDraft2WorkflowStepInputModel.prototype.deserialize = function (attr) {\n        var serializedKeys = [\n            \"default\",\n            \"id\",\n            \"fileTypes\",\n            \"type\",\n            \"description\",\n            \"label\",\n            \"source\"\n        ];\n        this.default = attr.default;\n        this._id = attr.id.split(\".\")[1];\n        // properties that will not be serialized on the step.in,\n        // but are necessary for internal functions\n        this.fileTypes = attr[\"fileTypes\"];\n        this.description = attr[\"description\"];\n        this.label = attr[\"label\"];\n        this.source = utils_1.ensureArray(attr.source);\n        this.type = attr[\"type\"];\n        if (!this.type)\n            this.type = new ParameterTypeModel_1.ParameterTypeModel(null);\n        utils_1.spreadSelectProps(attr, this.customProps, serializedKeys);\n    };\n    return SBDraft2WorkflowStepInputModel;\n}(WorkflowStepInputModel_1.WorkflowStepInputModel));\nexports.SBDraft2WorkflowStepInputModel = SBDraft2WorkflowStepInputModel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/d2sb/SBDraft2WorkflowStepInputModel.js\n// module id = 90\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar WorkflowStepOutputModel_1 = require(\"../generic/WorkflowStepOutputModel\");\nvar utils_1 = require(\"../helpers/utils\");\nvar constants_1 = require(\"../helpers/constants\");\nvar ParameterTypeModel_1 = require(\"../generic/ParameterTypeModel\");\nvar SBDraft2WorkflowStepOutputModel = /** @class */ (function (_super) {\n    __extends(SBDraft2WorkflowStepOutputModel, _super);\n    function SBDraft2WorkflowStepOutputModel(output, parentStep, loc) {\n        var _this = _super.call(this, loc) || this;\n        _this.parentStep = parentStep || {};\n        if (output)\n            _this.deserialize(output);\n        return _this;\n    }\n    Object.defineProperty(SBDraft2WorkflowStepOutputModel.prototype, \"id\", {\n        get: function () {\n            return this._id;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SBDraft2WorkflowStepOutputModel.prototype, \"connectionId\", {\n        /**\n         * ID used in graph\n         */\n        get: function () {\n            return \"\" + constants_1.STEP_OUTPUT_CONNECTION_PREFIX + this.parentStep.id + \"/\" + this._id;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SBDraft2WorkflowStepOutputModel.prototype, \"sourceId\", {\n        /**\n         * ID used for creating connections\n         */\n        get: function () {\n            return \"#\" + this.parentStep.id + \".\" + this._id;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SBDraft2WorkflowStepOutputModel.prototype.serialize = function () {\n        return {\n            id: \"#\" + this.parentStep.id + \".\" + this._id\n        };\n    };\n    SBDraft2WorkflowStepOutputModel.prototype.deserialize = function (attr) {\n        var serializedKeys = [\"id\", \"sbg:fileTypes\"];\n        this._id = attr.id.split(\".\")[1];\n        // properties that will not be serialized on the step.out,\n        // but are necessary for internal functions\n        this.fileTypes = attr[\"fileTypes\"];\n        this.type = attr[\"type\"];\n        this.description = attr[\"description\"];\n        this.label = attr[\"label\"];\n        if (!this.type)\n            this.type = new ParameterTypeModel_1.ParameterTypeModel(null);\n        utils_1.spreadSelectProps(attr, this.customProps, serializedKeys);\n    };\n    return SBDraft2WorkflowStepOutputModel;\n}(WorkflowStepOutputModel_1.WorkflowStepOutputModel));\nexports.SBDraft2WorkflowStepOutputModel = SBDraft2WorkflowStepOutputModel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/d2sb/SBDraft2WorkflowStepOutputModel.js\n// module id = 91\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar WorkflowInputParameterModel_1 = require(\"../generic/WorkflowInputParameterModel\");\nvar ParameterTypeModel_1 = require(\"../generic/ParameterTypeModel\");\nvar constants_1 = require(\"../helpers/constants\");\nvar utils_1 = require(\"../helpers/utils\");\nvar SBDraft2WorkflowInputParameterModel = /** @class */ (function (_super) {\n    __extends(SBDraft2WorkflowInputParameterModel, _super);\n    function SBDraft2WorkflowInputParameterModel(input, loc, eventHub) {\n        var _this = _super.call(this, loc, eventHub) || this;\n        if (input)\n            _this.deserialize(input);\n        return _this;\n    }\n    Object.defineProperty(SBDraft2WorkflowInputParameterModel.prototype, \"connectionId\", {\n        get: function () {\n            return \"\" + constants_1.STEP_OUTPUT_CONNECTION_PREFIX + this.id + \"/\" + this.id;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SBDraft2WorkflowInputParameterModel.prototype, \"sourceId\", {\n        get: function () {\n            return \"#\" + this.id;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SBDraft2WorkflowInputParameterModel.prototype.deserialize = function (input) {\n        var _this = this;\n        var serializedKeys = [\"name\", \"id\", \"type\", \"label\", \"description\", \"sbg:fileTypes\"];\n        this.isField = !!input.name;\n        if (input.id && input.id.charAt(0) === \"#\") {\n            this.id = input.id.substr(1);\n        }\n        else {\n            this.id = input.id\n                || input.name || \"\"; // for record fields\n        }\n        this.type = new ParameterTypeModel_1.ParameterTypeModel(input.type, SBDraft2WorkflowInputParameterModel, this.id + \"_field\", this.loc + \".type\", this.eventHub);\n        this.type.setValidationCallback(function (err) {\n            _this.updateValidity(err);\n        });\n        this.fileTypes = utils_1.commaSeparatedToArray(input[\"sbg:fileTypes\"]);\n        this._label = input.label;\n        this.description = input.description;\n        // only show inputs which are type File or File[], or should be explicitly shown\n        this.isVisible = this.type.type === \"File\" || this.type.items === \"File\" || !!input[\"sbg:includeInPorts\"];\n        utils_1.spreadSelectProps(input, this.customProps, serializedKeys);\n    };\n    SBDraft2WorkflowInputParameterModel.prototype.serialize = function () {\n        var base = {};\n        base.type = this.type.serialize();\n        if (this._label)\n            base.label = this._label;\n        if (this.description)\n            base.description = this.description;\n        if (this.fileTypes.length)\n            base[\"sbg:fileTypes\"] = this.fileTypes.join(\", \");\n        if (this.isField) {\n            base.name = this.id;\n        }\n        else {\n            base.id = \"#\" + this.id;\n        }\n        return utils_1.spreadAllProps(base, this.customProps);\n    };\n    return SBDraft2WorkflowInputParameterModel;\n}(WorkflowInputParameterModel_1.WorkflowInputParameterModel));\nexports.SBDraft2WorkflowInputParameterModel = SBDraft2WorkflowInputParameterModel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/d2sb/SBDraft2WorkflowInputParameterModel.js\n// module id = 92\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar WorkflowOutputParameterModel_1 = require(\"../generic/WorkflowOutputParameterModel\");\nvar ParameterTypeModel_1 = require(\"../generic/ParameterTypeModel\");\nvar utils_1 = require(\"../helpers/utils\");\nvar SBDraft2WorkflowOutputParameterModel = /** @class */ (function (_super) {\n    __extends(SBDraft2WorkflowOutputParameterModel, _super);\n    function SBDraft2WorkflowOutputParameterModel(attr, loc, eventHub) {\n        var _this = _super.call(this, loc, eventHub) || this;\n        if (attr)\n            _this.deserialize(attr);\n        return _this;\n    }\n    Object.defineProperty(SBDraft2WorkflowOutputParameterModel.prototype, \"destinationId\", {\n        get: function () {\n            return \"#\" + this.id;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SBDraft2WorkflowOutputParameterModel.prototype.serialize = function () {\n        var base = {};\n        base.id = \"#\" + this.id;\n        if (this._label)\n            base.label = this._label;\n        if (this.description)\n            base.description = this.description;\n        base.source = utils_1.ensureArray(this.source);\n        if (this.type)\n            base.type = this.type.serialize();\n        if (this.fileTypes.length)\n            base[\"sbg:fileTypes\"] = this.fileTypes.join(\", \");\n        return utils_1.spreadAllProps(base, this.customProps);\n    };\n    SBDraft2WorkflowOutputParameterModel.prototype.deserialize = function (output) {\n        var serializedKeys = [\"id\", \"type\", \"source\", \"label\", \"description\", \"sbg:fileTypes\"];\n        if (output.id && output.id.charAt(0) === \"#\") {\n            this.id = output.id.substr(1);\n        }\n        else {\n            this.id = output.id || \"\"; // for record fields\n        }\n        this.source = utils_1.ensureArray(output.source);\n        this.type = new ParameterTypeModel_1.ParameterTypeModel(output.type, SBDraft2WorkflowOutputParameterModel, this.id + \"_field\", this.loc + \".type\", this.eventHub);\n        this._label = output.label;\n        this.description = output.description;\n        this.fileTypes = utils_1.commaSeparatedToArray(output[\"sbg:fileTypes\"]);\n        utils_1.spreadSelectProps(output, this.customProps, serializedKeys);\n    };\n    return SBDraft2WorkflowOutputParameterModel;\n}(WorkflowOutputParameterModel_1.WorkflowOutputParameterModel));\nexports.SBDraft2WorkflowOutputParameterModel = SBDraft2WorkflowOutputParameterModel;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/d2sb/SBDraft2WorkflowOutputParameterModel.js\n// module id = 93\n// module chunks = 0","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./ExpressionEvaluator\"));\n__export(require(\"./CommandLinePart\"));\n__export(require(\"./JSExecutor\"));\n__export(require(\"./Graph\"));\n__export(require(\"./TypeResolver\"));\n__export(require(\"./constants\"));\n__export(require(\"./utils\"));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/helpers/index.js\n// module id = 94\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar vm = require('vm');\nvar JSExecutor = /** @class */ (function () {\n    function JSExecutor() {\n    }\n    JSExecutor.evaluate = function (expr, context) {\n        return new Promise(function (res, rej) {\n            try {\n                var result = vm.runInNewContext(expr, context || {}, { timeout: 1000 });\n                res(result);\n            }\n            catch (ex) {\n                rej(ex);\n            }\n        });\n    };\n    return JSExecutor;\n}());\nexports.JSExecutor = JSExecutor;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwlts/models/helpers/JSExecutor.js\n// module id = 95\n// module chunks = 0","var indexOf = require('indexof');\n\nvar Object_keys = function (obj) {\n    if (Object.keys) return Object.keys(obj)\n    else {\n        var res = [];\n        for (var key in obj) res.push(key)\n        return res;\n    }\n};\n\nvar forEach = function (xs, fn) {\n    if (xs.forEach) return xs.forEach(fn)\n    else for (var i = 0; i < xs.length; i++) {\n        fn(xs[i], i, xs);\n    }\n};\n\nvar defineProp = (function() {\n    try {\n        Object.defineProperty({}, '_', {});\n        return function(obj, name, value) {\n            Object.defineProperty(obj, name, {\n                writable: true,\n                enumerable: false,\n                configurable: true,\n                value: value\n            })\n        };\n    } catch(e) {\n        return function(obj, name, value) {\n            obj[name] = value;\n        };\n    }\n}());\n\nvar globals = ['Array', 'Boolean', 'Date', 'Error', 'EvalError', 'Function',\n'Infinity', 'JSON', 'Math', 'NaN', 'Number', 'Object', 'RangeError',\n'ReferenceError', 'RegExp', 'String', 'SyntaxError', 'TypeError', 'URIError',\n'decodeURI', 'decodeURIComponent', 'encodeURI', 'encodeURIComponent', 'escape',\n'eval', 'isFinite', 'isNaN', 'parseFloat', 'parseInt', 'undefined', 'unescape'];\n\nfunction Context() {}\nContext.prototype = {};\n\nvar Script = exports.Script = function NodeScript (code) {\n    if (!(this instanceof Script)) return new Script(code);\n    this.code = code;\n};\n\nScript.prototype.runInContext = function (context) {\n    if (!(context instanceof Context)) {\n        throw new TypeError(\"needs a 'context' argument.\");\n    }\n    \n    var iframe = document.createElement('iframe');\n    if (!iframe.style) iframe.style = {};\n    iframe.style.display = 'none';\n    \n    document.body.appendChild(iframe);\n    \n    var win = iframe.contentWindow;\n    var wEval = win.eval, wExecScript = win.execScript;\n\n    if (!wEval && wExecScript) {\n        // win.eval() magically appears when this is called in IE:\n        wExecScript.call(win, 'null');\n        wEval = win.eval;\n    }\n    \n    forEach(Object_keys(context), function (key) {\n        win[key] = context[key];\n    });\n    forEach(globals, function (key) {\n        if (context[key]) {\n            win[key] = context[key];\n        }\n    });\n    \n    var winKeys = Object_keys(win);\n\n    var res = wEval.call(win, this.code);\n    \n    forEach(Object_keys(win), function (key) {\n        // Avoid copying circular objects like `top` and `window` by only\n        // updating existing context properties or new properties in the `win`\n        // that was only introduced after the eval.\n        if (key in context || indexOf(winKeys, key) === -1) {\n            context[key] = win[key];\n        }\n    });\n\n    forEach(globals, function (key) {\n        if (!(key in context)) {\n            defineProp(context, key, win[key]);\n        }\n    });\n    \n    document.body.removeChild(iframe);\n    \n    return res;\n};\n\nScript.prototype.runInThisContext = function () {\n    return eval(this.code); // maybe...\n};\n\nScript.prototype.runInNewContext = function (context) {\n    var ctx = Script.createContext(context);\n    var res = this.runInContext(ctx);\n\n    forEach(Object_keys(ctx), function (key) {\n        context[key] = ctx[key];\n    });\n\n    return res;\n};\n\nforEach(Object_keys(Script.prototype), function (name) {\n    exports[name] = Script[name] = function (code) {\n        var s = Script(code);\n        return s[name].apply(s, [].slice.call(arguments, 1));\n    };\n});\n\nexports.createScript = function (code) {\n    return exports.Script(code);\n};\n\nexports.createContext = Script.createContext = function (context) {\n    var copy = new Context();\n    if(typeof context === 'object') {\n        forEach(Object_keys(context), function (key) {\n            copy[key] = context[key];\n        });\n    }\n    return copy;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/vm-browserify/index.js\n// module id = 96\n// module chunks = 0","\nvar indexOf = [].indexOf;\n\nmodule.exports = function(arr, obj){\n  if (indexOf) return arr.indexOf(obj);\n  for (var i = 0; i < arr.length; ++i) {\n    if (arr[i] === obj) return i;\n  }\n  return -1;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/indexof/index.js\n// module id = 97\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar DomEvents = /** @class */ (function () {\n    function DomEvents(root) {\n        this.root = root;\n        this.handlers = new Map();\n    }\n    DomEvents.prototype.on = function () {\n        var _this = this;\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var event = args.shift();\n        var selector = typeof args[0] === \"string\" ? args.shift() : undefined;\n        var handler = typeof args[0] === \"function\" ? args.shift() : function () {\n        };\n        var root = args.shift();\n        var eventHolder = root || this.root;\n        if (!this.handlers.has(eventHolder)) {\n            this.handlers.set(eventHolder, {});\n        }\n        if (!this.handlers.get(eventHolder)[event]) {\n            this.handlers.get(eventHolder)[event] = [];\n        }\n        var evListener = function (ev) {\n            var target;\n            if (selector) {\n                var selected = Array.from(_this.root.querySelectorAll(selector));\n                target = ev.target;\n                while (target) {\n                    if (selected.find(function (el) { return el === target; })) {\n                        break;\n                    }\n                    target = target.parentNode;\n                }\n                if (!target) {\n                    return;\n                }\n            }\n            var handlerOutput = handler(ev, target || ev.target, _this.root);\n            if (handlerOutput === false) {\n                return false;\n            }\n            return false;\n        };\n        eventHolder.addEventListener(event, evListener);\n        this.handlers.get(eventHolder)[event].push(evListener);\n        return function off() {\n            eventHolder.removeEventListener(event, evListener);\n        };\n    };\n    DomEvents.prototype.keyup = function () {\n    };\n    DomEvents.prototype.adaptedDrag = function (selector, move, start, end) {\n        var _this = this;\n        var dragging = false;\n        var lastMove;\n        var draggedEl;\n        var moveEventCount = 0;\n        var mouseDownEv;\n        var threshold = 3;\n        var mouseOverListeners;\n        var onMouseDown = function (ev, el) {\n            dragging = true;\n            lastMove = ev;\n            draggedEl = el;\n            mouseDownEv = ev;\n            ev.preventDefault();\n            mouseOverListeners = _this.detachHandlers(\"mouseover\");\n            document.addEventListener(\"mousemove\", moveHandler);\n            document.addEventListener(\"mouseup\", upHandler);\n            return false;\n        };\n        var off = this.on(\"mousedown\", selector, onMouseDown);\n        var moveHandler = function (ev) {\n            if (!dragging) {\n                return;\n            }\n            var dx = ev.screenX - lastMove.screenX;\n            var dy = ev.screenY - lastMove.screenY;\n            moveEventCount++;\n            if (moveEventCount === threshold && typeof start === \"function\") {\n                start(mouseDownEv, draggedEl, _this.root);\n            }\n            if (moveEventCount >= threshold && typeof move === \"function\") {\n                move(dx, dy, ev, draggedEl, _this.root);\n            }\n        };\n        var upHandler = function (ev) {\n            if (moveEventCount >= threshold) {\n                if (dragging) {\n                    if (typeof end === \"function\") {\n                        end(ev, draggedEl, _this.root);\n                    }\n                }\n                var parentNode_1 = draggedEl.parentNode;\n                var clickCancellation_1 = function (ev) {\n                    ev.stopPropagation();\n                    parentNode_1.removeEventListener(\"click\", clickCancellation_1, true);\n                };\n                parentNode_1.addEventListener(\"click\", clickCancellation_1, true);\n            }\n            dragging = false;\n            draggedEl = undefined;\n            lastMove = undefined;\n            moveEventCount = 0;\n            document.removeEventListener(\"mouseup\", upHandler);\n            document.removeEventListener(\"mousemove\", moveHandler);\n            for (var i in mouseOverListeners) {\n                _this.root.addEventListener(\"mouseover\", mouseOverListeners[i]);\n                _this.handlers.get(_this.root)[\"mouseover\"] = [];\n                _this.handlers.get(_this.root)[\"mouseover\"].push(mouseOverListeners[i]);\n            }\n        };\n        return off;\n    };\n    DomEvents.prototype.drag = function (selector, move, start, end) {\n        var _this = this;\n        var dragging = false;\n        var lastMove;\n        var draggedEl;\n        var moveEventCount = 0;\n        var mouseDownEv;\n        var threshold = 3;\n        var mouseOverListeners;\n        var onMouseDown = function (ev, el, root) {\n            dragging = true;\n            lastMove = ev;\n            draggedEl = el;\n            mouseDownEv = ev;\n            ev.preventDefault();\n            mouseOverListeners = _this.detachHandlers(\"mouseover\");\n            document.addEventListener(\"mousemove\", moveHandler);\n            document.addEventListener(\"mouseup\", upHandler);\n            return false;\n        };\n        var off = this.on(\"mousedown\", selector, onMouseDown);\n        var moveHandler = function (ev) {\n            if (!dragging) {\n                return;\n            }\n            var dx = ev.screenX - lastMove.screenX;\n            var dy = ev.screenY - lastMove.screenY;\n            moveEventCount++;\n            if (moveEventCount === threshold && typeof start === \"function\") {\n                start(mouseDownEv, draggedEl, _this.root);\n            }\n            if (moveEventCount >= threshold && typeof move === \"function\") {\n                move(dx, dy, ev, draggedEl, _this.root);\n            }\n        };\n        var upHandler = function (ev) {\n            if (moveEventCount >= threshold) {\n                if (dragging) {\n                    if (typeof end === \"function\") {\n                        end(ev, draggedEl, _this.root);\n                    }\n                }\n                // When releasing the mouse button, if it happens over the same element that we initially had\n                // the mouseDown event, it will trigger a click event. We want to stop that, so we intercept\n                // it by capturing click top-down and stopping its propagation.\n                // However, if the mouseUp didn't happen above the starting element, it wouldn't trigger a click,\n                // but it would intercept the next (unrelated) click event unless we prevent interception in the\n                // first place by checking if we released above the starting element.\n                if (draggedEl.contains(ev.target)) {\n                    var parentNode_2 = draggedEl.parentNode;\n                    var clickCancellation_2 = function (ev) {\n                        ev.stopPropagation();\n                        parentNode_2.removeEventListener(\"click\", clickCancellation_2, true);\n                    };\n                    parentNode_2.addEventListener(\"click\", clickCancellation_2, true);\n                }\n            }\n            dragging = false;\n            draggedEl = undefined;\n            lastMove = undefined;\n            moveEventCount = 0;\n            document.removeEventListener(\"mouseup\", upHandler);\n            document.removeEventListener(\"mousemove\", moveHandler);\n            for (var i in mouseOverListeners) {\n                _this.root.addEventListener(\"mouseover\", mouseOverListeners[i]);\n                _this.handlers.get(_this.root)[\"mouseover\"] = [];\n                _this.handlers.get(_this.root)[\"mouseover\"].push(mouseOverListeners[i]);\n            }\n        };\n        return off;\n    };\n    DomEvents.prototype.hover = function (element, hover, enter, leave) {\n        var _this = this;\n        if (hover === void 0) { hover = function () {\n        }; }\n        if (enter === void 0) { enter = function () {\n        }; }\n        if (leave === void 0) { leave = function () {\n        }; }\n        var hovering = false;\n        element.addEventListener(\"mouseenter\", function (ev) {\n            hovering = true;\n            enter(ev, element, _this.root);\n        });\n        element.addEventListener(\"mouseleave\", function (ev) {\n            hovering = false;\n            leave(ev, element, _this.root);\n        });\n        element.addEventListener(\"mousemove\", function (ev) {\n            if (!hovering) {\n                return;\n            }\n            hover(ev, element, _this.root);\n        });\n    };\n    DomEvents.prototype.detachHandlers = function (evName, root) {\n        root = root || this.root;\n        var eventListeners = [];\n        this.handlers.forEach(function (handlers, listenerRoot) {\n            if (listenerRoot.id !== root.id || listenerRoot !== root) {\n                return;\n            }\n            var _loop_1 = function (eventName) {\n                if (eventName !== evName) {\n                    return \"continue\";\n                }\n                handlers[eventName].forEach(function (handler) {\n                    eventListeners.push(handler);\n                    listenerRoot.removeEventListener(eventName, handler);\n                });\n            };\n            for (var eventName in handlers) {\n                _loop_1(eventName);\n            }\n        });\n        delete this.handlers.get(this.root)[evName];\n        return eventListeners;\n    };\n    DomEvents.prototype.detachAll = function () {\n        this.handlers.forEach(function (handlers, listenerRoot) {\n            var _loop_2 = function (eventName) {\n                handlers[eventName].forEach(function (handler) { return listenerRoot.removeEventListener(eventName, handler); });\n            };\n            for (var eventName in handlers) {\n                _loop_2(eventName);\n            }\n        });\n        this.handlers.clear();\n    };\n    return DomEvents;\n}());\nexports.DomEvents = DomEvents;\n//# sourceMappingURL=dom-events.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwl-svg/compiled/src/utils/dom-events.js\n// module id = 98\n// module chunks = 0","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EventHub = /** @class */ (function () {\n    function EventHub(validEventList) {\n        this.handlers = validEventList.reduce(function (acc, ev) {\n            return Object.assign(acc, (_a = {}, _a[ev] = [], _a));\n            var _a;\n        }, {});\n    }\n    EventHub.prototype.on = function (event, handler) {\n        var _this = this;\n        this.guard(event, \"subscribe to\");\n        this.handlers[event].push(handler);\n        return function () { return _this.off(event, handler); };\n    };\n    EventHub.prototype.off = function (event, handler) {\n        this.guard(event, \"unsubscribe from\");\n        return this.handlers[event].splice(this.handlers[event].findIndex(function (h) { return handler === h; }), 1);\n    };\n    EventHub.prototype.emit = function (event) {\n        var data = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            data[_i - 1] = arguments[_i];\n        }\n        this.guard(event, \"emit\");\n        for (var i = 0; i < this.handlers[event].length; i++) {\n            (_a = this.handlers[event])[i].apply(_a, __spread(data));\n        }\n        var _a;\n    };\n    EventHub.prototype.empty = function () {\n        for (var event_1 in this.handlers) {\n            this.handlers[event_1] = [];\n        }\n    };\n    EventHub.prototype.guard = function (event, verb) {\n        if (!this.handlers[event]) {\n            console.warn(\"Trying to \" + verb + \" a non-supported event \\u201C\" + event + \"\\u201D. \\n            Supported events are: \" + Object.keys(this.handlers).join(\", \") + \"\\u201D\");\n        }\n    };\n    return EventHub;\n}());\nexports.EventHub = EventHub;\n//# sourceMappingURL=event-hub.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwl-svg/compiled/src/utils/event-hub.js\n// module id = 99\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar HtmlUtils = /** @class */ (function () {\n    function HtmlUtils() {\n    }\n    HtmlUtils.escapeHTML = function (source) {\n        return String(source).replace(/[&<>\"'\\/]/g, function (s) { return HtmlUtils.entityMap[s]; });\n    };\n    HtmlUtils.entityMap = {\n        \"&\": \"&amp;\",\n        \"<\": \"&lt;\",\n        \">\": \"&gt;\",\n        \"\\\"\\\"\": \"&quot;\",\n        \"'\": \"&#39;\",\n        \"/\": \"&#x2F;\"\n    };\n    return HtmlUtils;\n}());\nexports.HtmlUtils = HtmlUtils;\n//# sourceMappingURL=html-utils.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/cwl-svg/compiled/src/utils/html-utils.js\n// module id = 100\n// module chunks = 0","import {PluginBase, SelectionPlugin} from \"cwl-svg\";\nimport {StepModel, WorkflowInputParameterModel, WorkflowOutputParameterModel} from \"cwlts/models\";\n\nexport default class WorkflowExpansionPlugin extends PluginBase {\n    afterRender() {\n        window.addEventListener(\"dblclick\", event => {\n            const element = this.workflow.findParent(event.target as SVGElement, \"node\");\n\n            if (element){\n                const id = element.getAttribute(\"data-connection-id\");\n                const model = this.workflow.model.findById(id);\n                console.log(JSON.stringify(model));\n            }\n        }, true);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ../expand.ts"],"sourceRoot":""}